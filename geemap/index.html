
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://giswqs.github.io/geemap/geemap/" rel="canonical"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-6.1.0" name="generator"/>
<title>geemap module - geemap</title>
<link href="../assets/stylesheets/main.bc7e593a.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.ab28b872.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#geemap-module">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="geemap" class="md-header-nav__button md-logo" href="http://giswqs.github.io/geemap" title="geemap">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            geemap
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              geemap module
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/giswqs/geemap/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="geemap" class="md-nav__button md-logo" href="http://giswqs.github.io/geemap" title="geemap">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    geemap
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/giswqs/geemap/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
      Home
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation/">
      Installation
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../get-started/">
      Get Started
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../usage/">
      Usage
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tutorials/">
      Tutorials
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing/">
      Contributing
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../citations/">
      Citations
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../faq/">
      FAQ
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://blog.gishub.org">
      Blog
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://www.youtube.com/c/QiushengWu">
      YouTube Channel
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://github.com/giswqs/geemap/issues">
      Report Issues
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-12" id="nav-12" type="checkbox"/>
<label class="md-nav__link" for="nav-12">
      API Reference
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-12">
<span class="md-nav__icon md-icon"></span>
        API Reference
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../basemaps/">
      basemaps module
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cartoee/">
      cartoee module
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../conversion/">
      conversion module
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../eefolium/">
      eefolium module
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        geemap module
        <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
      geemap module
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap">
    geemap.geemap
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map">
    Map
  </a>
<nav aria-label="Map" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_basemap">
    add_basemap()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_ee_layer">
    add_ee_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_landsat_ts_gif">
    add_landsat_ts_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_layer_control">
    add_layer_control()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_legend">
    add_legend()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_maker_cluster">
    add_maker_cluster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_minimap">
    add_minimap()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_raster">
    add_raster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_tile_layer">
    add_tile_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_wms_layer">
    add_wms_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.addLayer">
    addLayer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.addLayerControl">
    addLayerControl()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.basemap_demo">
    basemap_demo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.center_object">
    center_object()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.centerObject">
    centerObject()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.extract_values_to_points">
    extract_values_to_points()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.find_layer">
    find_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.get_scale">
    get_scale()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.getScale">
    getScale()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.image_overlay">
    image_overlay()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.layer_opacity">
    layer_opacity()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.marker_cluster">
    marker_cluster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.plot">
    plot()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.plot_demo">
    plot_demo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.plot_raster">
    plot_raster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.remove_drawn_features">
    remove_drawn_features()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_center">
    set_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_control_visibility">
    set_control_visibility()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_options">
    set_options()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_plot_options">
    set_plot_options()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.setCenter">
    setCenter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.setControlVisibility">
    setControlVisibility()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.setOptions">
    setOptions()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.split_map">
    split_map()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.to_html">
    to_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.to_image">
    to_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.toolbar_reset">
    toolbar_reset()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.ts_inspector">
    ts_inspector()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.video_overlay">
    video_overlay()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.add_image_to_gif">
    add_image_to_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.add_text_to_gif">
    add_text_to_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.adjust_longitude">
    adjust_longitude()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.api_docs">
    api_docs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.build_api_tree">
    build_api_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.build_repo_tree">
    build_repo_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.check_color">
    check_color()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.check_git_install">
    check_git_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.check_install">
    check_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_github_repo">
    clone_github_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_github_repo2">
    clone_github_repo2()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_google_repo">
    clone_google_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_repo">
    clone_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.copy_credentials_to_colab">
    copy_credentials_to_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.copy_credentials_to_drive">
    copy_credentials_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.create_code_cell">
    create_code_cell()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.create_colorbar">
    create_colorbar()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.create_download_link">
    create_download_link()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.credentials_in_colab">
    credentials_in_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.credentials_in_drive">
    credentials_in_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.csv_to_shp">
    csv_to_shp()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.date_sequence">
    date_sequence()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.download_ee_video">
    download_ee_video()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.edit_download_html">
    edit_download_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_api_to_csv">
    ee_api_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_data_html">
    ee_data_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_data_thumbnail">
    ee_data_thumbnail()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_geojson">
    ee_export_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image">
    ee_export_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image_collection">
    ee_export_image_collection()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image_collection_to_drive">
    ee_export_image_collection_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image_to_drive">
    ee_export_image_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_vector">
    ee_export_vector()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_vector_to_drive">
    ee_export_vector_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_function_tree">
    ee_function_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_initialize">
    ee_initialize()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_search">
    ee_search()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_tile_layer">
    ee_tile_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_csv">
    ee_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_geojson">
    ee_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_numpy">
    ee_to_numpy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_shp">
    ee_to_shp()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_user_id">
    ee_user_id()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.file_browser">
    file_browser()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.filter_polygons">
    filter_polygons()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.geocode">
    geocode()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.geojson_to_ee">
    geojson_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.has_transparency">
    has_transparency()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.hex_to_rgb">
    hex_to_rgb()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.image_props">
    image_props()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.image_stats">
    image_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.in_colab_shell">
    in_colab_shell()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.install_from_github">
    install_from_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.is_drive_mounted">
    is_drive_mounted()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.is_latlon_valid">
    is_latlon_valid()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.is_tool">
    is_tool()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_timeseries">
    landsat_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_ts_gif">
    landsat_ts_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_ts_norm_diff">
    landsat_ts_norm_diff()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_ts_norm_diff_gif">
    landsat_ts_norm_diff_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.latlon_from_text">
    latlon_from_text()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.legend_from_ee">
    legend_from_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.load_GeoTIFF">
    load_GeoTIFF()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.load_GeoTIFFs">
    load_GeoTIFFs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.minimum_bounding_box">
    minimum_bounding_box()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.naip_timeseries">
    naip_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.open_github">
    open_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.open_image_from_url">
    open_image_from_url()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.open_youtube">
    open_youtube()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.read_api_csv">
    read_api_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.reduce_gif_size">
    reduce_gif_size()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.rgb_to_hex">
    rgb_to_hex()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.screen_capture">
    screen_capture()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.search_api_tree">
    search_api_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.search_ee_data">
    search_ee_data()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.sentinel2_timeseries">
    sentinel2_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.set_proxy">
    set_proxy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.show_image">
    show_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.show_youtube">
    show_youtube()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.shp_to_ee">
    shp_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.shp_to_geojson">
    shp_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.system_fonts">
    system_fonts()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.update_package">
    update_package()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.upload_to_imgur">
    upload_to_imgur()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.zonal_statistics">
    zonal_statistics()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.zonal_statistics_by_group">
    zonal_statistics_by_group()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../legends/">
      legends module
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ml/">
      ml module
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utils/">
      utils module
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap">
    geemap.geemap
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map">
    Map
  </a>
<nav aria-label="Map" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_basemap">
    add_basemap()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_ee_layer">
    add_ee_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_landsat_ts_gif">
    add_landsat_ts_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_layer_control">
    add_layer_control()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_legend">
    add_legend()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_maker_cluster">
    add_maker_cluster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_minimap">
    add_minimap()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_raster">
    add_raster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_tile_layer">
    add_tile_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.add_wms_layer">
    add_wms_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.addLayer">
    addLayer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.addLayerControl">
    addLayerControl()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.basemap_demo">
    basemap_demo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.center_object">
    center_object()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.centerObject">
    centerObject()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.extract_values_to_points">
    extract_values_to_points()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.find_layer">
    find_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.get_scale">
    get_scale()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.getScale">
    getScale()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.image_overlay">
    image_overlay()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.layer_opacity">
    layer_opacity()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.marker_cluster">
    marker_cluster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.plot">
    plot()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.plot_demo">
    plot_demo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.plot_raster">
    plot_raster()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.remove_drawn_features">
    remove_drawn_features()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_center">
    set_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_control_visibility">
    set_control_visibility()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_options">
    set_options()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.set_plot_options">
    set_plot_options()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.setCenter">
    setCenter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.setControlVisibility">
    setControlVisibility()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.setOptions">
    setOptions()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.split_map">
    split_map()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.to_html">
    to_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.to_image">
    to_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.toolbar_reset">
    toolbar_reset()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.ts_inspector">
    ts_inspector()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.Map.video_overlay">
    video_overlay()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.add_image_to_gif">
    add_image_to_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.add_text_to_gif">
    add_text_to_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.adjust_longitude">
    adjust_longitude()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.api_docs">
    api_docs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.build_api_tree">
    build_api_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.build_repo_tree">
    build_repo_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.check_color">
    check_color()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.check_git_install">
    check_git_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.check_install">
    check_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_github_repo">
    clone_github_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_github_repo2">
    clone_github_repo2()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_google_repo">
    clone_google_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.clone_repo">
    clone_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.copy_credentials_to_colab">
    copy_credentials_to_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.copy_credentials_to_drive">
    copy_credentials_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.create_code_cell">
    create_code_cell()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.create_colorbar">
    create_colorbar()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.create_download_link">
    create_download_link()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.credentials_in_colab">
    credentials_in_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.credentials_in_drive">
    credentials_in_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.csv_to_shp">
    csv_to_shp()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.date_sequence">
    date_sequence()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.download_ee_video">
    download_ee_video()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.edit_download_html">
    edit_download_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_api_to_csv">
    ee_api_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_data_html">
    ee_data_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_data_thumbnail">
    ee_data_thumbnail()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_geojson">
    ee_export_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image">
    ee_export_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image_collection">
    ee_export_image_collection()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image_collection_to_drive">
    ee_export_image_collection_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_image_to_drive">
    ee_export_image_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_vector">
    ee_export_vector()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_export_vector_to_drive">
    ee_export_vector_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_function_tree">
    ee_function_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_initialize">
    ee_initialize()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_search">
    ee_search()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_tile_layer">
    ee_tile_layer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_csv">
    ee_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_geojson">
    ee_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_numpy">
    ee_to_numpy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_to_shp">
    ee_to_shp()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.ee_user_id">
    ee_user_id()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.file_browser">
    file_browser()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.filter_polygons">
    filter_polygons()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.geocode">
    geocode()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.geojson_to_ee">
    geojson_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.has_transparency">
    has_transparency()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.hex_to_rgb">
    hex_to_rgb()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.image_props">
    image_props()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.image_stats">
    image_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.in_colab_shell">
    in_colab_shell()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.install_from_github">
    install_from_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.is_drive_mounted">
    is_drive_mounted()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.is_latlon_valid">
    is_latlon_valid()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.is_tool">
    is_tool()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_timeseries">
    landsat_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_ts_gif">
    landsat_ts_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_ts_norm_diff">
    landsat_ts_norm_diff()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.landsat_ts_norm_diff_gif">
    landsat_ts_norm_diff_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.latlon_from_text">
    latlon_from_text()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.legend_from_ee">
    legend_from_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.load_GeoTIFF">
    load_GeoTIFF()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.load_GeoTIFFs">
    load_GeoTIFFs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.minimum_bounding_box">
    minimum_bounding_box()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.naip_timeseries">
    naip_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.open_github">
    open_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.open_image_from_url">
    open_image_from_url()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.open_youtube">
    open_youtube()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.read_api_csv">
    read_api_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.reduce_gif_size">
    reduce_gif_size()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.rgb_to_hex">
    rgb_to_hex()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.screen_capture">
    screen_capture()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.search_api_tree">
    search_api_tree()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.search_ee_data">
    search_ee_data()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.sentinel2_timeseries">
    sentinel2_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.set_proxy">
    set_proxy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.show_image">
    show_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.show_youtube">
    show_youtube()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.shp_to_ee">
    shp_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.shp_to_geojson">
    shp_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.system_fonts">
    system_fonts()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.update_package">
    update_package()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.upload_to_imgur">
    upload_to_imgur()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.zonal_statistics">
    zonal_statistics()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#geemap.geemap.zonal_statistics_by_group">
    zonal_statistics_by_group()
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/giswqs/geemap/edit/master/docs/geemap.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="geemap-module">geemap module</h1>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#geemap.geemap" id="geemap.geemap" style="visibility: hidden; position: absolute;">
</h2>
<div class="doc doc-contents first">
<p>Main module for interactive mapping using Google Earth Engine Python API and ipyleaflet.
Keep in mind that Earth Engine functions use both camel case and snake case, such as setOptions(), setCenter(), centerObject(), addLayer().
ipyleaflet functions use snake case, such as add_tile_layer(), add_wms_layer(), add_minimap().</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="geemap.geemap.Map">
<code>Map</code>
</h2>
<div class="doc doc-contents">
<p>The Map class inherits from ipyleaflet.Map. The arguments you can pass to the Map can be found at https://ipyleaflet.readthedocs.io/en/latest/api_reference/map.html. By default, the Map will add Google Maps as the basemap. Set add_google_map = False to use OpenStreetMap as the basemap.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ipyleaflet map object.</p>
</td>
</tr>
</tbody>
</table>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_basemap">
<code class="highlight language-python">
add_basemap<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a basemap to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>basemap</code></td>
<td><code>str</code></td>
<td>
<p>Can be one of string from ee_basemaps. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">):</span>
    <span class="sd">"""Adds a basemap to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        basemap (str, optional): Can be one of string from ee_basemaps. Defaults to 'HYBRID'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ee_basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Basemap can only be one of the following:</span><span class="se">\n</span><span class="s1">  </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">'</span><span class="se">\n</span><span class="s1">  '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ee_basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_ee_layer">
<code class="highlight language-python">
add_ee_layer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a given EE object to the map as a layer.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Collection|Feature|Image|MapId</code></td>
<td>
<p>The object to add to the map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>The visualization parameters. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer. Defaults to 'Layer N'.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Adds a given EE object to the map as a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to 'Layer N'.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer's opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">'Layer '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">layer_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">The image argument in 'addLayer' function must be an instace of one of ee.Image, ee.Geometry, ee.Feature or ee.FeatureCollection."</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="s1">'width'</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s1">'width'</span><span class="p">]</span>

        <span class="n">color</span> <span class="o">=</span> <span class="s1">'000000'</span>

        <span class="k">if</span> <span class="s1">'color'</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s1">'color'</span><span class="p">]</span>

        <span class="n">image_fill</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'fillColor'</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="n">image_outline</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'color'</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s1">'fillColor'</span><span class="p">:</span> <span class="s1">'00000000'</span><span class="p">,</span> <span class="s1">'width'</span><span class="p">:</span> <span class="n">width</span><span class="p">})</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">image_fill</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">image_outline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>

    <span class="n">map_id_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">getMapId</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">map_id_dict</span><span class="p">[</span><span class="s1">'tile_fetcher'</span><span class="p">]</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s1">'Google Earth Engine'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="kc">True</span>
        <span class="c1"># visible=shown</span>
    <span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">existing_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">'ee_object'</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'ee_object'</span><span class="p">:</span> <span class="n">ee_object</span><span class="p">,</span> <span class="s1">'ee_layer'</span><span class="p">:</span> <span class="n">tile_layer</span><span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_landsat_ts_gif">
<code class="highlight language-python">
add_landsat_ts_gif<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Timelapse'</span><span class="p">,</span> <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">])</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a Landsat timelapse to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>Layer name to show under the layer control. Defaults to 'Timelapse'.</p>
</td>
<td><code>'Timelapse'</code></td>
</tr>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>label</code></td>
<td><code>str</code></td>
<td>
<p>A label to shown on the GIF, such as place name. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 1984.</p>
</td>
<td><code>1984</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p>
</td>
<td><code>'06-10'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p>
</td>
<td><code>'09-20'</code></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</p>
</td>
<td><code>['NIR', 'Red', 'Green']</code></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td><code>int</code></td>
<td>
<p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p>
</td>
<td><code>768</code></td>
</tr>
<tr>
<td><code>frames_per_second</code></td>
<td><code>int</code></td>
<td>
<p>Animation speed. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>font_size</code></td>
<td><code>int</code></td>
<td>
<p>Font size of the animated text and label. Defaults to 30.</p>
</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>font_color</code></td>
<td><code>str</code></td>
<td>
<p>Font color of the animated text and label. Defaults to 'black'.</p>
</td>
<td><code>'white'</code></td>
</tr>
<tr>
<td><code>add_progress_bar</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add a progress bar at the bottom of the GIF. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>progress_bar_color</code></td>
<td><code>str</code></td>
<td>
<p>Color for the progress bar. Defaults to 'white'.</p>
</td>
<td><code>'white'</code></td>
</tr>
<tr>
<td><code>progress_bar_height</code></td>
<td><code>int</code></td>
<td>
<p>Height of the progress bar. Defaults to 5.</p>
</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>download</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to download the gif. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>apply_fmask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>nd_bands</code></td>
<td><code>list</code></td>
<td>
<p>A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).  </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>nd_threshold</code></td>
<td><code>float</code></td>
<td>
<p>The threshold for extacting pixels from the normalized difference band. </p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>nd_palette</code></td>
<td><code>str</code></td>
<td>
<p>The color palette to use for displaying the normalized difference band. </p>
</td>
<td><code>['black', 'blue']</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_landsat_ts_gif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">'Timelapse'</span><span class="p">,</span> <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">]):</span>
    <span class="sd">"""Adds a Landsat timelapse to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_name (str, optional): Layer name to show under the layer control. Defaults to 'Timelapse'.</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        label (str, optional): A label to shown on the GIF, such as place name. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</span>
<span class="sd">        bands (list, optional): Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>
<span class="sd">        font_size (int, optional): Font size of the animated text and label. Defaults to 30.</span>
<span class="sd">        font_color (str, optional): Font color of the animated text and label. Defaults to 'black'.</span>
<span class="sd">        add_progress_bar (bool, optional): Whether to add a progress bar at the bottom of the GIF. Defaults to True.</span>
<span class="sd">        progress_bar_color (str, optional): Color for the progress bar. Defaults to 'white'.</span>
<span class="sd">        progress_bar_height (int, optional): Height of the progress bar. Defaults to 5.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        download (bool, optional): Whether to download the gif. Defaults to False.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">        nd_bands (list, optional): A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).  </span>
<span class="sd">        nd_threshold (float, optional): The threshold for extacting pixels from the normalized difference band. </span>
<span class="sd">        nd_palette (str, optional): The color palette to use for displaying the normalized difference band. </span>

<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
                    <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                      <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                        <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided roi is invalid. It must be an ee.Geometry'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">geojson</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">adjust_longitude</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

        <span class="n">in_gif</span> <span class="o">=</span> <span class="n">landsat_ts_gif</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="n">roi</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="n">out_gif</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
                                <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="n">bands</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="n">vis_params</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="n">frames_per_second</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="n">apply_fmask</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="n">nd_bands</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="n">nd_threshold</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="n">nd_palette</span><span class="p">)</span>
        <span class="n">in_nd_gif</span> <span class="o">=</span> <span class="n">in_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">,</span> <span class="s1">'_nd.gif'</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Adding animated text to GIF ...'</span><span class="p">)</span>
        <span class="n">add_text_to_gif</span><span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">in_gif</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s1">'2%'</span><span class="p">,</span> <span class="s1">'2%'</span><span class="p">),</span> <span class="n">text_sequence</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
                        <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">add_text_to_gif</span><span class="p">(</span><span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s1">'2%'</span><span class="p">,</span> <span class="s1">'2%'</span><span class="p">),</span> <span class="n">text_sequence</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
                            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">add_text_to_gif</span><span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">in_gif</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s1">'2%'</span><span class="p">,</span> <span class="s1">'90%'</span><span class="p">),</span> <span class="n">text_sequence</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">)</span>
            <span class="c1"># if nd_bands is not None:</span>
            <span class="c1">#     add_text_to_gif(in_nd_gif, in_nd_gif, xy=('2%', '90%'), text_sequence=label,</span>
            <span class="c1">#                     font_size=font_size, font_color=font_color, duration=int(1000 / frames_per_second), add_progress_bar=add_progress_bar, progress_bar_color=progress_bar_color, progress_bar_height=progress_bar_height)</span>

        <span class="k">if</span> <span class="n">is_tool</span><span class="p">(</span><span class="s1">'ffmpeg'</span><span class="p">):</span>
            <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_nd_gif</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Adding GIF to the map ...'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="o">+</span><span class="s1">' ND'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The timelapse has been added to the map.'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">download</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                <span class="n">in_gif</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Click here to download the Landsat timelapse: "</span><span class="p">)</span>
            <span class="n">display</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">link2</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                    <span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Click here to download the Normalized Difference Index timelapse: "</span><span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">link2</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_layer_control">
<code class="highlight language-python">
add_layer_control<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds the layer control to the map.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds the layer control to the map.</span>
<span class="sd">    """</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_legend">
<code class="highlight language-python">
add_legend<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legend_title</span><span class="o">=</span><span class="s1">'Legend'</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a customized basemap to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>legend_title</code></td>
<td><code>str</code></td>
<td>
<p>Title of the legend. Defaults to 'Legend'.</p>
</td>
<td><code>'Legend'</code></td>
</tr>
<tr>
<td><code>legend_dict</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary containing legend items as keys and color as values. If provided, legend_keys and legend_colors will be ignored. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>legend_keys</code></td>
<td><code>list</code></td>
<td>
<p>A list of legend keys. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>legend_colors</code></td>
<td><code>list</code></td>
<td>
<p>A list of legend colors. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the legend. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>builtin_legend</code></td>
<td><code>str</code></td>
<td>
<p>Name of the builtin legend to add to the map. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legend_title</span><span class="o">=</span><span class="s1">'Legend'</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Adds a customized basemap to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        legend_title (str, optional): Title of the legend. Defaults to 'Legend'.</span>
<span class="sd">        legend_dict (dict, optional): A dictionary containing legend items as keys and color as values. If provided, legend_keys and legend_colors will be ignored. Defaults to None.</span>
<span class="sd">        legend_keys (list, optional): A list of legend keys. Defaults to None.</span>
<span class="sd">        legend_colors (list, optional): A list of legend colors. Defaults to None.</span>
<span class="sd">        position (str, optional): Position of the legend. Defaults to 'bottomright'.</span>
<span class="sd">        builtin_legend (str, optional): Name of the builtin legend to add to the map. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"geemap"</span><span class="p">,</span> <span class="s2">"geemap.py"</span><span class="p">))</span>
    <span class="n">legend_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data/template/legend.html'</span><span class="p">)</span>

    <span class="c1"># print(kwargs['min_height'])</span>

    <span class="k">if</span> <span class="s1">'min_width'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">min_wdith</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'min_width'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'max_width'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'max_width'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'min_height'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_height</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">min_height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'min_height'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'max_height'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'max_height'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'height'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">height</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'height'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'width'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'width'</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="s1">'300px'</span>
    <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="s1">'400px'</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">legend_template</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The legend template does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">legend_keys</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_keys</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The legend keys must be a list.'</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">legend_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'One'</span><span class="p">,</span> <span class="s1">'Two'</span><span class="p">,</span> <span class="s1">'Three'</span><span class="p">,</span> <span class="s1">'Four'</span><span class="p">,</span> <span class="s1">'ect'</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">legend_colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The legend colors must be a list.'</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'#'</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The legend colors must be a list of tuples.'</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'#8DD3C7'</span><span class="p">,</span> <span class="s1">'#FFFFB3'</span><span class="p">,</span>
                         <span class="s1">'#BEBADA'</span><span class="p">,</span> <span class="s1">'#FB8072'</span><span class="p">,</span> <span class="s1">'#80B1D3'</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_keys</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">legend_colors</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The legend keys and values must be the same length.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_builtin_legends</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># builtin_legend = builtin_legend.upper()</span>
        <span class="k">if</span> <span class="n">builtin_legend</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_builtin_legends</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The builtin legend must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_builtin_legends</span><span class="p">)))</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">builtin_legends</span><span class="p">[</span><span class="n">builtin_legend</span><span class="p">]</span>
            <span class="n">legend_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">legend_colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">legend_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">legend_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The legend dict must be a dictionary.'</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">legend_colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">legend_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">legend_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">legend_colors</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'topleft'</span><span class="p">,</span> <span class="s1">'topright'</span><span class="p">,</span>
                         <span class="s1">'bottomleft'</span><span class="p">,</span> <span class="s1">'bottomright'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The position must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_positions</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">footer</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">legend_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'Legend'</span><span class="p">,</span> <span class="n">legend_title</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">legend_keys</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">legend_colors</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'#'</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="s1">'#'</span> <span class="o">+</span> <span class="n">color</span>
        <span class="n">item</span> <span class="o">=</span> <span class="s2">"      &lt;li&gt;&lt;span style='background:</span><span class="si">{}</span><span class="s2">;'&gt;&lt;/span&gt;</span><span class="si">{}</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">color</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">legend_html</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">content</span> <span class="o">+</span> <span class="n">footer</span>
    <span class="n">legend_text</span> <span class="o">=</span> <span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">legend_html</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_widget</span>
            <span class="n">legend_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span><span class="p">)</span>

        <span class="n">legend_output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
            <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s1">'border'</span><span class="p">:</span> <span class="s1">'1px solid black'</span><span class="p">,</span> <span class="s1">'max_width'</span><span class="p">:</span> <span class="n">max_width</span><span class="p">,</span> <span class="s1">'min_width'</span><span class="p">:</span> <span class="n">min_width</span><span class="p">,</span> <span class="s1">'max_height'</span><span class="p">:</span> <span class="n">max_height</span><span class="p">,</span>
                    <span class="s1">'min_height'</span><span class="p">:</span> <span class="n">min_height</span><span class="p">,</span> <span class="s1">'height'</span><span class="p">:</span> <span class="n">height</span><span class="p">,</span> <span class="s1">'width'</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span> <span class="s1">'overflow'</span><span class="p">:</span> <span class="s1">'scroll'</span><span class="p">})</span>
        <span class="n">legend_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">legend_output_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="n">legend_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">legend_text</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">legend_output_widget</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">legend_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">legend_widget</span> <span class="o">=</span> <span class="n">legend_output_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_control</span> <span class="o">=</span> <span class="n">legend_control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">legend_control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_maker_cluster">
<code class="highlight language-python">
add_maker_cluster<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s1">'click'</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Captures user inputs and add markers to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td><code>str</code></td>
<td>
<p>[description]. Defaults to 'click'.</p>
</td>
<td><code>'click'</code></td>
</tr>
<tr>
<td><code>add_marker</code></td>
<td><code>bool</code></td>
<td>
<p>If True, add markers to the map. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>a marker cluster.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_maker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s1">'click'</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Captures user inputs and add markers to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        event (str, optional): [description]. Defaults to 'click'.</span>
<span class="sd">        add_marker (bool, optional): If True, add markers to the map. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: a marker cluster.</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Marker Cluster"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'coordinates'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s1">'click'</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'click'</span><span class="p">:</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'mousemove'</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cursor'</span><span class="p">:</span> <span class="s1">'crosshair'</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_minimap">
<code class="highlight language-python">
add_minimap<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a minimap (overview) to the ipyleaflet map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>Initial map zoom level. Defaults to 5.</p>
</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the minimap. Defaults to "bottomright".</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_minimap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"bottomright"</span><span class="p">):</span>
    <span class="sd">"""Adds a minimap (overview) to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (int, optional): Initial map zoom level. Defaults to 5.</span>
<span class="sd">        position (str, optional): Position of the minimap. Defaults to "bottomright".</span>
<span class="sd">    """</span>
    <span class="n">minimap</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span>
        <span class="n">zoom_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">attribution_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="n">ee_basemaps</span><span class="p">[</span><span class="s1">'ROADMAP'</span><span class="p">]]</span>
    <span class="p">)</span>
    <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">'150px'</span>
    <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s1">'150px'</span>
    <span class="n">link</span><span class="p">((</span><span class="n">minimap</span><span class="p">,</span> <span class="s1">'center'</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'center'</span><span class="p">))</span>
    <span class="n">minimap_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">minimap</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">minimap_control</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_raster">
<code class="highlight language-python">
add_raster<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="s1">'x'</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="s1">'y'</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a local raster dataset to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>image</code></td>
<td><code>str</code></td>
<td>
<p>The image file path.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>int or list</code></td>
<td>
<p>The image bands to use. It can be either a nubmer (e.g., 1) or a list (e.g., [3, 2, 1]). Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>layer_name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the raster. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>colormap</code></td>
<td><code>str</code></td>
<td>
<p>The name of the colormap to use for the raster, such as 'gray' and 'terrain'. More can be found at https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>x_dim</code></td>
<td><code>str</code></td>
<td>
<p>The x dimension. Defaults to 'x'.</p>
</td>
<td><code>'x'</code></td>
</tr>
<tr>
<td><code>y_dim</code></td>
<td><code>str</code></td>
<td>
<p>The y dimension. Defaults to 'y'.</p>
</td>
<td><code>'y'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="s1">'x'</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="s1">'y'</span><span class="p">):</span>
    <span class="sd">"""Adds a local raster dataset to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str): The image file path.</span>
<span class="sd">        bands (int or list, optional): The image bands to use. It can be either a nubmer (e.g., 1) or a list (e.g., [3, 2, 1]). Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use for the raster. Defaults to None.</span>
<span class="sd">        colormap (str, optional): The name of the colormap to use for the raster, such as 'gray' and 'terrain'. More can be found at https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html. Defaults to None.</span>
<span class="sd">        x_dim (str, optional): The x dimension. Defaults to 'x'.</span>
<span class="sd">        y_dim (str, optional): The y dimension. Defaults to 'y'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray_leaflet</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="c1"># import platform</span>
        <span class="c1"># if platform.system() != "Windows":</span>
        <span class="c1">#     # install_from_github(</span>
        <span class="c1">#     #     url='https://github.com/davidbrochart/xarray_leaflet')</span>
        <span class="c1">#     check_install('xarray_leaflet')</span>
        <span class="c1">#     import xarray_leaflet</span>
        <span class="c1"># else:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'You need to install xarray_leaflet first. See https://github.com/davidbrochart/xarray_leaflet'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'Try the following to install xarray_leaflet: </span><span class="se">\n\n</span><span class="s1">conda install -c conda-forge xarray_leaflet'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">rioxarray</span>
    <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The image file does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">inferno</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_name</span> <span class="o">=</span> <span class="s1">'Layer_'</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colormap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>

    <span class="n">da</span> <span class="o">=</span> <span class="n">rioxarray</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># print(da.rio.nodata)</span>

    <span class="n">multi_band</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">da</span><span class="o">.</span><span class="n">band</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">multi_band</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bands</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">multi_band</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_nodata</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_nodata</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="n">bands</span><span class="p">)</span>

    <span class="c1"># crs = da.rio.crs</span>
    <span class="c1"># nan = da.attrs['nodatavals'][0]</span>
    <span class="c1"># da = da / da.max()</span>
    <span class="c1"># # if multi_band:</span>
    <span class="c1"># da = xr.where(da == nan, np.nan, da)</span>
    <span class="c1"># da = da.rio.write_nodata(0)</span>
    <span class="c1"># da = da.rio.write_crs(crs)</span>

    <span class="k">if</span> <span class="n">multi_band</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">leaflet</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="n">x_dim</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">y_dim</span><span class="p">,</span> <span class="n">rgb_dim</span><span class="o">=</span><span class="s1">'band'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">leaflet</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">x_dim</span><span class="o">=</span><span class="n">x_dim</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="n">y_dim</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>

    <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">layer_name</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_tile_layer">
<code class="highlight language-python">
add_tile_layer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">'https://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a TileLayer to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the tile layer. Defaults to 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'.</p>
</td>
<td><code>'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use for the layer. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution to use. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">'https://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Adds a TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): The URL of the tile layer. Defaults to 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to ''.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="kc">True</span>
            <span class="c1"># visible=shown</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Failed to add the specified TileLayer."</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.add_wms_layer">
<code class="highlight language-python">
add_wms_layer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'image/jpeg'</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Add a WMS layer to the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the WMS web service.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>layers</code></td>
<td><code>str</code></td>
<td>
<p>Comma-separated list of WMS layers to show. </p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The layer name to use on the layer control. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>attribution</code></td>
<td><code>str</code></td>
<td>
<p>The attribution of the data layer. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>format</code></td>
<td><code>str</code></td>
<td>
<p>WMS image format (use image/png for layers with transparency). Defaults to 'image/jpeg'.</p>
</td>
<td><code>'image/jpeg'</code></td>
</tr>
<tr>
<td><code>transparent</code></td>
<td><code>bool</code></td>
<td>
<p>If True, the WMS service will return images with transparency. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The opacity of the layer. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'image/jpeg'</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Add a WMS layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the WMS web service.</span>
<span class="sd">        layers (str): Comma-separated list of WMS layers to show. </span>
<span class="sd">        name (str, optional): The layer name to use on the layer control. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution of the data layer. Defaults to ''.</span>
<span class="sd">        format (str, optional): WMS image format (use image/png for layers with transparency). Defaults to 'image/jpeg'.</span>
<span class="sd">        transparent (bool, optional): If True, the WMS service will return images with transparency. Defaults to False.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">wms_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WMSLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">transparent</span><span class="o">=</span><span class="n">transparent</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="kc">True</span>
            <span class="c1"># visible=shown</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">wms_layer</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Failed to add the specified WMS TileLayer."</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.addLayer">
<code class="highlight language-python">
addLayer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a given EE object to the map as a layer.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Collection|Feature|Image|MapId</code></td>
<td>
<p>The object to add to the map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>The visualization parameters. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer. Defaults to 'Layer N'.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Adds a given EE object to the map as a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to 'Layer N'.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer's opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">'Layer '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">layer_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">The image argument in 'addLayer' function must be an instace of one of ee.Image, ee.Geometry, ee.Feature or ee.FeatureCollection."</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="s1">'width'</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s1">'width'</span><span class="p">]</span>

        <span class="n">color</span> <span class="o">=</span> <span class="s1">'000000'</span>

        <span class="k">if</span> <span class="s1">'color'</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s1">'color'</span><span class="p">]</span>

        <span class="n">image_fill</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'fillColor'</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="n">image_outline</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'color'</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s1">'fillColor'</span><span class="p">:</span> <span class="s1">'00000000'</span><span class="p">,</span> <span class="s1">'width'</span><span class="p">:</span> <span class="n">width</span><span class="p">})</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">image_fill</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">image_outline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>

    <span class="n">map_id_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">getMapId</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">map_id_dict</span><span class="p">[</span><span class="s1">'tile_fetcher'</span><span class="p">]</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s1">'Google Earth Engine'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="kc">True</span>
        <span class="c1"># visible=shown</span>
    <span class="p">)</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">existing_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">'ee_object'</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">existing_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">existing_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'ee_object'</span><span class="p">:</span> <span class="n">ee_object</span><span class="p">,</span> <span class="s1">'ee_layer'</span><span class="p">:</span> <span class="n">tile_layer</span><span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layer_names</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.addLayerControl">
<code class="highlight language-python">
addLayerControl<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds the layer control to the map.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds the layer control to the map.</span>
<span class="sd">    """</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.basemap_demo">
<code class="highlight language-python">
basemap_demo<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>A demo for using geemap basemaps.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">basemap_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""A demo for using geemap basemaps.</span>

<span class="sd">    """</span>
    <span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">ee_basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
        <span class="n">value</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">'Basemaps'</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">basemap_name</span> <span class="o">=</span> <span class="n">change</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]</span>
        <span class="n">old_basemap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">substitute_layer</span><span class="p">(</span><span class="n">old_basemap</span><span class="p">,</span> <span class="n">ee_basemaps</span><span class="p">[</span><span class="n">basemap_name</span><span class="p">])</span>

    <span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_click</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">)</span>
    <span class="n">basemap_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'topright'</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inspector_control</span><span class="p">)</span>
    <span class="c1"># self.remove_control(self.layer_control)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">basemap_control</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.center_object">
<code class="highlight language-python">
center_object<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Centers the map view on a given object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Element|Geometry</code></td>
<td>
<p>An Earth Engine object to center on - a geometry, image or feature.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view on a given object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Element|Geometry): An Earth Engine object to center on - a geometry, image or feature.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">()</span>
        <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

    <span class="n">lat</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.centerObject">
<code class="highlight language-python">
centerObject<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Centers the map view on a given object.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Element|Geometry</code></td>
<td>
<p>An Earth Engine object to center on - a geometry, image or feature.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view on a given object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Element|Geometry): An Earth Engine object to center on - a geometry, image or feature.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">):</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">centroid</span><span class="p">()</span>
        <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">centroid</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">],</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

    <span class="n">lat</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.extract_values_to_points">
<code class="highlight language-python">
extract_values_to_points<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Exports pixel values to a csv file based on user-drawn geometries.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the csv file or shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">extract_values_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">"""Exports pixel values to a csv file based on user-drawn geometries.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The output file path to the csv file or shapefile.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">csv</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>

    <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">out_csv</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'csv'</span>
    <span class="n">out_shp</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'shp'</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span><span class="p">)</span>
    <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'longitude'</span><span class="p">,</span> <span class="s1">'latitude'</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_labels</span>
        <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">out_list</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s1">'csv'</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The csv file has been saved to: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_csv</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">csv_to_shp</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The shapefile has been saved to: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_shp</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.find_layer">
<code class="highlight language-python">
find_layer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Finds layer by name</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>Name of the layer to find.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ipyleaflet layer object.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Finds layer by name</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Name of the layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ipyleaflet layer object.</span>
<span class="sd">    """</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.get_scale">
<code class="highlight language-python">
get_scale<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Returns the approximate pixel scale of the current map view, in meters.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>Map resolution in meters.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Map resolution in meters.</span>
<span class="sd">    """</span>
    <span class="n">zoom_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span>
    <span class="c1"># Reference: https://blogs.bing.com/maps/2006/02/25/map-control-zoom-levels-gt-resolution</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="mf">156543.04</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">zoom_level</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resolution</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.getScale">
<code class="highlight language-python">
getScale<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Returns the approximate pixel scale of the current map view, in meters.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>Map resolution in meters.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Map resolution in meters.</span>
<span class="sd">    """</span>
    <span class="n">zoom_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span>
    <span class="c1"># Reference: https://blogs.bing.com/maps/2006/02/25/map-control-zoom-levels-gt-resolution</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="mf">156543.04</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">zoom_level</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resolution</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.image_overlay">
<code class="highlight language-python">
image_overlay<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Overlays an image from the Internet or locally on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>http URL or local file path to the image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bounds</code></td>
<td><code>tuple</code></td>
<td>
<p>bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>name of the layer to show on the layer control.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Overlays an image from the Internet or locally on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL or local file path to the image.</span>
<span class="sd">        bounds (tuple): bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): name of the layer to show on the layer control.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageSequence</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'http'</span><span class="p">):</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided file does not exist.'</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># file extension</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="n">f</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'gif'</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="c1"># Loop over each frame in the animated image</span>
                <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">'RGBA'</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">"gif"</span><span class="p">)</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
                <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'GIF'</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                               <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'ascii'</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">'data:image/</span><span class="si">{}</span><span class="s1">;base64,'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ImageOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.layer_opacity">
<code class="highlight language-python">
layer_opacity<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Changes layer opacity.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer to change opacity.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>float</code></td>
<td>
<p>The opacity value to set. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Changes layer opacity.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer to change opacity.</span>
<span class="sd">        value (float, optional): The opacity value to set. Defaults to 1.0.</span>
<span class="sd">    """</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># layer.interact(opacity=(0, 1, 0.1))  # to change layer opacity interactively</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.marker_cluster">
<code class="highlight language-python">
marker_cluster<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>a list of ee.Feature</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: a list of ee.Feature</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Marker Cluster"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'coordinates'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'click'</span><span class="p">:</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">feature</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
            <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'mousemove'</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cursor'</span><span class="p">:</span> <span class="s1">'crosshair'</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.plot">
<code class="highlight language-python">
plot<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Creates a plot based on x-array and y-array data.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x</code></td>
<td><code>numpy.ndarray or list</code></td>
<td>
<p>The x-coordinates of the plotted line.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>y</code></td>
<td><code>numpy.ndarray or list</code></td>
<td>
<p>The y-coordinates of the plotted line.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.            </p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Creates a plot based on x-array and y-array data.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (numpy.ndarray or list): The x-coordinates of the plotted line.</span>
<span class="sd">        y (numpy.ndarray or list): The y-coordinates of the plotted line.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.            </span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plot_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s1">'border'</span><span class="p">:</span> <span class="s1">'1px solid black'</span><span class="p">})</span>
        <span class="n">plot_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                                     <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">300</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'markers'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'markers'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'circle'</span>

    <span class="k">with</span> <span class="n">plot_widget</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_width</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'px'</span>
            <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_height</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'px'</span>

            <span class="n">plot_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">overlay</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">'marker'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s1">'marker'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'circle'</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s1">'bar'</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s1">'scatter'</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s1">'hist'</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Failed to create plot."</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.plot_demo">
<code class="highlight language-python">
plot_demo<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>A demo of interactive plotting using random pixel coordinates.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>iterations</code></td>
<td><code>int</code></td>
<td>
<p>How many iterations to run for the demo. Defaults to 20.</p>
</td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.    </p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""A demo of interactive plotting using random pixel coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        iterations (int, optional): How many iterations to run for the demo. Defaults to 20.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.    </span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s1">'LE7_TOA_5YEAR/1999_2003'</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span> <span class="p">{</span><span class="s1">'bands'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B2'</span><span class="p">],</span> <span class="s1">'gamma'</span><span class="p">:</span> <span class="mf">1.4</span><span class="p">},</span> <span class="s2">"LE7_TOA_5YEAR/1999_2003"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="o">-</span><span class="mf">50.078877</span><span class="p">,</span> <span class="mf">25.190030</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">band_names</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">band_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">band_names</span><span class="p">)</span>

    <span class="n">latitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>
    <span class="n">longitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">121</span><span class="p">,</span> <span class="o">-</span><span class="mi">76</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>

    <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="o">=</span> <span class="n">marker</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">coordinate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">([</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
            <span class="n">dict_values</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span>
                <span class="n">coordinate</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">'</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">: Spectral signature at (</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">iterations</span><span class="p">,</span>
                                                                   <span class="nb">round</span><span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">marker</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band_names</span><span class="p">,</span> <span class="n">band_values</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                      <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.plot_raster">
<code class="highlight language-python">
plot_raster<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Interactive plotting of Earth Engine data by clicking on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The ee.Image or ee.ImageCollection to sample. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>sample_scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to sample in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.    </p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">plot_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Interactive plotting of Earth Engine data by clicking on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object, optional): The ee.Image or ee.ImageCollection to sample. Defaults to None.</span>
<span class="sd">        sample_scale (float, optional): A nominal scale in meters of the projection to sample in. Defaults to None.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.    </span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

    <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s1">'border'</span><span class="p">:</span> <span class="s1">'1px solid black'</span><span class="p">})</span>
    <span class="n">plot_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                                 <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cursor'</span><span class="p">:</span> <span class="s1">'crosshair'</span><span class="p">}</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">"The plot function can only be used on ee.Image or ee.ImageCollection with more than one band."</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ee_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">sample_scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sample_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>

    <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Marker Cluster"</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs2</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'coordinates'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'click'</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cursor'</span><span class="p">:</span> <span class="s1">'wait'</span><span class="p">}</span>
                <span class="n">xy</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">dict_values</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span>
                    <span class="n">xy</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">sample_scale</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">band_names</span><span class="p">,</span> <span class="n">band_values</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                          <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cursor'</span><span class="p">:</span> <span class="s1">'crosshair'</span><span class="p">}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">plot_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">"No data for the clicked location."</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cursor'</span><span class="p">:</span> <span class="s1">'crosshair'</span><span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.remove_drawn_features">
<code class="highlight language-python">
remove_drawn_features<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Removes user-drawn geometries from the map</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">remove_drawn_features</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Removes user-drawn geometries from the map</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_features</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_layer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_json</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_bounds</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_rois</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart_points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart_labels</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_center">
<code class="highlight language-python">
set_center<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Centers the map view at a given coordinates with the given zoom level.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lon</code></td>
<td><code>float</code></td>
<td>
<p>The longitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>lat</code></td>
<td><code>float</code></td>
<td>
<p>The latitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center, in degrees.</span>
<span class="sd">        lat (float): The latitude of the center, in degrees.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">zoom</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_control_visibility">
<code class="highlight language-python">
set_control_visibility<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Sets the visibility of the controls on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layerControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>fullscreenControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to make the map full-screen. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>latLngPopup</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Sets the visibility of the controls on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">        fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">        latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_options">
<code class="highlight language-python">
set_options<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds Google basemap and controls to the ipyleaflet map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mapTypeId</code></td>
<td><code>str</code></td>
<td>
<p>A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
<tr>
<td><code>styles</code></td>
<td><code>object</code></td>
<td>
<p>A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>types</code></td>
<td><code>list</code></td>
<td>
<p>A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</span>
<span class="sd">        styles (object, optional): A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</span>
<span class="sd">        types (list, optional): A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_layers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scroll_wheel_zoom</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'topleft'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'topright'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'bottomleft'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">FullScreenControl</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">DrawControl</span><span class="p">())</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="n">MeasureControl</span><span class="p">(</span>
        <span class="n">position</span><span class="o">=</span><span class="s1">'bottomleft'</span><span class="p">,</span>
        <span class="n">active_color</span><span class="o">=</span><span class="s1">'orange'</span><span class="p">,</span>
        <span class="n">primary_length_unit</span><span class="o">=</span><span class="s1">'kilometers'</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ee_basemaps</span><span class="p">[</span><span class="n">mapTypeId</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'Google basemaps can only be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN".'</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.set_plot_options">
<code class="highlight language-python">
set_plot_options<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_marker_cluster</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Sets plotting options.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>add_marker_cluster</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add a marker cluster. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>sample_scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to sample in . Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>plot_type</code></td>
<td><code>str</code></td>
<td>
<p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>overlay</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to overlay plotted lines on the figure. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>str</code></td>
<td>
<p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p>
</td>
<td><code>'bottomright'</code></td>
</tr>
<tr>
<td><code>min_width</code></td>
<td><code>int</code></td>
<td>
<p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_width</code></td>
<td><code>int</code></td>
<td>
<p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>min_height</code></td>
<td><code>int</code></td>
<td>
<p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_height</code></td>
<td><code>int</code></td>
<td>
<p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_marker_cluster</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'bottomright'</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Sets plotting options.</span>

<span class="sd">    Args:</span>
<span class="sd">        add_marker_cluster (bool, optional): Whether to add a marker cluster. Defaults to False.</span>
<span class="sd">        sample_scale (float, optional):  A nominal scale in meters of the projection to sample in . Defaults to None.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="n">plot_options_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'add_marker_cluster'</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_marker_cluster</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'sample_scale'</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_scale</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'plot_type'</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot_type</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'overlay'</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlay</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'position'</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'min_width'</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_width</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'max_width'</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_width</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'min_height'</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_height</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s1">'max_height'</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">plot_options</span> <span class="o">=</span> <span class="n">plot_options_dict</span>

    <span class="k">if</span> <span class="n">add_marker_cluster</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_marker_cluster</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_marker_cluster</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.setCenter">
<code class="highlight language-python">
setCenter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Centers the map view at a given coordinates with the given zoom level.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lon</code></td>
<td><code>float</code></td>
<td>
<p>The longitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>lat</code></td>
<td><code>float</code></td>
<td>
<p>The latitude of the center, in degrees.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>zoom</code></td>
<td><code>int</code></td>
<td>
<p>The zoom level, from 1 to 24. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center, in degrees.</span>
<span class="sd">        lat (float): The latitude of the center, in degrees.</span>
<span class="sd">        zoom (int, optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">zoom</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.setControlVisibility">
<code class="highlight language-python">
setControlVisibility<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Sets the visibility of the controls on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layerControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>fullscreenControl</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that allows the user to make the map full-screen. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>latLngPopup</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Sets the visibility of the controls on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">        fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">        latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">pass</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.setOptions">
<code class="highlight language-python">
setOptions<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds Google basemap and controls to the ipyleaflet map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mapTypeId</code></td>
<td><code>str</code></td>
<td>
<p>A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
<tr>
<td><code>styles</code></td>
<td><code>object</code></td>
<td>
<p>A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>types</code></td>
<td><code>list</code></td>
<td>
<p>A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">styles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select one of the standard Google Maps API map types. Defaults to 'HYBRID'.</span>
<span class="sd">        styles (object, optional): A dictionary of custom MapTypeStyle objects keyed with a name that will appear in the map's Map Type Controls. Defaults to None.</span>
<span class="sd">        types (list, optional): A list of mapTypeIds to make available. If omitted, but opt_styles is specified, appends all of the style keys to the standard Google Maps API map types.. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_layers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scroll_wheel_zoom</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'topleft'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'topright'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'bottomleft'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">FullScreenControl</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">DrawControl</span><span class="p">())</span>

    <span class="n">measure</span> <span class="o">=</span> <span class="n">MeasureControl</span><span class="p">(</span>
        <span class="n">position</span><span class="o">=</span><span class="s1">'bottomleft'</span><span class="p">,</span>
        <span class="n">active_color</span><span class="o">=</span><span class="s1">'orange'</span><span class="p">,</span>
        <span class="n">primary_length_unit</span><span class="o">=</span><span class="s1">'kilometers'</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ee_basemaps</span><span class="p">[</span><span class="n">mapTypeId</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'Google basemaps can only be one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN".'</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.split_map">
<code class="highlight language-python">
split_map<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_layer</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="s1">'ESRI'</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Adds split map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>left_layer</code></td>
<td><code>str</code></td>
<td>
<p>The layer tile layer. Defaults to 'HYBRID'.</p>
</td>
<td><code>'HYBRID'</code></td>
</tr>
<tr>
<td><code>right_layer</code></td>
<td><code>str</code></td>
<td>
<p>The right tile layer. Defaults to 'ESRI'.</p>
</td>
<td><code>'ESRI'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">split_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_layer</span><span class="o">=</span><span class="s1">'HYBRID'</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="s1">'ESRI'</span><span class="p">):</span>
    <span class="sd">"""Adds split map.</span>

<span class="sd">    Args:</span>
<span class="sd">        left_layer (str, optional): The layer tile layer. Defaults to 'HYBRID'.</span>
<span class="sd">        right_layer (str, optional): The right tile layer. Defaults to 'ESRI'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inspector_control</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">left_layer</span> <span class="ow">in</span> <span class="n">ee_basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ee_basemaps</span><span class="p">[</span><span class="n">left_layer</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">right_layer</span> <span class="ow">in</span> <span class="n">ee_basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ee_basemaps</span><span class="p">[</span><span class="n">right_layer</span><span class="p">]</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
            <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided layers are invalid!'</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.to_html">
<code class="highlight language-python">
to_html<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'My Map'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">'100%'</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">'880px'</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Saves the map as a HTML file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>outfile</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the HTML file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>str</code></td>
<td>
<p>The title of the HTML file. Defaults to 'My Map'.</p>
</td>
<td><code>'My Map'</code></td>
</tr>
<tr>
<td><code>width</code></td>
<td><code>str</code></td>
<td>
<p>The width of the map in pixels or percentage. Defaults to '100%'.</p>
</td>
<td><code>'100%'</code></td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>str</code></td>
<td>
<p>The height of the map in pixels. Defaults to '880px'.</p>
</td>
<td><code>'880px'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'My Map'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">'100%'</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">'880px'</span><span class="p">):</span>
    <span class="sd">"""Saves the map as a HTML file.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str): The output file path to the HTML file.</span>
<span class="sd">        title (str, optional): The title of the HTML file. Defaults to 'My Map'.</span>
<span class="sd">        width (str, optional): The width of the map in pixels or percentage. Defaults to '100%'.</span>
<span class="sd">        height (str, optional): The height of the map in pixels. Defaults to '880px'.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.html'</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must end with .html'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

        <span class="n">before_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span>
        <span class="n">before_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"width must be a string."</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'px'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'%'</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'width must end with px or %'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"height must be a string."</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'px'</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'height must end with px'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">before_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">before_height</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.to_image">
<code class="highlight language-python">
to_image<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Saves the map as a PNG or JPG image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>outfile</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the image. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>monitor</code></td>
<td><code>int</code></td>
<td>
<p>The monitor to take the screenshot. Defaults to 1.</p>
</td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">"""Saves the map as a PNG or JPG image.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str, optional): The output file path to the image. Defaults to None.</span>
<span class="sd">        monitor (int, optional): The monitor to take the screenshot. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s1">'my_map.png'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.png'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.jpg'</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must be a PNG or JPG image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">work_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

    <span class="n">screenshot</span> <span class="o">=</span> <span class="n">screen_capture</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">monitor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span> <span class="o">=</span> <span class="n">screenshot</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.toolbar_reset">
<code class="highlight language-python">
toolbar_reset<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Reset the toolbar so that no tool is selected.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">toolbar_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Reset the toolbar so that no tool is selected.</span>
<span class="sd">    """</span>
    <span class="n">toolbar_grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span>
    <span class="k">for</span> <span class="n">tool</span> <span class="ow">in</span> <span class="n">toolbar_grid</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">tool</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.ts_inspector">
<code class="highlight language-python">
ts_inspector<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_ts</span><span class="p">,</span> <span class="n">right_ts</span><span class="p">,</span> <span class="n">left_names</span><span class="p">,</span> <span class="n">right_names</span><span class="p">,</span> <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span> <span class="n">right_vis</span><span class="o">=</span><span class="p">{})</span> </code>
</h3>
<div class="doc doc-contents">
<p>Creates a split-panel map for inspecting timeseries images.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>left_ts</code></td>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection to show on the left panel.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>right_ts</code></td>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection to show on the right panel.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>left_names</code></td>
<td><code>list</code></td>
<td>
<p>A list of names to show under the left dropdown.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>right_names</code></td>
<td><code>list</code></td>
<td>
<p>A list of names to show under the right dropdown.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>left_vis</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters for the left layer. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>right_vis</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters for the right layer. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ts_inspector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_ts</span><span class="p">,</span> <span class="n">right_ts</span><span class="p">,</span> <span class="n">left_names</span><span class="p">,</span> <span class="n">right_names</span><span class="p">,</span> <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span> <span class="n">right_vis</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">"""Creates a split-panel map for inspecting timeseries images.</span>

<span class="sd">    Args:</span>
<span class="sd">        left_ts (object): An ee.ImageCollection to show on the left panel.</span>
<span class="sd">        right_ts (object): An ee.ImageCollection to show on the right panel.</span>
<span class="sd">        left_names (list): A list of names to show under the left dropdown.</span>
<span class="sd">        right_names (list): A list of names to show under the right dropdown.</span>
<span class="sd">        left_vis (dict, optional): Visualization parameters for the left layer. Defaults to {}.</span>
<span class="sd">        right_vis (dict, optional): Visualization parameters for the right layer. Defaults to {}.</span>
<span class="sd">    """</span>
    <span class="n">left_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
    <span class="n">right_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">right_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">left_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">left_names</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The number of images in left_ts must match the number of layer names in left_names.'</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">right_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">right_names</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The number of images in right_ts must match the number of layer names in right_names.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">left_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="s1">'https://mt1.google.com/vt/lyrs=m&amp;x=</span><span class="si">{x}</span><span class="s1">&amp;y=</span><span class="si">{y}</span><span class="s1">&amp;z=</span><span class="si">{z}</span><span class="s1">'</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s1">'Google'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'Google Maps'</span>
    <span class="p">)</span>
    <span class="n">right_layer</span> <span class="o">=</span> <span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="s1">'https://mt1.google.com/vt/lyrs=m&amp;x=</span><span class="si">{x}</span><span class="s1">&amp;y=</span><span class="si">{y}</span><span class="s1">&amp;z=</span><span class="si">{z}</span><span class="s1">'</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s1">'Google'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">'Google Maps'</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="n">left_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">left_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">right_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">right_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s1">'130px'</span>
    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s1">'130px'</span>

    <span class="n">left_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">left_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'topleft'</span><span class="p">)</span>
    <span class="n">right_control</span> <span class="o">=</span> <span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">right_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'topright'</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="n">left_control</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="n">right_control</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'topleft'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">'bottomleft'</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">FullScreenControl</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">left_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">left_dropdown_index</span> <span class="o">=</span> <span class="n">left_dropdown</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="n">left_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">left_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span>
                        <span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">left_dropdown_index</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">left_dropdown_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">'The left_ts argument must be an ImageCollection.'</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="p">)</span>

                <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee_tile_layer</span><span class="p">(</span>
                    <span class="n">left_image</span><span class="p">,</span> <span class="n">left_vis</span><span class="p">,</span> <span class="n">left_names</span><span class="p">[</span><span class="n">left_dropdown_index</span><span class="p">])</span>
                <span class="n">left_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">left_image</span><span class="o">.</span><span class="n">url</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">left_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s1">'value'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">right_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">right_dropdown_index</span> <span class="o">=</span> <span class="n">right_dropdown</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="n">right_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">right_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span>
                        <span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">right_dropdown_index</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">right_dropdown_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">'The left_ts argument must be an ImageCollection.'</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="p">)</span>

                <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee_tile_layer</span><span class="p">(</span>
                    <span class="n">right_image</span><span class="p">,</span> <span class="n">right_vis</span><span class="p">,</span> <span class="n">right_names</span><span class="p">[</span><span class="n">right_dropdown_index</span><span class="p">])</span>
                <span class="n">right_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">right_image</span><span class="o">.</span><span class="n">url</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">right_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s1">'value'</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">split_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
            <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">split_control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="geemap.geemap.Map.video_overlay">
<code class="highlight language-python">
video_overlay<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> </code>
</h3>
<div class="doc doc-contents">
<p>Overlays a video from the Internet on the map.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>http URL of the video, such as "https://www.mapbox.com/bites/00188/patricia_nasa.webm"</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bounds</code></td>
<td><code>tuple</code></td>
<td>
<p>bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>name of the layer to show on the layer control.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">video_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Overlays a video from the Internet on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL of the video, such as "https://www.mapbox.com/bites/00188/patricia_nasa.webm"</span>
<span class="sd">        bounds (tuple): bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): name of the layer to show on the layer control.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">video</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">VideoOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.add_image_to_gif">
<code class="highlight language-python">
add_image_to_gif<span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">in_image</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image_size</span><span class="o">=</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="n">circle_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Adds an image logo to a GIF image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_gif</code></td>
<td><code>str</code></td>
<td>
<p>Input file path to the GIF image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>Output file path to the GIF image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_image</code></td>
<td><code>str</code></td>
<td>
<p>Input file path to the image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>xy</code></td>
<td><code>tuple</code></td>
<td>
<p>Top left corner of the text. It can be formatted like this: (10, 10) or ('15%', '25%'). Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>image_size</code></td>
<td><code>tuple</code></td>
<td>
<p>Resize image. Defaults to (80, 80).</p>
</td>
<td><code>(80, 80)</code></td>
</tr>
<tr>
<td><code>circle_mask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply a circle mask to the image. This only works with non-png images. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_image_to_gif</span><span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">in_image</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">image_size</span><span class="o">=</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="n">circle_mask</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Adds an image logo to a GIF image.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_gif (str): Input file path to the GIF image.</span>
<span class="sd">        out_gif (str): Output file path to the GIF image.</span>
<span class="sd">        in_image (str): Input file path to the image.</span>
<span class="sd">        xy (tuple, optional): Top left corner of the text. It can be formatted like this: (10, 10) or ('15%', '25%'). Defaults to None.</span>
<span class="sd">        image_size (tuple, optional): Resize image. Defaults to (80, 80).</span>
<span class="sd">        circle_mask (bool, optional): Whether to apply a circle mask to the image. This only works with non-png images. Defaults to False.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">io</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageSequence</span><span class="p">,</span> <span class="n">ImageFilter</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

    <span class="n">in_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>

    <span class="n">is_url</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">in_image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'http'</span><span class="p">):</span>
        <span class="n">is_url</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_gif</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input gif file does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">is_url</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_image</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided logo file does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while opening the image.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">in_image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'http'</span><span class="p">):</span>
            <span class="n">logo_raw_image</span> <span class="o">=</span> <span class="n">open_image_from_url</span><span class="p">(</span><span class="n">in_image</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">in_image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_image</span><span class="p">)</span>
            <span class="n">logo_raw_image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">in_image</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="n">logo_raw_size</span> <span class="o">=</span> <span class="n">logo_raw_image</span><span class="o">.</span><span class="n">size</span>
    <span class="n">image_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">logo_raw_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">image_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span>
        <span class="n">logo_raw_size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">image_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">logo_image</span> <span class="o">=</span> <span class="n">logo_raw_image</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">'RGBA'</span><span class="p">)</span>
    <span class="n">logo_image</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">(</span><span class="n">image_size</span><span class="p">,</span> <span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>

    <span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">size</span>
    <span class="n">mask_im</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">circle_mask</span><span class="p">:</span>
        <span class="n">mask_im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"L"</span><span class="p">,</span> <span class="n">image_size</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">mask_im</span><span class="p">)</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">ellipse</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">image_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">image_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">fill</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">has_transparency</span><span class="p">(</span><span class="n">logo_raw_image</span><span class="p">):</span>
        <span class="n">mask_im</span> <span class="o">=</span> <span class="n">logo_image</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">xy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># default logo location is 5% width and 5% height of the image.</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">W</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">H</span><span class="p">))</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">xy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"xy must be a tuple, e.g., (10, 10), ('10%', '10%')"</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">xy</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">W</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">H</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'xy is out of bounds. x must be within [0, </span><span class="si">{}</span><span class="s1">], and y must be within [0, </span><span class="si">{}</span><span class="s1">]'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">H</span><span class="p">))</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">xy</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">'%'</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'%'</span> <span class="ow">in</span> <span class="n">y</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'%'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">W</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'%'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">H</span><span class="p">)</span>
                <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">"The specified xy is invalid. It must be formatted like this ('10%', '10%')"</span><span class="p">)</span>
                <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The specified xy is invalid. It must be formatted like this: (10, 10) or ('10%', '10%')"</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">frame</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">)):</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">'RGBA'</span><span class="p">)</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">logo_image</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span> <span class="n">mask_im</span><span class="p">)</span>

            <span class="n">b</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">"GIF"</span><span class="p">)</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

        <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">out_gif</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.add_text_to_gif">
<code class="highlight language-python">
add_text_to_gif<span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text_sequence</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">font_type</span><span class="o">=</span><span class="s1">'arial.ttf'</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'#000000'</span><span class="p">,</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Adds animated text to a GIF image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_gif</code></td>
<td><code>str</code></td>
<td>
<p>The file path to the input GIF image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>The file path to the output GIF image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>xy</code></td>
<td><code>tuple</code></td>
<td>
<p>Top left corner of the text. It can be formatted like this: (10, 10) or ('15%', '25%'). Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>text_sequence</code></td>
<td><code>int, str, list</code></td>
<td>
<p>Text to be drawn. It can be an integer number, a string, or a list of strings. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>font_type</code></td>
<td><code>str</code></td>
<td>
<p>Font type. Defaults to "arial.ttf".</p>
</td>
<td><code>'arial.ttf'</code></td>
</tr>
<tr>
<td><code>font_size</code></td>
<td><code>int</code></td>
<td>
<p>Font size. Defaults to 20.</p>
</td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>font_color</code></td>
<td><code>str</code></td>
<td>
<p>Font color. It can be a string (e.g., 'red'), rgb tuple (e.g., (255, 127, 0)), or hex code (e.g., '#ff00ff').  Defaults to '#000000'.</p>
</td>
<td><code>'#000000'</code></td>
</tr>
<tr>
<td><code>add_progress_bar</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add a progress bar at the bottom of the GIF. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>progress_bar_color</code></td>
<td><code>str</code></td>
<td>
<p>Color for the progress bar. Defaults to 'white'.</p>
</td>
<td><code>'white'</code></td>
</tr>
<tr>
<td><code>progress_bar_height</code></td>
<td><code>int</code></td>
<td>
<p>Height of the progress bar. Defaults to 5.</p>
</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>duration</code></td>
<td><code>int</code></td>
<td>
<p>controls how long each frame will be displayed for, in milliseconds. It is the inverse of the frame rate. Setting it to 100 milliseconds gives 10 frames per second. You can decrease the duration to give a smoother animation.. Defaults to 100.</p>
</td>
<td><code>100</code></td>
</tr>
<tr>
<td><code>loop</code></td>
<td><code>int</code></td>
<td>
<p>controls how many times the animation repeats. The default, 1, means that the animation will play once and then stop (displaying the last frame). A value of 0 means that the animation will repeat forever. Defaults to 0.</p>
</td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_text_to_gif</span><span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text_sequence</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">font_type</span><span class="o">=</span><span class="s2">"arial.ttf"</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'#000000'</span><span class="p">,</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">"""Adds animated text to a GIF image.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_gif (str): The file path to the input GIF image.</span>
<span class="sd">        out_gif (str): The file path to the output GIF image.</span>
<span class="sd">        xy (tuple, optional): Top left corner of the text. It can be formatted like this: (10, 10) or ('15%', '25%'). Defaults to None.</span>
<span class="sd">        text_sequence (int, str, list, optional): Text to be drawn. It can be an integer number, a string, or a list of strings. Defaults to None.</span>
<span class="sd">        font_type (str, optional): Font type. Defaults to "arial.ttf".</span>
<span class="sd">        font_size (int, optional): Font size. Defaults to 20.</span>
<span class="sd">        font_color (str, optional): Font color. It can be a string (e.g., 'red'), rgb tuple (e.g., (255, 127, 0)), or hex code (e.g., '#ff00ff').  Defaults to '#000000'.</span>
<span class="sd">        add_progress_bar (bool, optional): Whether to add a progress bar at the bottom of the GIF. Defaults to True.</span>
<span class="sd">        progress_bar_color (str, optional): Color for the progress bar. Defaults to 'white'.</span>
<span class="sd">        progress_bar_height (int, optional): Height of the progress bar. Defaults to 5.</span>
<span class="sd">        duration (int, optional): controls how long each frame will be displayed for, in milliseconds. It is the inverse of the frame rate. Setting it to 100 milliseconds gives 10 frames per second. You can decrease the duration to give a smoother animation.. Defaults to 100.</span>
<span class="sd">        loop (int, optional): controls how many times the animation repeats. The default, 1, means that the animation will play once and then stop (displaying the last frame). A value of 0 means that the animation will repeat forever. Defaults to 0.</span>

<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">io</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageSequence</span><span class="p">,</span> <span class="n">ImageFont</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>
    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"geemap"</span><span class="p">,</span> <span class="s2">"geemap.py"</span><span class="p">))</span>
    <span class="n">default_font</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data/fonts/arial.ttf'</span><span class="p">)</span>

    <span class="n">in_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
    <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_gif</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input gif file does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">font_type</span> <span class="o">==</span> <span class="s1">'arial.ttf'</span><span class="p">:</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">font_list</span> <span class="o">=</span> <span class="n">system_fonts</span><span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">font_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">font_type</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">font_type</span> <span class="ow">in</span> <span class="n">font_names</span><span class="p">):</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_type</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s1">'The specified font type could not be found on your system. Using the default font instead.'</span><span class="p">)</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>

    <span class="n">color</span> <span class="o">=</span> <span class="n">check_color</span><span class="p">(</span><span class="n">font_color</span><span class="p">)</span>
    <span class="n">progress_bar_color</span> <span class="o">=</span> <span class="n">check_color</span><span class="p">(</span><span class="n">progress_bar_color</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while opening the gif.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">count</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">n_frames</span>
    <span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">size</span>
    <span class="n">progress_bar_widths</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">count</span> <span class="o">*</span> <span class="n">W</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="n">progress_bar_shapes</span> <span class="o">=</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">H</span> <span class="o">-</span> <span class="n">progress_bar_height</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">H</span><span class="p">)]</span>
                           <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">progress_bar_widths</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">xy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># default text location is 5% width and 5% height of the image.</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">W</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="mf">0.05</span> <span class="o">*</span> <span class="n">H</span><span class="p">))</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">xy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"xy must be a tuple, e.g., (10, 10), ('10%', '10%')"</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">xy</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">W</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">H</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'xy is out of bounds. x must be within [0, </span><span class="si">{}</span><span class="s1">], and y must be within [0, </span><span class="si">{}</span><span class="s1">]'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">H</span><span class="p">))</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">xy</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">'%'</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'%'</span> <span class="ow">in</span> <span class="n">y</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'%'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">W</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'%'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">H</span><span class="p">)</span>
                <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">"The specified xy is invalid. It must be formatted like this ('10%', '10%')"</span><span class="p">)</span>
                <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The specified xy is invalid. It must be formatted like this: (10, 10) or ('10%', '10%')"</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">text_sequence</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text_sequence</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
            <span class="n">text_sequence</span><span class="p">,</span> <span class="n">text_sequence</span> <span class="o">+</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text_sequence</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">text_sequence</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">text_sequence</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
                <span class="n">text_sequence</span><span class="p">,</span> <span class="n">text_sequence</span> <span class="o">+</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">text_sequence</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text_sequence</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">text_sequence</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The length of the text sequence must be equal to the number (</span><span class="si">{}</span><span class="s1">) of frames in the gif.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">text_sequence</span><span class="p">]</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Loop over each frame in the animated image</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">frame</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">)):</span>
            <span class="c1"># Draw the text on the frame</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">'RGB'</span><span class="p">)</span>
            <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
            <span class="c1"># w, h = draw.textsize(text[index])</span>
            <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">text</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">add_progress_bar</span><span class="p">:</span>
                <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span>
                    <span class="n">progress_bar_shapes</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">fill</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">draw</span>

            <span class="n">b</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">"GIF"</span><span class="p">)</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

            <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="c1"># https://www.pythoninformer.com/python-libraries/pillow/creating-animated-gif/</span>
        <span class="c1"># Save the frames as a new image</span>

        <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">out_gif</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span> <span class="n">optimize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.adjust_longitude">
<code class="highlight language-python">
adjust_longitude<span class="p">(</span><span class="n">in_fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Adjusts longitude if it is less than -180 or greater than 180.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_fc</code></td>
<td><code>dict</code></td>
<td>
<p>The input dictionary containing coordinates.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>A dictionary containing the converted longitudes</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">adjust_longitude</span><span class="p">(</span><span class="n">in_fc</span><span class="p">):</span>
    <span class="sd">"""Adjusts longitude if it is less than -180 or greater than 180.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_fc (dict): The input dictionary containing coordinates.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the converted longitudes</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="n">in_fc</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="k">if</span> <span class="s1">'geometry'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>

            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Point'</span><span class="p">:</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Polygon'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                        <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                        <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index1</span><span class="p">][</span><span class="n">index2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'LineString'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                    <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                    <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

        <span class="k">elif</span> <span class="s1">'type'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>

            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Point'</span><span class="p">:</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Polygon'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                        <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                        <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index1</span><span class="p">][</span><span class="n">index2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'LineString'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                    <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                    <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

        <span class="k">return</span> <span class="n">in_fc</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.api_docs">
<code class="highlight language-python">
api_docs<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Open a browser and navigate to the geemap API documentation.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">api_docs</span><span class="p">():</span>
    <span class="sd">"""Open a browser and navigate to the geemap API documentation.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://giswqs.github.io/geemap/geemap'</span>
    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.build_api_tree">
<code class="highlight language-python">
build_api_tree<span class="p">(</span><span class="n">api_dict</span><span class="p">,</span> <span class="n">output_widget</span><span class="p">,</span> <span class="n">layout_width</span><span class="o">=</span><span class="s1">'100%'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Builds an Earth Engine API tree view.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api_dict</code></td>
<td><code>dict</code></td>
<td>
<p>The dictionary containing information about each Earth Engine API function.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>output_widget</code></td>
<td><code>object</code></td>
<td>
<p>An Output widget.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>layout_width</code></td>
<td><code>str</code></td>
<td>
<p>The percentage width of the widget. Defaults to '100%'.</p>
</td>
<td><code>'100%'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>Returns a tuple containing two items: a tree Output widget and a tree dictionary.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">build_api_tree</span><span class="p">(</span><span class="n">api_dict</span><span class="p">,</span> <span class="n">output_widget</span><span class="p">,</span> <span class="n">layout_width</span><span class="o">=</span><span class="s1">'100%'</span><span class="p">):</span>
    <span class="sd">"""Builds an Earth Engine API tree view.</span>

<span class="sd">    Args:</span>
<span class="sd">        api_dict (dict): The dictionary containing information about each Earth Engine API function.</span>
<span class="sd">        output_widget (object): An Output widget.</span>
<span class="sd">        layout_width (str, optional): The percentage width of the widget. Defaults to '100%'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing two items: a tree Output widget and a tree dictionary.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>
    <span class="n">tree_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">names</span> <span class="o">=</span> <span class="n">api_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">handle_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'owner'</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">api_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

            <span class="k">with</span> <span class="n">output_widget</span><span class="p">:</span>
                <span class="n">output_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">html_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="s1">'html'</span><span class="p">])</span>
                <span class="n">display</span><span class="p">(</span><span class="n">html_widget</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="n">ee_function_tree</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">func_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">first</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">first</span><span class="p">]</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">tree_dict</span><span class="p">[</span><span class="n">first</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">func_list</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">func</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">func_list</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]]</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">tree_dict</span><span class="p">[</span><span class="n">func</span><span class="p">]</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">tree_dict</span><span class="p">[</span><span class="n">func</span><span class="p">])</span>

                    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">func_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">func_list</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s1">'file'</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_click</span><span class="p">,</span> <span class="s1">'selected'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tree</span><span class="p">,</span> <span class="n">tree_dict</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.build_repo_tree">
<code class="highlight language-python">
build_repo_tree<span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'gee_repos'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Builds a repo tree for GEE account.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the repos. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The output name for the repo directory. Defaults to 'gee_repos'.</p>
</td>
<td><code>'gee_repos'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>Returns a tuple containing a tree widget, an output widget, and a tree dictionary containing nodes.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">build_repo_tree</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'gee_repos'</span><span class="p">):</span>
    <span class="sd">"""Builds a repo tree for GEE account.</span>

<span class="sd">    Args:</span>
<span class="sd">        out_dir (str): The output directory for the repos. Defaults to None.</span>
<span class="sd">        name (str, optional): The output name for the repo directory. Defaults to 'gee_repos'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing a tree widget, an output widget, and a tree dictionary containing nodes.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">))</span>

    <span class="n">repo_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">)</span>

    <span class="n">URLs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># 'Owner': 'https://earthengine.googlesource.com/{}/default'.format(ee_user_id()),</span>
        <span class="s1">'Writer'</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
        <span class="s1">'Reader'</span><span class="p">:</span> <span class="s1">'https://github.com/giswqs/geemap'</span><span class="p">,</span>
        <span class="s1">'Examples'</span><span class="p">:</span> <span class="s1">'https://github.com/giswqs/earthengine-py-examples'</span><span class="p">,</span>
        <span class="s1">'Archive'</span><span class="p">:</span> <span class="s1">'https://earthengine.googlesource.com/EGU2017-EE101'</span>
    <span class="p">}</span>

    <span class="n">user_id</span> <span class="o">=</span> <span class="n">ee_user_id</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">URLs</span><span class="p">[</span><span class="s1">'Owner'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'https://earthengine.googlesource.com/</span><span class="si">{}</span><span class="s1">/default'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">ee_user_id</span><span class="p">())</span>

    <span class="n">path_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
        <span class="n">placeholder</span><span class="o">=</span><span class="s1">'Enter the link to a Git repository here...'</span><span class="p">)</span>
    <span class="n">path_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">'475px'</span>
    <span class="n">clone_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">'Clone'</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s1">'primary'</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="s1">'Clone the repository to folder.'</span><span class="p">)</span>
    <span class="n">info_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>

    <span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Owner'</span><span class="p">,</span> <span class="s1">'Writer'</span><span class="p">,</span> <span class="s1">'Reader'</span><span class="p">,</span> <span class="s1">'Examples'</span><span class="p">,</span> <span class="s1">'Archive'</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="n">group_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">group_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">group_dir</span><span class="p">)</span>

    <span class="n">example_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="s1">'Examples/earthengine-py-examples'</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">example_dir</span><span class="p">):</span>
        <span class="n">clone_github_repo</span><span class="p">(</span><span class="n">URLs</span><span class="p">[</span><span class="s1">'Examples'</span><span class="p">],</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">example_dir</span><span class="p">)</span>

    <span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">,</span> <span class="n">tree_dict</span> <span class="o">=</span> <span class="n">file_browser</span><span class="p">(</span>
        <span class="n">in_dir</span><span class="o">=</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">add_root_node</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">search_description</span><span class="o">=</span><span class="s1">'Filter scripts...'</span><span class="p">,</span> <span class="n">use_import</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">return_sep_widgets</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">right_widget</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">handle_folder_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s1">''</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'owner'</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">selected</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">URLs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">URLs</span><span class="p">[</span><span class="n">selected</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

            <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">url</span>
            <span class="n">clone_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">path_widget</span><span class="p">,</span> <span class="n">clone_widget</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">right_widget</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
        <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">dirname</span><span class="p">]</span>
        <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s1">'selected'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_clone_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span>
        <span class="n">default_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="s1">'Examples'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
            <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'Please enter a valid URL to the repository.'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">selected</span><span class="p">:</span>
                    <span class="n">default_dir</span> <span class="o">=</span> <span class="n">key</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'Cloning...'</span>
                <span class="n">clone_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">default_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
                <span class="k">if</span> <span class="s1">'github.com'</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
                    <span class="n">clone_github_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">clone_dir</span><span class="p">)</span>
                <span class="k">elif</span> <span class="s1">'googlesource'</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
                    <span class="n">clone_google_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">clone_dir</span><span class="p">)</span>
                <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'Cloned to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">clone_dir</span><span class="p">)</span>
                <span class="n">clone_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'An error occurred when trying to clone the repository '</span> <span class="o">+</span> \
                    <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">clone_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">clone_widget</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">handle_clone_click</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">left_widget</span><span class="p">,</span> <span class="n">info_widget</span><span class="p">,</span> <span class="n">tree_dict</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.check_color">
<code class="highlight language-python">
check_color<span class="p">(</span><span class="n">in_color</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks the input color and returns the corresponding hex color code.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_color</code></td>
<td><code>str or tuple</code></td>
<td>
<p>It can be a string (e.g., 'red', '#ffff00') or tuple (e.g., (255, 127, 0)).</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>A hex color code.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">check_color</span><span class="p">(</span><span class="n">in_color</span><span class="p">):</span>
    <span class="sd">"""Checks the input color and returns the corresponding hex color code.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_color (str or tuple): It can be a string (e.g., 'red', '#ffff00') or tuple (e.g., (255, 127, 0)).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A hex color code.</span>
<span class="sd">    """</span>
    <span class="n">out_color</span> <span class="o">=</span> <span class="s1">'#000000'</span>  <span class="c1"># default black color</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_color</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">in_color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">in_color</span><span class="p">):</span>
            <span class="n">rescaled_color</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">/</span> <span class="mf">255.0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">in_color</span><span class="p">]</span>
            <span class="n">out_color</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">rescaled_color</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">out_color</span><span class="o">.</span><span class="n">hex_l</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'RGB color must be a tuple with three integer values ranging from 0 to 255.'</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out_color</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="n">in_color</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">out_color</span><span class="o">.</span><span class="n">hex_l</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided color is invalid. Using the default black color.'</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">out_color</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.check_git_install">
<code class="highlight language-python">
check_git_install<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks if Git is installed.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Git is installed, otherwise returns False.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">check_git_install</span><span class="p">():</span>
    <span class="sd">"""Checks if Git is installed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Git is installed, otherwise returns False.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'git --version'</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">if</span> <span class="s1">'git version'</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://git-scm.com/downloads'</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"Git is not installed. Please download Git from </span><span class="si">{}</span><span class="s2"> and install it."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.check_install">
<code class="highlight language-python">
check_install<span class="p">(</span><span class="n">package</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether a package is installed. If not, it will install the package.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package</code></td>
<td><code>str</code></td>
<td>
<p>The name of the package to check.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">check_install</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
    <span class="sd">"""Checks whether a package is installed. If not, it will install the package.</span>

<span class="sd">    Args:</span>
<span class="sd">        package (str): The name of the package to check.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">subprocess</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="c1"># print('{} is already installed.'.format(package))</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> is not installed. Installing ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s2">"python"</span><span class="p">,</span> <span class="s1">'-m'</span><span class="p">,</span> <span class="s1">'pip'</span><span class="p">,</span> <span class="s1">'install'</span><span class="p">,</span> <span class="n">package</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Failed to install </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2"> has been installed successfully."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.clone_github_repo">
<code class="highlight language-python">
clone_github_repo<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones a GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The link to the GitHub repository</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the cloned repository. </p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_github_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">):</span>
    <span class="sd">"""Clones a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the GitHub repository</span>
<span class="sd">        out_dir (str): The output directory for the cloned repository. </span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">zipfile</span>

    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="c1"># url_zip = os.path.join(url, 'archive/master.zip')</span>
    <span class="n">url_zip</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s1">'/archive/master.zip'</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The specified output directory already exists. Please choose a new directory.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">parent_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
    <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s1">'.zip'</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url_zip</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided URL is invalid. Please double check the URL."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>

    <span class="n">src</span> <span class="o">=</span> <span class="n">out_file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.zip'</span><span class="p">,</span> <span class="s1">'-master'</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.clone_github_repo2">
<code class="highlight language-python">
clone_github_repo2<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones a GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The link to the GitHub repository</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the cloned repository. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_github_repo2</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Clones a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the GitHub repository</span>
<span class="sd">        out_dir (str, optional): The output directory for the cloned repository. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="n">check_install</span><span class="p">(</span><span class="s1">'dulwich'</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">dulwich</span> <span class="kn">import</span> <span class="n">porcelain</span>

    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">repo_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The specified output directory already exists. Please choose a new directory.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">porcelain</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Failed to clone the repository.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.clone_google_repo">
<code class="highlight language-python">
clone_google_repo<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones an Earth Engine repository from https://earthengine.googlesource.com, such as https://earthengine.googlesource.com/users/google/datasets</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The link to the Earth Engine repository</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the cloned repository. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_google_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Clones an Earth Engine repository from https://earthengine.googlesource.com, such as https://earthengine.googlesource.com/users/google/datasets</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the Earth Engine repository</span>
<span class="sd">        out_dir (str, optional): The output directory for the cloned repository. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">repo_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The specified output directory already exists. Please choose a new directory.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">check_git_install</span><span class="p">():</span>

        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'git clone "</span><span class="si">{}</span><span class="s1">" "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.clone_repo">
<code class="highlight language-python">
clone_repo<span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones the geemap GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>Output folder for the repo. Defaults to '.'.</p>
</td>
<td><code>'.'</code></td>
</tr>
<tr>
<td><code>unzip</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to unzip the repository. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Clones the geemap GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        out_dir (str, optional): Output folder for the repo. Defaults to '.'.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the repository. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://github.com/giswqs/geemap/archive/master.zip'</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s1">'geemap-master.zip'</span>
    <span class="n">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                      <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="n">unzip</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.copy_credentials_to_colab">
<code class="highlight language-python">
copy_credentials_to_colab<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Copies ee credentials from Google Drive to Google Colab.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">copy_credentials_to_colab</span><span class="p">():</span>
    <span class="sd">"""Copies ee credentials from Google Drive to Google Colab.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">shutil</span>
    <span class="n">src</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive/.config/earthengine/credentials'</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="s1">'/root/.config/earthengine/credentials'</span>

    <span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">wd</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.copy_credentials_to_drive">
<code class="highlight language-python">
copy_credentials_to_drive<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Copies ee credentials from Google Colab to Google Drive.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">copy_credentials_to_drive</span><span class="p">():</span>
    <span class="sd">"""Copies ee credentials from Google Colab to Google Drive.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">shutil</span>
    <span class="n">src</span> <span class="o">=</span> <span class="s1">'/root/.config/earthengine/credentials'</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive/.config/earthengine/credentials'</span>

    <span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">wd</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.create_code_cell">
<code class="highlight language-python">
create_code_cell<span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">'below'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a code cell in the IPython Notebook.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>code</code></td>
<td><code>str</code></td>
<td>
<p>Code to fill the new code cell with. Defaults to ''.</p>
</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>where</code></td>
<td><code>str</code></td>
<td>
<p>Where to add the new code cell. It can be one of the following: above, below, at_bottom. Defaults to 'below'.</p>
</td>
<td><code>'below'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">create_code_cell</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">'below'</span><span class="p">):</span>
    <span class="sd">"""Creates a code cell in the IPython Notebook.</span>

<span class="sd">    Args:</span>
<span class="sd">        code (str, optional): Code to fill the new code cell with. Defaults to ''.</span>
<span class="sd">        where (str, optional): Where to add the new code cell. It can be one of the following: above, below, at_bottom. Defaults to 'below'.</span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">base64</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Javascript</span><span class="p">,</span> <span class="n">display</span>
    <span class="n">encoded_code</span> <span class="o">=</span> <span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">code</span><span class="p">)))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">Javascript</span><span class="p">(</span><span class="s2">"""</span>
<span class="s2">        var code = IPython.notebook.insert_cell_</span><span class="si">{0}</span><span class="s2">('code');</span>
<span class="s2">        code.set_text(atob("</span><span class="si">{1}</span><span class="s2">"));</span>
<span class="s2">    """</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">encoded_code</span><span class="p">)))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.create_colorbar">
<code class="highlight language-python">
create_colorbar<span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">],</span> <span class="n">add_ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vertical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">font_type</span><span class="o">=</span><span class="s1">'arial.ttf'</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">add_outline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">outline_color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a colorbar based on the provided palette.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>width</code></td>
<td><code>int</code></td>
<td>
<p>Width of the colorbar in pixels. Defaults to 150.</p>
</td>
<td><code>150</code></td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>int</code></td>
<td>
<p>Height of the colorbar in pixels. Defaults to 30.</p>
</td>
<td><code>30</code></td>
</tr>
<tr>
<td><code>palette</code></td>
<td><code>list</code></td>
<td>
<p>Palette for the colorbar. Each color can be provided as a string (e.g., 'red'), a hex string (e.g., '#ff0000'), or an RGB tuple (255, 0, 255). Defaults to ['blue', 'green', 'red'].</p>
</td>
<td><code>['blue', 'green', 'red']</code></td>
</tr>
<tr>
<td><code>add_ticks</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add tick markers to the colorbar. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>add_labels</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add labels to the colorbar. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>labels</code></td>
<td><code>list</code></td>
<td>
<p>A list of labels to add to the colorbar. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>vertical</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to rotate the colorbar vertically. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>out_file</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output colorbar in png format. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>font_type</code></td>
<td><code>str</code></td>
<td>
<p>Font type to use for labels. Defaults to 'arial.ttf'.</p>
</td>
<td><code>'arial.ttf'</code></td>
</tr>
<tr>
<td><code>font_size</code></td>
<td><code>int</code></td>
<td>
<p>Font size to use for labels. Defaults to 12.</p>
</td>
<td><code>12</code></td>
</tr>
<tr>
<td><code>font_color</code></td>
<td><code>str</code></td>
<td>
<p>Font color to use for labels. Defaults to 'black'.</p>
</td>
<td><code>'black'</code></td>
</tr>
<tr>
<td><code>add_outline</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add an outline to the colorbar. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>outline_color</code></td>
<td><code>str</code></td>
<td>
<p>Color for the outline of the colorbar. Defaults to 'black'.</p>
</td>
<td><code>'black'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>File path of the output colorbar in png format.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">create_colorbar</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">],</span> <span class="n">add_ticks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vertical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">font_type</span><span class="o">=</span><span class="s1">'arial.ttf'</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">add_outline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">outline_color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">):</span>
    <span class="sd">"""Creates a colorbar based on the provided palette.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (int, optional): Width of the colorbar in pixels. Defaults to 150.</span>
<span class="sd">        height (int, optional): Height of the colorbar in pixels. Defaults to 30.</span>
<span class="sd">        palette (list, optional): Palette for the colorbar. Each color can be provided as a string (e.g., 'red'), a hex string (e.g., '#ff0000'), or an RGB tuple (255, 0, 255). Defaults to ['blue', 'green', 'red'].</span>
<span class="sd">        add_ticks (bool, optional): Whether to add tick markers to the colorbar. Defaults to True.</span>
<span class="sd">        add_labels (bool, optional): Whether to add labels to the colorbar. Defaults to True.</span>
<span class="sd">        labels (list, optional): A list of labels to add to the colorbar. Defaults to None.</span>
<span class="sd">        vertical (bool, optional): Whether to rotate the colorbar vertically. Defaults to False.</span>
<span class="sd">        out_file (str, optional): File path to the output colorbar in png format. Defaults to None.</span>
<span class="sd">        font_type (str, optional): Font type to use for labels. Defaults to 'arial.ttf'.</span>
<span class="sd">        font_size (int, optional): Font size to use for labels. Defaults to 12.</span>
<span class="sd">        font_color (str, optional): Font color to use for labels. Defaults to 'black'.</span>
<span class="sd">        add_outline (bool, optional): Whether to add an outline to the colorbar. Defaults to True.</span>
<span class="sd">        outline_color (str, optional): Color for the outline of the colorbar. Defaults to 'black'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: File path of the output colorbar in png format.</span>

<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">decimal</span>
    <span class="kn">import</span> <span class="nn">io</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="kn">from</span> <span class="nn">colour</span> <span class="kn">import</span> <span class="n">Color</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageFont</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>
    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"geemap"</span><span class="p">,</span> <span class="s2">"geemap.py"</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">out_file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">'colorbar_'</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.png'</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">out_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.png'</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must end with .png'</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_file</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_file</span><span class="p">))</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">'RGBA'</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
    <span class="n">ld</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">float_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
        <span class="k">while</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">stop</span><span class="p">:</span>
            <span class="k">yield</span> <span class="nb">float</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
            <span class="n">start</span> <span class="o">+=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

    <span class="n">n_colors</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span>
    <span class="n">decimal_places</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">rgb_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">Color</span><span class="p">(</span><span class="n">check_color</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="o">.</span><span class="n">rgb</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">palette</span><span class="p">]</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">decimal_places</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">float_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0001</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">n_colors</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))]</span>

    <span class="n">heatmap</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
        <span class="n">pair</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">rgb_colors</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
        <span class="n">heatmap</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">c</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nb">map</span><span class="o">=</span><span class="p">[],</span> <span class="n">spread</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="p">(</span><span class="n">spread</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="p">)))</span>
                 <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">])</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="p">(</span><span class="n">spread</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="p">)))</span>
                 <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">])</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="p">(</span><span class="n">spread</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="nb">map</span><span class="p">)))</span>
                 <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">r</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">g</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="nb">map</span><span class="o">=</span><span class="n">heatmap</span><span class="p">)</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="mi">256</span><span class="o">*</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">ld</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">if</span> <span class="n">add_outline</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="o">-</span><span class="mi">1</span><span class="p">)],</span>
                       <span class="n">outline</span><span class="o">=</span><span class="n">check_color</span><span class="p">(</span><span class="n">outline_color</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">draw</span>

    <span class="k">if</span> <span class="n">add_ticks</span><span class="p">:</span>
        <span class="n">tick_length</span> <span class="o">=</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="o">*</span> <span class="n">width</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>
        <span class="n">y_top</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">tick_length</span>
        <span class="n">y_bottom</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">y_top</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">y_bottom</span><span class="p">)]</span>
            <span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">draw</span>

    <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
        <span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">ROTATE_90</span><span class="p">)</span>

    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>

    <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lowerbound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">upperbound</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">upperbound</span> <span class="o">-</span> <span class="n">lowerbound</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">lowerbound</span> <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="n">step</span><span class="p">)</span>
                      <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">))]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The labels are invalid.'</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">palette</span><span class="p">):</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The labels must have the same length as the palette.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">add_labels</span><span class="p">:</span>

        <span class="n">default_font</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data/fonts/arial.ttf'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font_type</span> <span class="o">==</span> <span class="s1">'arial.ttf'</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">font_list</span> <span class="o">=</span> <span class="n">system_fonts</span><span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">font_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">font_type</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">font_type</span> <span class="ow">in</span> <span class="n">font_names</span><span class="p">):</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_type</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="s1">'The specified font type could not be found on your system. Using the default font instead.'</span><span class="p">)</span>
                    <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">default_font</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>

        <span class="n">font_color</span> <span class="o">=</span> <span class="n">check_color</span><span class="p">(</span><span class="n">font_color</span><span class="p">)</span>

        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textsize</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">:</span>
            <span class="n">w_tmp</span><span class="p">,</span> <span class="n">h_tmp</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textsize</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">w_tmp</span> <span class="o">&gt;</span> <span class="n">w</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">w_tmp</span>
            <span class="k">if</span> <span class="n">h_tmp</span> <span class="o">&gt;</span> <span class="n">h</span><span class="p">:</span>
                <span class="n">h</span> <span class="o">=</span> <span class="n">h_tmp</span>

        <span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="n">background</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">'RGBA'</span><span class="p">,</span> <span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">H</span><span class="p">))</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">background</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">background</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">xy</span><span class="p">,</span> <span class="n">im</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>

            <span class="n">w_tmp</span><span class="p">,</span> <span class="n">h_tmp</span> <span class="o">=</span> <span class="n">draw</span><span class="o">.</span><span class="n">textsize</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">vertical</span><span class="p">:</span>
                <span class="n">spacing</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="n">spacing</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="n">h</span> <span class="o">-</span> <span class="n">keys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">height</span> <span class="o">-</span> <span class="n">h_tmp</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">font_color</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">*</span> <span class="n">width</span> <span class="o">+</span> <span class="n">w</span> <span class="o">-</span> <span class="n">w_tmp</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">spacing</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="n">spacing</span>
                <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">label</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">font_color</span><span class="p">)</span>

        <span class="n">im</span> <span class="o">=</span> <span class="n">background</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out_file</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.create_download_link">
<code class="highlight language-python">
create_download_link<span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Click here to download: '</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The file path to the file to download</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>str</code></td>
<td>
<p>str. Defaults to "Click here to download: ".</p>
</td>
<td><code>'Click here to download: '</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>HTML download URL.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">create_download_link</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Click here to download: "</span><span class="p">):</span>
    <span class="sd">"""Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The file path to the file to download</span>
<span class="sd">        title (str, optional): str. Defaults to "Click here to download: ".</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: HTML download URL.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">base64</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">b64</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">b64</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s1">'&lt;a download="</span><span class="si">{filename}</span><span class="s1">" href="data:text/csv;base64,</span><span class="si">{payload}</span><span class="s1">" style="color:#0000FF;" target="_blank"&gt;</span><span class="si">{title}</span><span class="s1">&lt;/a&gt;'</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span> <span class="o">+</span>
                       <span class="sa">f</span><span class="s1">' </span><span class="si">{</span><span class="n">basename</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">basename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.credentials_in_colab">
<code class="highlight language-python">
credentials_in_colab<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks if the ee credentials file exists in Google Colab.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Google Drive is mounted, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">credentials_in_colab</span><span class="p">():</span>
    <span class="sd">"""Checks if the ee credentials file exists in Google Colab.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    """</span>
    <span class="n">credentials_path</span> <span class="o">=</span> <span class="s1">'/root/.config/earthengine/credentials'</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.credentials_in_drive">
<code class="highlight language-python">
credentials_in_drive<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks if the ee credentials file exists in Google Drive.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Google Drive is mounted, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">credentials_in_drive</span><span class="p">():</span>
    <span class="sd">"""Checks if the ee credentials file exists in Google Drive.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    """</span>
    <span class="n">credentials_path</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive/.config/earthengine/credentials'</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.csv_to_shp">
<code class="highlight language-python">
csv_to_shp<span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">'longitude'</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">'latitude'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a csv file with latlon info to a point shapefile.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_csv</code></td>
<td><code>str</code></td>
<td>
<p>The input csv file containing longitude and latitude columns.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_shp</code></td>
<td><code>str</code></td>
<td>
<p>The file path to the output shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>longitude</code></td>
<td><code>str</code></td>
<td>
<p>The column name of the longitude column. Defaults to 'longitude'.</p>
</td>
<td><code>'longitude'</code></td>
</tr>
<tr>
<td><code>latitude</code></td>
<td><code>str</code></td>
<td>
<p>The column name of the latitude column. Defaults to 'latitude'.</p>
</td>
<td><code>'latitude'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">csv_to_shp</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">'longitude'</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">'latitude'</span><span class="p">):</span>
    <span class="sd">"""Converts a csv file with latlon info to a point shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The input csv file containing longitude and latitude columns.</span>
<span class="sd">        out_shp (str): The file path to the output shapefile.</span>
<span class="sd">        longitude (str, optional): The column name of the longitude column. Defaults to 'longitude'.</span>
<span class="sd">        latitude (str, optional): The column name of the latitude column. Defaults to 'latitude'.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">csv</span>
    <span class="kn">import</span> <span class="nn">shapefile</span> <span class="k">as</span> <span class="nn">shp</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_csv</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided CSV file does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.csv'</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input file must end with .csv'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">shp</span><span class="o">.</span><span class="n">Writer</span><span class="p">(</span><span class="n">out_shp</span><span class="p">,</span> <span class="n">shapeType</span><span class="o">=</span><span class="n">shp</span><span class="o">.</span><span class="n">POINT</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
            <span class="n">csvreader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">csvreader</span><span class="o">.</span><span class="n">fieldnames</span>
            <span class="p">[</span><span class="n">points</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">header</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csvreader</span><span class="p">:</span>
                <span class="n">points</span><span class="o">.</span><span class="n">point</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">longitude</span><span class="p">])),</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">latitude</span><span class="p">])))</span>
                <span class="n">points</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="o">*</span><span class="nb">tuple</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">header</span><span class="p">]))</span>

        <span class="n">out_prj</span> <span class="o">=</span> <span class="n">out_shp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.shp'</span><span class="p">,</span> <span class="s1">'.prj'</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_prj</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">prj_str</span> <span class="o">=</span> <span class="s1">'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.0174532925199433]] '</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">prj_str</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.date_sequence">
<code class="highlight language-python">
date_sequence<span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a date sequence.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start</code></td>
<td><code>str</code></td>
<td>
<p>The start date, e.g., '2000-01-01'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>end</code></td>
<td><code>str</code></td>
<td>
<p>The end date, e.g., '2000-12-31'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>unit</code></td>
<td><code>str</code></td>
<td>
<p>One of 'year', 'month' 'week', 'day', 'hour', 'minute', or 'second'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>date_format</code></td>
<td><code>str</code></td>
<td>
<p>A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</p>
</td>
<td><code>'YYYY-MM-dd'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.List</code></td>
<td>
<p>A list of date sequence.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">date_sequence</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">):</span>
    <span class="sd">"""Creates a date sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        start (str): The start date, e.g., '2000-01-01'.</span>
<span class="sd">        end (str): The end date, e.g., '2000-12-31'.</span>
<span class="sd">        unit (str): One of 'year', 'month' 'week', 'day', 'hour', 'minute', or 'second'.</span>
<span class="sd">        date_format (str, optional): A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.List: A list of date sequence.</span>
<span class="sd">    """</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span><span class="o">.</span><span class="n">toInt</span><span class="p">()</span>
    <span class="n">num_seq</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
    <span class="n">date_seq</span> <span class="o">=</span> <span class="n">num_seq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">start_date</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">date_seq</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.download_ee_video">
<code class="highlight language-python">
download_ee_video<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads a video thumbnail as a GIF image from Earth Engine.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>video_args</code></td>
<td><code>object</code></td>
<td>
<p>Parameters for expring the video thumbnail.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output GIF.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">download_ee_video</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">):</span>
    <span class="sd">"""Downloads a video thumbnail as a GIF image from Earth Engine.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (object): An ee.ImageCollection.</span>
<span class="sd">        video_args (object): Parameters for expring the video thumbnail.</span>
<span class="sd">        out_gif (str): File path to the output GIF.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".gif"</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must have an extension of .gif.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>

    <span class="k">if</span> <span class="s1">'region'</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Could not convert the provided roi to ee.Geometry'</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL...'</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">getVideoThumbURL</span><span class="p">(</span><span class="n">video_args</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading GIF image from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_gif</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The GIF image has been saved to: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.edit_download_html">
<code class="highlight language-python">
edit_download_html<span class="p">(</span><span class="n">htmlWidget</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Click here to download: '</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578#issuecomment-617668058</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>htmlWidget</code></td>
<td><code>object</code></td>
<td>
<p>The HTML widget to display the URL.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>File path to download. </p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>str</code></td>
<td>
<p>Download description. Defaults to "Click here to download: ".</p>
</td>
<td><code>'Click here to download: '</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">edit_download_html</span><span class="p">(</span><span class="n">htmlWidget</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Click here to download: "</span><span class="p">):</span>
    <span class="sd">"""Downloads a file from voila. Adopted from https://github.com/voila-dashboards/voila/issues/578#issuecomment-617668058</span>

<span class="sd">    Args:</span>
<span class="sd">        htmlWidget (object): The HTML widget to display the URL.</span>
<span class="sd">        filename (str): File path to download. </span>
<span class="sd">        title (str, optional): Download description. Defaults to "Click here to download: ".</span>
<span class="sd">    """</span>

    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
    <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
    <span class="kn">import</span> <span class="nn">base64</span>

    <span class="c1"># Change widget html temperarily to a font-awesome spinner</span>
    <span class="n">htmlWidget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">"&lt;i class=</span><span class="se">\"</span><span class="s2">fa fa-spinner fa-spin fa-2x fa-fw</span><span class="se">\"</span><span class="s2">&gt;&lt;/i&gt;&lt;span class=</span><span class="se">\"</span><span class="s2">sr-only</span><span class="se">\"</span><span class="s2">&gt;Loading...&lt;/span&gt;"</span>

    <span class="c1"># Process raw data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">b64</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">b64</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Create and assign html to widget</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s1">'&lt;a download="</span><span class="si">{filename}</span><span class="s1">" href="data:text/csv;base64,</span><span class="si">{payload}</span><span class="s1">" target="_blank"&gt;</span><span class="si">{title}</span><span class="s1">&lt;/a&gt;'</span>
    <span class="n">htmlWidget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="o">+</span><span class="n">basename</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">basename</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_api_to_csv">
<code class="highlight language-python">
ee_api_to_csv<span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts Earth Engine API documentation from https://developers.google.com/earth-engine/api_docs as a csv file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>outfile</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to a csv file. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_api_to_csv</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Extracts Earth Engine API documentation from https://developers.google.com/earth-engine/api_docs as a csv file.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str, optional): The output file path to a csv file. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">csv</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"geemap"</span><span class="p">,</span> <span class="s2">"geemap.py"</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">'template'</span><span class="p">)</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s1">'ee_api_docs.csv'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">csv_file</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">outfile</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.csv'</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must end with .csv'</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://developers.google.com/earth-engine/api_docs'</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">descriptions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">functions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">details</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">h2</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">h2</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'h2'</span><span class="p">)]</span>
        <span class="n">descriptions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">h2</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">h2</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'h2'</span><span class="p">)]</span>
        <span class="n">func_tables</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'table'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">)</span>
        <span class="n">functions</span> <span class="o">=</span> <span class="p">[</span><span class="n">func_table</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="s1">'code'</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">func_table</span> <span class="ow">in</span> <span class="n">func_tables</span><span class="p">]</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="p">[</span><span class="n">func_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span>
            <span class="s1">'td'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">func_table</span> <span class="ow">in</span> <span class="n">func_tables</span><span class="p">]</span>

        <span class="n">detail_tables</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'table'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">'blue'</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">next_sibling</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">attrs</span> <span class="o">==</span> <span class="p">{</span><span class="s1">'class'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'details'</span><span class="p">]}:</span>
                <span class="n">detail_tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">detail_tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">detail_table</span> <span class="ow">in</span> <span class="n">detail_tables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">detail_table</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">detail_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'code'</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="s2">""</span>
            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">detail_table</span> <span class="ow">in</span> <span class="n">detail_tables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">detail_table</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">detail_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'td'</span><span class="p">)]</span>
                <span class="n">items</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="s2">""</span>
            <span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">detail_table</span> <span class="ow">in</span> <span class="n">detail_tables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">detail_table</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">detail_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'p'</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="s2">""</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

        <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span><span class="p">)</span>
        <span class="n">csv_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">)</span>

        <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'description'</span><span class="p">,</span> <span class="s1">'function'</span><span class="p">,</span> <span class="s1">'returns'</span><span class="p">,</span> <span class="s1">'argument'</span><span class="p">,</span> <span class="s1">'type'</span><span class="p">,</span> <span class="s1">'details'</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">function</span> <span class="o">=</span> <span class="n">functions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">return_type</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">arguments</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">argu_type</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">types</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">detail</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">details</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

            <span class="n">csv_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
                <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">return_type</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">argu_type</span><span class="p">,</span> <span class="n">detail</span><span class="p">])</span>

        <span class="n">csv_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_data_html">
<code class="highlight language-python">
ee_data_html<span class="p">(</span><span class="n">asset</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates HTML from an asset to be used in the HTML widget.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>asset</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary containing an Earth Engine asset.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>A string containing HTML.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_data_html</span><span class="p">(</span><span class="n">asset</span><span class="p">):</span>
    <span class="sd">"""Generates HTML from an asset to be used in the HTML widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset (dict): A dictionary containing an Earth Engine asset.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing HTML.</span>
<span class="sd">    """</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">'''</span>
<span class="s1">        &lt;html&gt;</span>
<span class="s1">        &lt;body&gt;</span>
<span class="s1">            &lt;h3&gt;asset_title&lt;/h3&gt;</span>
<span class="s1">            &lt;h4&gt;Dataset Availability&lt;/h4&gt;</span>
<span class="s1">                &lt;p style="margin-left: 40px"&gt;asset_dates&lt;/p&gt;</span>
<span class="s1">            &lt;h4&gt;Earth Engine Snippet&lt;/h4&gt;</span>
<span class="s1">                &lt;p style="margin-left: 40px"&gt;ee_id_snippet&lt;/p&gt;</span>
<span class="s1">            &lt;h4&gt;Earth Engine Data Catalog&lt;/h4&gt;</span>
<span class="s1">                &lt;p style="margin-left: 40px"&gt;&lt;a href="asset_url" target="_blank"&gt;asset_id&lt;/a&gt;&lt;/p&gt;</span>
<span class="s1">            &lt;h4&gt;Dataset Thumbnail&lt;/h4&gt;</span>
<span class="s1">                &lt;img src="thumbnail_url"&gt;</span>
<span class="s1">        &lt;/body&gt;</span>
<span class="s1">        &lt;/html&gt;</span>
<span class="s1">    '''</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_title'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'title'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_dates'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'dates'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'ee_id_snippet'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'ee_id_snippet'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_id'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_url'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'asset_url'</span><span class="p">])</span>
        <span class="c1"># asset['thumbnail'] = ee_data_thumbnail(asset['id'])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'thumbnail_url'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'thumbnail_url'</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">text</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_data_thumbnail">
<code class="highlight language-python">
ee_data_thumbnail<span class="p">(</span><span class="n">asset_id</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the thumbnail URL of an Earth Engine asset.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>asset_id</code></td>
<td><code>str</code></td>
<td>
<p>An Earth Engine asset id.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>An http url of the thumbnail.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_data_thumbnail</span><span class="p">(</span><span class="n">asset_id</span><span class="p">):</span>
    <span class="sd">"""Retrieves the thumbnail URL of an Earth Engine asset.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset_id (str): An Earth Engine asset id.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: An http url of the thumbnail.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">urllib</span>
    <span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

    <span class="n">asset_uid</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="s1">'_'</span><span class="p">)</span>
    <span class="n">asset_url</span> <span class="o">=</span> <span class="s2">"https://developers.google.com/earth-engine/datasets/catalog/</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">asset_uid</span><span class="p">)</span>
    <span class="n">thumbnail_url</span> <span class="o">=</span> <span class="s1">'https://mw1.google.com/ges/dd/images/</span><span class="si">{}</span><span class="s1">_sample.png'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">asset_uid</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">thumbnail_url</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">html_page</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">asset_url</span><span class="p">)</span>
            <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_page</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="s2">"html.parser"</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s1">'img'</span><span class="p">):</span>
                <span class="k">if</span> <span class="s1">'sample.png'</span> <span class="ow">in</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'src'</span><span class="p">):</span>
                    <span class="n">thumbnail_url</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'src'</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">thumbnail_url</span>

        <span class="k">return</span> <span class="n">thumbnail_url</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_geojson">
<code class="highlight language-python">
ee_export_geojson<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports Earth Engine FeatureCollection to geojson.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>Output file name. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Exports Earth Engine FeatureCollection to geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        filename (str): Output file name. Defaults to None.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'.geojson'</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'geojson'</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file type must be geojson.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'.geo'</span><span class="p">]</span> <span class="o">+</span> <span class="n">selectors</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"selectors must be a list, such as ['attribute1', 'attribute2']"</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allowed_attributes</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">attribute</span> <span class="ow">in</span> <span class="n">allowed_attributes</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Attributes must be one chosen from: </span><span class="si">{}</span><span class="s1"> '</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_attributes</span><span class="p">)))</span>
                <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># print('Generating URL ...')</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
            <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># print('Downloading data from {}\nPlease wait ...'.format(url))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading. </span><span class="se">\n</span><span class="s1"> Retrying ...'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">filter_polygons</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">new_ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
                    <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">geojson</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_image">
<code class="highlight language-python">
ee_export_image<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports an ee.Image as a GeoTIFF.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The ee.Image to download.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>Output filename for the exported image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file_per_band</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to produce a different GeoTIFF per band. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Exports an ee.Image as a GeoTIFF.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image to download.</span>
<span class="sd">        filename (str): Output filename for the exported image.</span>
<span class="sd">        scale (float, optional): A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        crs (str, optional): A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</span>
<span class="sd">        region (object, optional): A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        file_per_band (bool, optional): Whether to produce a different GeoTIFF per band. Defaults to False.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">filename_zip</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.tif'</span><span class="p">,</span> <span class="s1">'.zip'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">!=</span> <span class="s1">'tif'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The filename must end with .tif'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">'filePerBand'</span><span class="p">:</span> <span class="n">file_per_band</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'scale'</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>
        <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">)</span>
        <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">z</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_per_band</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_image_collection">
<code class="highlight language-python">
ee_export_image_collection<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports an ImageCollection as GeoTIFFs.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The ee.Image to download.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the exported images.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file_per_band</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to produce a different GeoTIFF per band. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Exports an ImageCollection as GeoTIFFs.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image to download.</span>
<span class="sd">        out_dir (str): The output directory for the exported images.</span>
<span class="sd">        scale (float, optional): A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        crs (str, optional): A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</span>
<span class="sd">        region (object, optional): A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        file_per_band (bool, optional): Whether to produce a different GeoTIFF per band. Defaults to False.</span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.ImageCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Total number of images: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:index'</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.tif'</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Exporting </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
            <span class="n">ee_export_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                            <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="n">file_per_band</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_image_collection_to_drive">
<code class="highlight language-python">
ee_export_image_collection_to_drive<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">10000000000000.0</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{})</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a batch task to export an ImageCollection as raster images to Google Drive.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The image to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>descriptions</code></td>
<td><code>list</code></td>
<td>
<p>A list of human-readable names of the tasks. </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>folder</code></td>
<td><code>str</code></td>
<td>
<p>The Google Drive Folder that the export will reside in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>Resolution in meters per pixel. Defaults to 10 times of the image resolution.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>CRS to use for the exported image.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_pixels</code></td>
<td><code>int</code></td>
<td>
<p>Restrict the number of pixels in the export. Defaults to 1.0E13.</p>
</td>
<td><code>10000000000000.0</code></td>
</tr>
<tr>
<td><code>file_format</code></td>
<td><code>str</code></td>
<td>
<p>The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</p>
</td>
<td><code>'GeoTIFF'</code></td>
</tr>
<tr>
<td><code>format_options</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">1.0E13</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">"""Creates a batch task to export an ImageCollection as raster images to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to export.</span>
<span class="sd">        descriptions (list): A list of human-readable names of the tasks. </span>
<span class="sd">        folder (str, optional): The Google Drive Folder that the export will reside in. Defaults to None.</span>
<span class="sd">        region (object, optional): A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</span>
<span class="sd">        scale (float, optional): Resolution in meters per pixel. Defaults to 10 times of the image resolution.</span>
<span class="sd">        crs (str, optional): CRS to use for the exported image.. Defaults to None.</span>
<span class="sd">        max_pixels (int, optional): Restrict the number of pixels in the export. Defaults to 1.0E13.</span>
<span class="sd">        file_format (str, optional): The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</span>
<span class="sd">        format_options (dict, optional): A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.ImageCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Total number of images: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">descriptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">descriptions</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The number of descriptions is not equal to the number of images.'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">descriptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">descriptions</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:index'</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">images</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ee_export_image_to_drive</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">crs</span><span class="p">,</span> <span class="n">max_pixels</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">format_options</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_image_to_drive">
<code class="highlight language-python">
ee_export_image_to_drive<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">10000000000000.0</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{})</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a batch task to export an Image as a raster to Google Drive.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The image to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>str</code></td>
<td>
<p>A human-readable name of the task. </p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>folder</code></td>
<td><code>str</code></td>
<td>
<p>The Google Drive Folder that the export will reside in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>Resolution in meters per pixel. Defaults to 10 times of the image resolution.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>CRS to use for the exported image.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_pixels</code></td>
<td><code>int</code></td>
<td>
<p>Restrict the number of pixels in the export. Defaults to 1.0E13.</p>
</td>
<td><code>10000000000000.0</code></td>
</tr>
<tr>
<td><code>file_format</code></td>
<td><code>str</code></td>
<td>
<p>The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</p>
</td>
<td><code>'GeoTIFF'</code></td>
</tr>
<tr>
<td><code>format_options</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">1.0E13</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">"""Creates a batch task to export an Image as a raster to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to export.</span>
<span class="sd">        description (str): A human-readable name of the task. </span>
<span class="sd">        folder (str, optional): The Google Drive Folder that the export will reside in. Defaults to None.</span>
<span class="sd">        region (object, optional): A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</span>
<span class="sd">        scale (float, optional): Resolution in meters per pixel. Defaults to 10 times of the image resolution.</span>
<span class="sd">        crs (str, optional): CRS to use for the exported image.. Defaults to None.</span>
<span class="sd">        max_pixels (int, optional): Restrict the number of pixels in the export. Defaults to 1.0E13.</span>
<span class="sd">        file_format (str, optional): The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</span>
<span class="sd">        format_options (dict, optional): A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">folder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'driveFolder'</span><span class="p">]</span> <span class="o">=</span> <span class="n">folder</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'scale'</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'maxPixels'</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_pixels</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'fileFormat'</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_format</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'formatOptions'</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_options</span>

        <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Exporting </span><span class="si">{}</span><span class="s1"> ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">description</span><span class="p">))</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_vector">
<code class="highlight language-python">
ee_export_vector<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports Earth Engine FeatureCollection to other formats, including shp, csv, json, kml, and kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>Output file name.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Exports Earth Engine FeatureCollection to other formats, including shp, csv, json, kml, and kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        filename (str): Output file name.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'ee_object must be an ee.FeatureCollection'</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'geojson'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="c1"># allowed_formats = ['csv', 'kml', 'kmz']</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'shp'</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.shp'</span><span class="p">,</span> <span class="s1">'.zip'</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Earth Engine no longer supports downloading featureCollection as shapefile or json. </span><span class="se">\n</span><span class="s1">Please use geemap.ee_export_vector_to_drive() to export featureCollection to Google Drive.'</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'csv'</span><span class="p">:</span>
            <span class="c1"># remove .geo coordinate field</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">".*"</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'geojson'</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'.geo'</span><span class="p">]</span> <span class="o">+</span> <span class="n">selectors</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"selectors must be a list, such as ['attribute1', 'attribute2']"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allowed_attributes</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">attribute</span> <span class="ow">in</span> <span class="n">allowed_attributes</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Attributes must be one chosen from: </span><span class="si">{}</span><span class="s1"> '</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_attributes</span><span class="p">)))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
            <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading. </span><span class="se">\n</span><span class="s1"> Retrying ...'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">filter_polygons</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">new_ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
                    <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'shp'</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.zip'</span><span class="p">,</span> <span class="s1">'.shp'</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_export_vector_to_drive">
<code class="highlight language-python">
ee_export_vector_to_drive<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'shp'</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports Earth Engine FeatureCollection to Google Drive. other formats, including shp, csv, json, kml, and kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>str</code></td>
<td>
<p>File name of the output file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>folder</code></td>
<td><code>str</code></td>
<td>
<p>Folder name within Google Drive to save the exported file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file_format</code></td>
<td><code>str</code></td>
<td>
<p>The supported file format include shp, csv, json, kml, kmz, and TFRecord. Defaults to 'shp'.</p>
</td>
<td><code>'shp'</code></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>The list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'shp'</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Exports Earth Engine FeatureCollection to Google Drive. other formats, including shp, csv, json, kml, and kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        description (str): File name of the output file.</span>
<span class="sd">        folder (str): Folder name within Google Drive to save the exported file.</span>
<span class="sd">        file_format (str, optional): The supported file format include shp, csv, json, kml, kmz, and TFRecord. Defaults to 'shp'.</span>
<span class="sd">        selectors (list, optional): The list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">,</span> <span class="s1">'tfrecord'</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">file_format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">task_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'folder'</span><span class="p">:</span> <span class="n">folder</span><span class="p">,</span>
        <span class="s1">'fileFormat'</span><span class="p">:</span> <span class="n">file_format</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">task_config</span><span class="p">[</span><span class="s1">'selectors'</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectors</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">file_format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'csv'</span><span class="p">):</span>
        <span class="c1"># remove .geo coordinate field</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">".*"</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'Exporting </span><span class="si">{}</span><span class="s1">...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">description</span><span class="p">))</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">toDrive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="o">**</span><span class="n">task_config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_function_tree">
<code class="highlight language-python">
ee_function_tree<span class="p">(</span><span class="n">name</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Construct the tree structure based on an Earth Engine function. For example, the function "ee.Algorithms.FMask.matchClouds" will return a list ["ee.Algorithms", "ee.Algorithms.FMask", "ee.Algorithms.FMask.matchClouds"]</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the Earth Engine function</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>The list for parent functions.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_function_tree</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Construct the tree structure based on an Earth Engine function. For example, the function "ee.Algorithms.FMask.matchClouds" will return a list ["ee.Algorithms", "ee.Algorithms.FMask", "ee.Algorithms.FMask.matchClouds"]</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the Earth Engine function</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: The list for parent functions.</span>
<span class="sd">    """</span>
    <span class="n">func_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'ee'</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">func_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'.'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">func_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'.'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">func_list</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided function name is invalid.'</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_initialize">
<code class="highlight language-python">
ee_initialize<span class="p">(</span><span class="n">token_name</span><span class="o">=</span><span class="s1">'EARTHENGINE_TOKEN'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Authenticates Earth Engine and initialize an Earth Engine session</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_initialize</span><span class="p">(</span><span class="n">token_name</span><span class="o">=</span><span class="s1">'EARTHENGINE_TOKEN'</span><span class="p">):</span>
    <span class="sd">"""Authenticates Earth Engine and initialize an Earth Engine session</span>

<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ee_token</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ee_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">credential</span> <span class="o">=</span> <span class="s1">'{"refresh_token":"</span><span class="si">%s</span><span class="s1">"}'</span> <span class="o">%</span> <span class="n">ee_token</span>
            <span class="n">credential_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">"~/.config/earthengine/"</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">credential_file_path</span> <span class="o">+</span> <span class="s1">'credentials'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">credential</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">in_colab_shell</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">credentials_in_drive</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">credentials_in_colab</span><span class="p">()):</span>
                <span class="n">copy_credentials_to_colab</span><span class="p">()</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">credentials_in_colab</span><span class="p">:</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Authenticate</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">is_drive_mounted</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">credentials_in_drive</span><span class="p">()):</span>
                    <span class="n">copy_credentials_to_drive</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_drive_mounted</span><span class="p">():</span>
                    <span class="n">copy_credentials_to_drive</span><span class="p">()</span>

        <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Authenticate</span><span class="p">()</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_search">
<code class="highlight language-python">
ee_search<span class="p">(</span><span class="n">asset_limit</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Search Earth Engine API and user assets. If you received a warning (IOPub message rate exceeded) in Jupyter notebook, you can relaunch Jupyter notebook using the following command:
    jupyter notebook --NotebookApp.iopub_msg_rate_limit=10000</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>asset_limit</code></td>
<td><code>int</code></td>
<td>
<p>The number of assets to display for each asset type, i.e., Image, ImageCollection, and FeatureCollection. Defaults to 100.</p>
</td>
<td><code>100</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_search</span><span class="p">(</span><span class="n">asset_limit</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="sd">"""Search Earth Engine API and user assets. If you received a warning (IOPub message rate exceeded) in Jupyter notebook, you can relaunch Jupyter notebook using the following command:</span>
<span class="sd">        jupyter notebook --NotebookApp.iopub_msg_rate_limit=10000</span>

<span class="sd">    Args:</span>
<span class="sd">        asset_limit (int, optional): The number of assets to display for each asset type, i.e., Image, ImageCollection, and FeatureCollection. Defaults to 100.</span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Flags</span><span class="p">:</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repos</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">docs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">docs_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">asset_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">asset_import</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">repos</span> <span class="o">=</span> <span class="n">repos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">docs</span> <span class="o">=</span> <span class="n">docs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assets</span> <span class="o">=</span> <span class="n">assets</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">docs_dict</span> <span class="o">=</span> <span class="n">docs_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">asset_dict</span> <span class="o">=</span> <span class="n">asset_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">asset_import</span> <span class="o">=</span> <span class="n">asset_import</span>

    <span class="n">flags</span> <span class="o">=</span> <span class="n">Flags</span><span class="p">()</span>

    <span class="n">search_type</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButtons</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">'Scripts'</span><span class="p">,</span> <span class="s1">'Docs'</span><span class="p">,</span> <span class="s1">'Assets'</span><span class="p">],</span>
        <span class="n">tooltips</span><span class="o">=</span><span class="p">[</span><span class="s1">'Search Earth Engine Scripts'</span><span class="p">,</span>
                  <span class="s1">'Search Earth Engine API'</span><span class="p">,</span> <span class="s1">'Search Earth Engine Assets'</span><span class="p">],</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s1">'primary'</span>
    <span class="p">)</span>
    <span class="n">search_type</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_width</span> <span class="o">=</span> <span class="s1">'100px'</span>

    <span class="n">search_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
        <span class="n">placeholder</span><span class="o">=</span><span class="s1">'Filter scripts...'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">'Loading...'</span><span class="p">)</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">'310px'</span>

    <span class="n">tree_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>

    <span class="n">left_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">right_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>
    <span class="n">output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">output_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s1">'650px'</span>

    <span class="n">search_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
    <span class="n">search_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">]</span>
    <span class="n">display</span><span class="p">(</span><span class="n">search_widget</span><span class="p">)</span>

    <span class="n">repo_tree</span><span class="p">,</span> <span class="n">repo_output</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">build_repo_tree</span><span class="p">()</span>
    <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">repo_tree</span><span class="p">]</span>
    <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">repo_output</span><span class="p">]</span>

    <span class="n">flags</span><span class="o">.</span><span class="n">repos</span> <span class="o">=</span> <span class="n">repo_tree</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">''</span>

    <span class="k">def</span> <span class="nf">search_type_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">''</span>

        <span class="n">output_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Scripts'</span><span class="p">:</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s1">'Filter scripts...'</span>
            <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">repo_tree</span><span class="p">]</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">repo_output</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">change</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Docs'</span><span class="p">:</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s1">'Filter methods...'</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'Loading...'</span>
            <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">search_box</span><span class="p">,</span> <span class="n">tree_widget</span><span class="p">]</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_widget</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">flags</span><span class="o">.</span><span class="n">docs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">api_dict</span> <span class="o">=</span> <span class="n">read_api_csv</span><span class="p">()</span>
                <span class="n">ee_api_tree</span><span class="p">,</span> <span class="n">tree_dict</span> <span class="o">=</span> <span class="n">build_api_tree</span><span class="p">(</span>
                    <span class="n">api_dict</span><span class="p">,</span> <span class="n">output_widget</span><span class="p">)</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">docs</span> <span class="o">=</span> <span class="n">ee_api_tree</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">docs_dict</span> <span class="o">=</span> <span class="n">tree_dict</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ee_api_tree</span> <span class="o">=</span> <span class="n">flags</span><span class="o">.</span><span class="n">docs</span>
            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">display</span><span class="p">(</span><span class="n">ee_api_tree</span><span class="p">)</span>
                <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_widget</span><span class="p">]</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">''</span>
        <span class="k">elif</span> <span class="n">change</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Assets'</span><span class="p">:</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s1">'Filter assets...'</span>
            <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_type</span><span class="p">,</span> <span class="n">search_box</span><span class="p">,</span> <span class="n">tree_widget</span><span class="p">]</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_widget</span><span class="p">]</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'Loading...'</span>
            <span class="k">if</span> <span class="n">flags</span><span class="o">.</span><span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">asset_tree</span><span class="p">,</span> <span class="n">asset_widget</span><span class="p">,</span> <span class="n">asset_dict</span> <span class="o">=</span> <span class="n">build_asset_tree</span><span class="p">(</span>
                    <span class="n">limit</span><span class="o">=</span><span class="n">asset_limit</span><span class="p">)</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">assets</span> <span class="o">=</span> <span class="n">asset_tree</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">asset_dict</span> <span class="o">=</span> <span class="n">asset_dict</span>
                <span class="n">flags</span><span class="o">.</span><span class="n">asset_import</span> <span class="o">=</span> <span class="n">asset_widget</span>

            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="n">display</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">assets</span><span class="p">)</span>
            <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">flags</span><span class="o">.</span><span class="n">asset_import</span><span class="p">]</span>
            <span class="n">search_box</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">''</span>

    <span class="n">search_type</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">search_type_changed</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s1">'value'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">search_box_callback</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">search_type</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">'Docs'</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">'Loading...'</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">docs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">'Searching...'</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">search_api_tree</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">flags</span><span class="o">.</span><span class="n">docs_dict</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">sub_tree</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">search_type</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">'Assets'</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">'Loading...'</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">assets</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">'Searching...'</span><span class="p">)</span>
                    <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">search_api_tree</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">flags</span><span class="o">.</span><span class="n">asset_dict</span><span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">sub_tree</span><span class="p">)</span>

    <span class="n">search_box</span><span class="o">.</span><span class="n">on_submit</span><span class="p">(</span><span class="n">search_box_callback</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_tile_layer">
<code class="highlight language-python">
ee_tile_layer<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Layer untitled'</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts and Earth Engine layer to ipyleaflet TileLayer.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>Collection|Feature|Image|MapId</code></td>
<td>
<p>The object to add to the map.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>The visualization parameters. Defaults to {}.</p>
</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the layer. Defaults to 'Layer untitled'.</p>
</td>
<td><code>'Layer untitled'</code></td>
</tr>
<tr>
<td><code>shown</code></td>
<td><code>bool</code></td>
<td>
<p>A flag indicating whether the layer should be on by default. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>opacity</code></td>
<td><code>float</code></td>
<td>
<p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_tile_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s1">'Layer untitled'</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Converts and Earth Engine layer to ipyleaflet TileLayer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to 'Layer untitled'.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer's opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="n">image</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="n">err_str</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n\n</span><span class="s2">The image argument in 'addLayer' function must be an instace of one of ee.Image, ee.Geometry, ee.Feature or ee.FeatureCollection."</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">err_str</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">)</span>

        <span class="n">width</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="s1">'width'</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s1">'width'</span><span class="p">]</span>

        <span class="n">color</span> <span class="o">=</span> <span class="s1">'000000'</span>

        <span class="k">if</span> <span class="s1">'color'</span> <span class="ow">in</span> <span class="n">vis_params</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">vis_params</span><span class="p">[</span><span class="s1">'color'</span><span class="p">]</span>

        <span class="n">image_fill</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'fillColor'</span><span class="p">:</span> <span class="n">color</span><span class="p">})</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
        <span class="n">image_outline</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">style</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'color'</span><span class="p">:</span> <span class="n">color</span><span class="p">,</span> <span class="s1">'fillColor'</span><span class="p">:</span> <span class="s1">'00000000'</span><span class="p">,</span> <span class="s1">'width'</span><span class="p">:</span> <span class="n">width</span><span class="p">})</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">image_fill</span><span class="o">.</span><span class="n">blend</span><span class="p">(</span><span class="n">image_outline</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">imagecollection</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>

    <span class="n">map_id_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">getMapId</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">map_id_dict</span><span class="p">[</span><span class="s1">'tile_fetcher'</span><span class="p">]</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s1">'Google Earth Engine'</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="kc">True</span>
        <span class="c1"># visible=shown</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">tile_layer</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_to_csv">
<code class="highlight language-python">
ee_to_csv<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads an ee.FeatureCollection as a CSV file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The output filepath of the CSV file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_csv</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Downloads an ee.FeatureCollection as a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection</span>
<span class="sd">        filename (str): The output filepath of the CSV file.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.csv'</span><span class="p">):</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="o">=</span><span class="n">ee_object</span><span class="p">,</span>
                             <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The filename must end with .csv'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_to_geojson">
<code class="highlight language-python">
ee_to_geojson<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts Earth Engine object to geojson.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>An Earth Engine object.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>GeoJSON object.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Converts Earth Engine object to geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An Earth Engine object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: GeoJSON object.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">json_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">out_json</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">)):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">))</span>
                <span class="n">geojson</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>
                <span class="n">geojson</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="n">dumps</span><span class="p">({</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"FeatureCollection"</span><span class="p">,</span> <span class="s2">"features"</span><span class="p">:</span> <span class="n">json_object</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
                <span class="n">geojson</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">json_object</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Could not convert the Earth Engine object to geojson"</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_to_numpy">
<code class="highlight language-python">
ee_to_numpy<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts a rectangular region of pixels from an image into a 2D numpy array per band.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The image to sample.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>The list of band names to extract. Please make sure that all bands have the same spatial resolution. Defaults to None. </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region whose projected bounding box is used to sample the image. The maximum number of pixels you can export is 262,144. Resampling and reprojecting all bands to a fixed scale can be useful. Defaults to the footprint in each band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>properties</code></td>
<td><code>list</code></td>
<td>
<p>The properties to copy over from the sampled image. Defaults to all non-system properties.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>default_value</code></td>
<td><code>float</code></td>
<td>
<p>A default value used when a sampled pixel is masked or outside a band's footprint. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>array</code></td>
<td>
<p>A 3D numpy array.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_numpy</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Extracts a rectangular region of pixels from an image into a 2D numpy array per band.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to sample.</span>
<span class="sd">        bands (list, optional): The list of band names to extract. Please make sure that all bands have the same spatial resolution. Defaults to None. </span>
<span class="sd">        region (object, optional): The region whose projected bounding box is used to sample the image. The maximum number of pixels you can export is 262,144. Resampling and reprojecting all bands to a fixed scale can be useful. Defaults to the footprint in each band.</span>
<span class="sd">        properties (list, optional): The properties to copy over from the sampled image. Defaults to all non-system properties.</span>
<span class="sd">        default_value (float, optional): A default value used when a sampled pixel is masked or outside a band's footprint. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array: A 3D numpy array.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">band_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span>
        <span class="n">band_arrs</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">sampleRectangle</span><span class="p">(</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="n">default_value</span><span class="p">)</span>
        <span class="n">band_values</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">:</span>
            <span class="n">band_arr</span> <span class="o">=</span> <span class="n">band_arrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">band_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">band_arr</span><span class="p">)</span>
            <span class="n">band_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_value</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">(</span><span class="n">band_values</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_to_shp">
<code class="highlight language-python">
ee_to_shp<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads an ee.FeatureCollection as a shapefile.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The output filepath of the shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_shp</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Downloads an ee.FeatureCollection as a shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection</span>
<span class="sd">        filename (str): The output filepath of the shapefile.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.shp'</span><span class="p">):</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="o">=</span><span class="n">ee_object</span><span class="p">,</span>
                             <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The filename must end with .shp'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.ee_user_id">
<code class="highlight language-python">
ee_user_id<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets Earth Engine account user id.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>A string containing the user id.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_user_id</span><span class="p">():</span>
    <span class="sd">"""Gets Earth Engine account user id.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing the user id.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="n">roots</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">getAssetRoots</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">getAssetRoots</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">root</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"projects/earthengine-legacy/assets/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">user_id</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.file_browser">
<code class="highlight language-python">
file_browser<span class="p">(</span><span class="n">in_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_root_node</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">search_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_import</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">return_sep_widgets</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a simple file browser and text editor.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_dir</code></td>
<td><code>str</code></td>
<td>
<p>The input directory. Defaults to None, which will use the current working directory.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>show_hidden</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show hidden files/folders. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>add_root_node</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add the input directory as a root node. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>search_description</code></td>
<td><code>str</code></td>
<td>
<p>The description of the search box. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>use_import</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the import button. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>return_sep_widgets</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to return the results as separate widgets. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>An ipywidget.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">file_browser</span><span class="p">(</span><span class="n">in_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show_hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_root_node</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">search_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_import</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">return_sep_widgets</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Creates a simple file browser and text editor.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_dir (str, optional): The input directory. Defaults to None, which will use the current working directory.</span>
<span class="sd">        show_hidden (bool, optional): Whether to show hidden files/folders. Defaults to False.</span>
<span class="sd">        add_root_node (bool, optional): Whether to add the input directory as a root node. Defaults to True.</span>
<span class="sd">        search_description (str, optional): The description of the search box. Defaults to None.</span>
<span class="sd">        use_import (bool, optional): Whether to show the import button. Defaults to False.</span>
<span class="sd">        return_sep_widgets (bool, optional): Whether to return the results as separate widgets. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ipywidget.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">platform</span>
    <span class="k">if</span> <span class="n">in_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">in_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided directory does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">in_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided path is not a valid directory.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sep</span> <span class="o">=</span> <span class="s1">'/'</span>
    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"Windows"</span><span class="p">:</span>
        <span class="n">sep</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\\</span><span class="s1">'</span>

    <span class="k">if</span> <span class="n">in_dir</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">sep</span><span class="p">):</span>
        <span class="n">in_dir</span> <span class="o">=</span> <span class="n">in_dir</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">full_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
    <span class="n">left_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">right_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">()</span>

    <span class="n">import_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">'import'</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s1">'primary'</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="s1">'import the content to a new cell'</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">import_btn</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">'70px'</span>
    <span class="n">path_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
    <span class="n">path_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">min_width</span> <span class="o">=</span> <span class="s1">'400px'</span>
    <span class="c1"># path_widget.layout.max_width = '400px'</span>
    <span class="n">save_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">'Save'</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s1">'primary'</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="s1">'Save edits to file.'</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">info_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">()</span>
    <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">path_widget</span><span class="p">,</span> <span class="n">save_widget</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">use_import</span><span class="p">:</span>
        <span class="n">info_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">import_btn</span><span class="p">,</span> <span class="n">path_widget</span><span class="p">,</span> <span class="n">save_widget</span><span class="p">]</span>

    <span class="n">text_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Textarea</span><span class="p">()</span>
    <span class="n">text_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">'630px'</span>
    <span class="n">text_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s1">'600px'</span>

    <span class="n">right_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">info_widget</span><span class="p">,</span> <span class="n">text_widget</span><span class="p">]</span>
    <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">search_description</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">search_description</span> <span class="o">=</span> <span class="s1">'Search files/folders...'</span>
    <span class="n">search_box</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">placeholder</span><span class="o">=</span><span class="n">search_description</span><span class="p">)</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s1">'310px'</span>
    <span class="n">tree_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">tree_widget</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s1">'310px'</span>
    <span class="n">tree_widget</span><span class="o">.</span><span class="n">overflow</span> <span class="o">=</span> <span class="s1">'auto'</span>

    <span class="n">left_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_box</span><span class="p">,</span> <span class="n">tree_widget</span><span class="p">]</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="n">multiple_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">tree_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">on_button_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

        <span class="n">text_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'The content has been saved successfully.'</span>
        <span class="n">save_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">path_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">out_file</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">out_dir</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">out_file</span><span class="p">))</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">out_file</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
            <span class="n">parent_node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">out_dir</span><span class="p">]</span>
            <span class="n">parent_node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">save_widget</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_button_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">import_btn_clicked</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">path_widget</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.py'</span><span class="p">)):</span>
            <span class="n">create_code_cell</span><span class="p">(</span><span class="n">text_widget</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">import_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">import_btn_clicked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">search_box_callback</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>

        <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Loading...'</span><span class="p">)</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Searching...'</span><span class="p">)</span>
                <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">search_api_tree</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">tree_dict</span><span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">sub_tree</span><span class="p">)</span>
    <span class="n">search_box</span><span class="o">.</span><span class="n">on_submit</span><span class="p">(</span><span class="n">search_box_callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_file_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]:</span>
            <span class="n">cur_node</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'owner'</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">cur_node</span> <span class="ow">is</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="ow">and</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">key</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.py'</span><span class="p">):</span>
                        <span class="n">import_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">import_btn</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                            <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">content</span>
                            <span class="n">text_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">key</span>
                            <span class="n">path_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">save_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">]</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">path_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">key</span>
                        <span class="n">path_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">save_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">text_widget</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">'Failed to open </span><span class="si">{}</span><span class="s1">.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">cur_node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                        <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">]</span>
                        <span class="k">return</span>
                    <span class="k">break</span>

    <span class="k">def</span> <span class="nf">handle_folder_click</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">[</span><span class="s1">'new'</span><span class="p">]:</span>
            <span class="n">full_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">left_widget</span><span class="p">]</span>
            <span class="n">text_widget</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">''</span>

    <span class="k">if</span> <span class="n">add_root_node</span><span class="p">:</span>
        <span class="n">root_name</span> <span class="o">=</span> <span class="n">in_dir</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">root_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">root_name</span><span class="p">)</span>
        <span class="n">tree_dict</span><span class="p">[</span><span class="n">in_dir</span><span class="p">]</span> <span class="o">=</span> <span class="n">root_node</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">root_node</span><span class="p">)</span>
        <span class="n">root_node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s1">'selected'</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">d_names</span><span class="p">,</span> <span class="n">f_names</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">in_dir</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">show_hidden</span><span class="p">:</span>
            <span class="n">folders</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">folder</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'.'</span><span class="p">):</span>
                    <span class="k">continue</span>
            <span class="k">for</span> <span class="n">d_name</span> <span class="ow">in</span> <span class="n">d_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'.'</span><span class="p">):</span>
                    <span class="n">d_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d_name</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">f_name</span> <span class="ow">in</span> <span class="n">f_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">f_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'.'</span><span class="p">):</span>
                    <span class="n">f_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>

        <span class="n">d_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">f_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">add_root_node</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="n">in_dir</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">d_name</span> <span class="ow">in</span> <span class="n">d_names</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">d_name</span><span class="p">)</span>
                <span class="n">tree_dict</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">in_dir</span><span class="p">,</span> <span class="n">d_name</span><span class="p">)]</span> <span class="o">=</span> <span class="n">node</span>
                <span class="n">tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s1">'selected'</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">!=</span> <span class="n">in_dir</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">root</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tree_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dir_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
            <span class="n">parent_node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">dir_name</span><span class="p">]</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">tree_dict</span><span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
            <span class="n">parent_node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_folder_click</span><span class="p">,</span> <span class="s1">'selected'</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">f_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">parent_node</span> <span class="o">=</span> <span class="n">tree_dict</span><span class="p">[</span><span class="n">root</span><span class="p">]</span>
            <span class="n">parent_node</span><span class="o">.</span><span class="n">opened</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">f_name</span> <span class="ow">in</span> <span class="n">f_names</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s1">'file'</span>
                <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f_name</span><span class="p">)</span>
                <span class="n">tree_dict</span><span class="p">[</span><span class="n">full_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
                <span class="n">parent_node</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">handle_file_click</span><span class="p">,</span> <span class="s1">'selected'</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">tree_widget</span><span class="p">:</span>
        <span class="n">tree_widget</span><span class="o">.</span><span class="n">clear_output</span><span class="p">()</span>
        <span class="n">display</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">return_sep_widgets</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">left_widget</span><span class="p">,</span> <span class="n">right_widget</span><span class="p">,</span> <span class="n">tree_dict</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">full_widget</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.filter_polygons">
<code class="highlight language-python">
filter_polygons<span class="p">(</span><span class="n">ftr</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts GeometryCollection to Polygon/MultiPolygon</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ftr</code></td>
<td><code>object</code></td>
<td>
<p>ee.Feature</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Feature</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter_polygons</span><span class="p">(</span><span class="n">ftr</span><span class="p">):</span>
    <span class="sd">"""Converts GeometryCollection to Polygon/MultiPolygon</span>

<span class="sd">    Args:</span>
<span class="sd">        ftr (object): ee.Feature</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Feature</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="n">geometries</span> <span class="o">=</span> <span class="n">ftr</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">geometries</span><span class="p">()</span>
    <span class="n">geometries</span> <span class="o">=</span> <span class="n">geometries</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">geo</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo</span><span class="p">))</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'geoType'</span><span class="p">,</span>  <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo</span><span class="p">)</span><span class="o">.</span><span class="n">type</span><span class="p">()))</span>

    <span class="n">polygons</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">geometries</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'geoType'</span><span class="p">,</span> <span class="s1">'Polygon'</span><span class="p">))</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">ftr</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.geocode">
<code class="highlight language-python">
geocode<span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Search location by address and lat/lon coordinates.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>location</code></td>
<td><code>str</code></td>
<td>
<p>Place name or address</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>max_rows</code></td>
<td><code>int</code></td>
<td>
<p>Maximum number of records to return. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>reverse</code></td>
<td><code>bool</code></td>
<td>
<p>Search place based on coordinates. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>Returns a list of locations.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">geocode</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Search location by address and lat/lon coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): Place name or address</span>
<span class="sd">        max_rows (int, optional): Maximum number of records to return. Defaults to 10.</span>
<span class="sd">        reverse (bool, optional): Search place based on coordinates. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Returns a list of locations.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The location must be a string.'</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">reverse</span><span class="p">:</span>

        <span class="n">locations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">addresses</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">arcgis</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">maxRows</span><span class="o">=</span><span class="n">max_rows</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
            <span class="n">address</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">address</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">addresses</span><span class="p">:</span>
                <span class="n">addresses</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
                <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">locations</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">','</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
                <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="s1">' '</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
                <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s1">'The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">arcgis</span><span class="p">(</span><span class="n">latlon</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">'reverse'</span><span class="p">)</span>
            <span class="n">locations</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">addresses</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
                <span class="n">address</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">address</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">addresses</span><span class="p">:</span>
                    <span class="n">addresses</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
                    <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">locations</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.geojson_to_ee">
<code class="highlight language-python">
geojson_to_ee<span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a geojson to ee.Geometry()</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geo_json</code></td>
<td><code>dict</code></td>
<td>
<p>A geojson geometry dictionary or file path.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td>
<p>An ee.Geometry object</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">geojson_to_ee</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Converts a geojson to ee.Geometry()</span>

<span class="sd">    Args:</span>
<span class="sd">        geo_json (dict): A geojson geometry dictionary or file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee_object: An ee.Geometry object</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="kn">import</span> <span class="nn">json</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">geo_json</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">geo_json</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">geo_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'FeatureCollection'</span><span class="p">:</span>
            <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s1">'features'</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">features</span>
        <span class="k">elif</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Feature'</span><span class="p">:</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'properties'</span><span class="p">][</span><span class="s1">'style'</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="s1">'radius'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>  <span class="c1"># Checks whether it is a circle</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">])</span>
                <span class="n">radius</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'properties'</span><span class="p">][</span><span class="s1">'style'</span><span class="p">][</span><span class="s1">'radius'</span><span class="p">]</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Point'</span><span class="p">:</span>  <span class="c1"># Checks whether it is a point</span>
                <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">]</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">latitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">longitude</span><span class="p">,</span> <span class="n">latitude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">],</span> <span class="s2">""</span><span class="p">,</span> <span class="n">geodesic</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">geom</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Could not convert the geojson to ee.Geometry()"</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Could not convert the geojson to ee.Geometry()"</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.has_transparency">
<code class="highlight language-python">
has_transparency<span class="p">(</span><span class="n">img</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether an image has transparency.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>a PIL Image object.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>True if it has transparency, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">has_transparency</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">"""Checks whether an image has transparency.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object):  a PIL Image object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if it has transparency, False otherwise.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">"P"</span><span class="p">:</span>
        <span class="n">transparent</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"transparency"</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">img</span><span class="o">.</span><span class="n">getcolors</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">transparent</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">"RGBA"</span><span class="p">:</span>
        <span class="n">extrema</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">getextrema</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">extrema</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">255</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.hex_to_rgb">
<code class="highlight language-python">
hex_to_rgb<span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">'FFFFFF'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts hex color to RGB color. </p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>value</code></td>
<td><code>str</code></td>
<td>
<p>Hex color code as a string. Defaults to 'FFFFFF'.</p>
</td>
<td><code>'FFFFFF'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>RGB color as a tuple.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">hex_to_rgb</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">'FFFFFF'</span><span class="p">):</span>
    <span class="sd">"""Converts hex color to RGB color. </span>

<span class="sd">    Args:</span>
<span class="sd">        value (str, optional): Hex color code as a string. Defaults to 'FFFFFF'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: RGB color as a tuple.</span>
<span class="sd">    """</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'#'</span><span class="p">)</span>
    <span class="n">lv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">lv</span><span class="o">//</span><span class="mi">3</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lv</span><span class="p">,</span> <span class="n">lv</span><span class="o">//</span><span class="mi">3</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.image_props">
<code class="highlight language-python">
image_props<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets image properties.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>ee.Image</code></td>
<td>
<p>The input image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>date_format</code></td>
<td><code>str</code></td>
<td>
<p>The output date format. Defaults to 'YYYY-MM-dd HH:mm:ss'.</p>
</td>
<td><code>'YYYY-MM-dd'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dd.Dictionary</code></td>
<td>
<p>The dictionary containing image properties.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_props</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">):</span>
    <span class="sd">"""Gets image properties.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image.</span>
<span class="sd">        date_format (str, optional): The output date format. Defaults to 'YYYY-MM-dd HH:mm:ss'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dd.Dictionary: The dictionary containing image properties.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input object must be an ee.Image'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">keys</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">'system:footprint'</span><span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">'system:bands'</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
    <span class="n">scales</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">())</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">scales</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span>
        <span class="mi">1</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">bands</span><span class="o">.</span><span class="n">getInfo</span><span class="p">(),</span> <span class="n">scales</span><span class="p">),</span> <span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">image_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
    <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">)</span>
                         <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'YYYY-MM-dd HH:mm:ss'</span><span class="p">)</span>
    <span class="c1"># time_end = ee.Date(img.get('system:time_end')).format('YYYY-MM-dd HH:mm:ss')</span>
    <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">())</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
        <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'YYYY-MM-dd HH:mm:ss'</span><span class="p">),</span> <span class="n">time_start</span><span class="p">)</span>
    <span class="n">asset_size</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:asset_size'</span><span class="p">))</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span>
        <span class="mf">1e6</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">()</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">' MB'</span><span class="p">))</span>

    <span class="n">props</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">,</span> <span class="n">time_end</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'system:asset_size'</span><span class="p">,</span> <span class="n">asset_size</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'NOMINAL_SCALE'</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'IMAGE_DATE'</span><span class="p">,</span> <span class="n">image_date</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">props</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.image_stats">
<code class="highlight language-python">
image_stats<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets image descriptive statistics.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>ee.Image</code></td>
<td>
<p>The input image to calculate descriptive statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.Dictionary</code></td>
<td>
<p>A dictionary containing the description statistics of the input image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_stats</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Gets image descriptive statistics.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image to calculate descriptive statistics.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Dictionary: A dictionary containing the description statistics of the input image.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">geemap.utils</span> <span class="k">as</span> <span class="nn">utils</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input object must be an ee.Image'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">stat_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'min'</span><span class="p">,</span> <span class="s1">'max'</span><span class="p">,</span> <span class="s1">'mean'</span><span class="p">,</span> <span class="s1">'std'</span><span class="p">,</span> <span class="s1">'sum'</span><span class="p">]</span>

    <span class="n">image_min</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">image_min_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_max</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">image_max_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_mean</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">image_mean_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_std</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">image_std_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_sum</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">image_sum_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>

    <span class="n">stat_results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span>
        <span class="p">[</span><span class="n">image_min</span><span class="p">,</span> <span class="n">image_max</span><span class="p">,</span> <span class="n">image_mean</span><span class="p">,</span> <span class="n">image_std</span><span class="p">,</span> <span class="n">image_sum</span><span class="p">])</span>

    <span class="n">stats</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">stat_types</span><span class="p">,</span> <span class="n">stat_results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">stats</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.in_colab_shell">
<code class="highlight language-python">
in_colab_shell<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Tests if the code is being executed within Google Colab.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">in_colab_shell</span><span class="p">():</span>
    <span class="sd">"""Tests if the code is being executed within Google Colab."""</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">google.colab</span>  <span class="c1"># pylint: disable=unused-variable</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.install_from_github">
<code class="highlight language-python">
install_from_github<span class="p">(</span><span class="n">url</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Install a package from a GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the GitHub repository.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">install_from_github</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">"""Install a package from a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the GitHub repository.</span>
<span class="sd">    """</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">)</span>

        <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">zip_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">'archive/master.zip'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s1">'-master.zip'</span>
        <span class="n">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">zip_url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                          <span class="n">out_dir</span><span class="o">=</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s1">'-master'</span><span class="p">)</span>
        <span class="n">pkg_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Installing </span><span class="si">{}</span><span class="s1">...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">))</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'pip install .'</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> has been installed successfully.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">))</span>
        <span class="c1"># print("\nPlease comment out 'install_from_github()' and restart the kernel to take effect:\nJupyter menu -&gt; Kernel -&gt; Restart &amp; Clear Output")</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.is_drive_mounted">
<code class="highlight language-python">
is_drive_mounted<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether Google Drive is mounted in Google Colab.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Google Drive is mounted, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_drive_mounted</span><span class="p">():</span>
    <span class="sd">"""Checks whether Google Drive is mounted in Google Colab.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    """</span>
    <span class="n">drive_path</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive'</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">drive_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.is_latlon_valid">
<code class="highlight language-python">
is_latlon_valid<span class="p">(</span><span class="n">location</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether a pair of coordinates is valid.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>location</code></td>
<td><code>str</code></td>
<td>
<p>A pair of latlon coordinates separated by comma or space.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if valid.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_latlon_valid</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">"""Checks whether a pair of coordinates is valid.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): A pair of latlon coordinates separated by comma or space.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if valid.</span>
<span class="sd">    """</span>
    <span class="n">latlon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="s1">','</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="s1">' '</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">90</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">90</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">180</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.is_tool">
<code class="highlight language-python">
is_tool<span class="p">(</span><span class="n">name</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Check whether <code>name</code> is on PATH and marked as executable.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_tool</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Check whether `name` is on PATH and marked as executable."""</span>

    <span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">which</span>

    <span class="k">return</span> <span class="n">which</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.landsat_timeseries">
<code class="highlight language-python">
landsat_timeseries<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates an annual Landsat ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 1984.</p>
</td>
<td><code>1984</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2020.</p>
</td>
<td><code>2020</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p>
</td>
<td><code>'06-10'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p>
</td>
<td><code>'09-20'</code></td>
</tr>
<tr>
<td><code>apply_fmask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Returns an ImageCollection containing annual Landsat images.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_timeseries</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Generates an annual Landsat ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.</span>

<span class="sd">    Args:</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2020.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: Returns an ImageCollection containing annual Landsat images.</span>
<span class="sd">    """</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Input and output parameters.</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">import</span> <span class="nn">datetime</span>

    <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
            <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Could not convert the provided roi to ee.Geometry'</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="c1">################################################################################</span>

    <span class="c1"># Setup vars to get dates.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&gt;=</span> <span class="mi">1984</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&lt;</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start year must be an integer &gt;= 1984.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&gt;</span> <span class="mi">1984</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The end year must be an integer &lt;= 2020.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start date and end date must be month-day, such as 06-10, 09-20'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">start_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">end_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input dates are invalid.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">days_between</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">):</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d2</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">((</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>

    <span class="n">n_days</span> <span class="o">=</span> <span class="n">days_between</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span><span class="p">,</span>
                          <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="n">start_month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">start_day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">end_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span>

    <span class="c1"># Define a collection filter by date, bounds, and quality.</span>
    <span class="k">def</span> <span class="nf">colFilter</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">aoi</span><span class="p">):</span>  <span class="c1"># , startDate, endDate):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">aoi</span><span class="p">))</span>

    <span class="c1"># Landsat collection preprocessingEnabled</span>
    <span class="c1"># Get Landsat surface reflectance collections for OLI, ETM+ and TM sensors.</span>
    <span class="n">LC08col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LC08/C01/T1_SR'</span><span class="p">)</span>
    <span class="n">LE07col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LE07/C01/T1_SR'</span><span class="p">)</span>
    <span class="n">LT05col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LT05/C01/T1_SR'</span><span class="p">)</span>
    <span class="n">LT04col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LT04/C01/T1_SR'</span><span class="p">)</span>

    <span class="c1"># Define a collection filter by date, bounds, and quality.</span>
    <span class="k">def</span> <span class="nf">colFilter</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">col</span>
               <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
               <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">))</span>
        <span class="c1"># .filter('CLOUD_COVER &lt; 5')</span>
        <span class="c1"># .filter('GEOMETRIC_RMSE_MODEL &lt; 15')</span>
        <span class="c1"># .filter('IMAGE_QUALITY == 9 || IMAGE_QUALITY_OLI == 9'))</span>

    <span class="c1"># Function to get and rename bands of interest from OLI.</span>
    <span class="k">def</span> <span class="nf">renameOli</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B5'</span><span class="p">,</span> <span class="s1">'B6'</span><span class="p">,</span> <span class="s1">'B7'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">]))</span>

    <span class="c1"># Function to get and rename bands of interest from ETM+.</span>
    <span class="k">def</span> <span class="nf">renameEtm</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'B1'</span><span class="p">,</span> <span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B5'</span><span class="p">,</span> <span class="s1">'B7'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">]))</span>

    <span class="c1"># Add NBR for LandTrendr segmentation.</span>
    <span class="k">def</span> <span class="nf">calcNbr</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">])</span>
                            <span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">'NBR'</span><span class="p">))</span><span class="o">.</span><span class="n">int16</span><span class="p">())</span>

    <span class="c1"># Define function to mask out clouds and cloud shadows in images.</span>
    <span class="c1"># Use CFmask band included in USGS Landsat SR image product.</span>
    <span class="k">def</span> <span class="nf">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">cloudShadowBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span>
        <span class="n">cloudsBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
        <span class="n">qa</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'pixel_qa'</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudShadowBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> \
            <span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudsBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>

    <span class="c1"># Define function to prepare OLI images.</span>
    <span class="k">def</span> <span class="nf">prepOli</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">img</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">renameOli</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">apply_fmask</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">orig</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
                <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'bicubic'</span><span class="p">))</span>

    <span class="c1"># Define function to prepare ETM+ images.</span>
    <span class="k">def</span> <span class="nf">prepEtm</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">img</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">renameEtm</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">apply_fmask</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">orig</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
               <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'bicubic'</span><span class="p">))</span>

    <span class="c1"># Get annual median collection.</span>
    <span class="k">def</span> <span class="nf">getAnnualComp</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">startDate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_month</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_day</span><span class="p">))</span>
        <span class="n">endDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">n_days</span><span class="p">),</span> <span class="s1">'day'</span><span class="p">)</span>

        <span class="c1"># Filter collections and prepare them for merging.</span>
        <span class="n">LC08coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LC08col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepOli</span><span class="p">)</span>
        <span class="n">LE07coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LE07col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepEtm</span><span class="p">)</span>
        <span class="n">LT05coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LT05col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepEtm</span><span class="p">)</span>
        <span class="n">LT04coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LT04col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepEtm</span><span class="p">)</span>

        <span class="c1"># Merge the collections.</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">LC08coly</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">LE07coly</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">LT05coly</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">LT04coly</span><span class="p">)</span>

        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">nBands</span> <span class="o">=</span> <span class="n">yearImg</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
            <span class="n">nBands</span><span class="p">,</span>
            <span class="n">yearImg</span><span class="p">,</span>
            <span class="n">dummyImg</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">calcNbr</span><span class="p">(</span><span class="n">yearImg</span><span class="p">)</span>
               <span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'year'</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s1">'system:time_start'</span><span class="p">:</span> <span class="n">startDate</span><span class="o">.</span><span class="n">millis</span><span class="p">(),</span> <span class="s1">'nBands'</span><span class="p">:</span> <span class="n">nBands</span><span class="p">}))</span>

    <span class="c1">################################################################################</span>

    <span class="c1"># Make a dummy image for missing years.</span>
    <span class="n">bandNames</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">([</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span>
                         <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">])</span>
    <span class="n">fillerValues</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bandNames</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
    <span class="n">dummyImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">fillerValues</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">bandNames</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">selfMask</span><span class="p">()</span><span class="o">.</span><span class="n">int16</span><span class="p">()</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Get a list of years</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Make list of annual image composites.</span>
    <span class="n">imgList</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">getAnnualComp</span><span class="p">)</span>

    <span class="c1"># Convert image composite list to collection</span>
    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="o">.</span><span class="n">fromImages</span><span class="p">(</span><span class="n">imgList</span><span class="p">)</span>

    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">imgCol</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span>
        <span class="n">roi</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'coordinates'</span><span class="p">:</span> <span class="n">roi</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()}))</span>

    <span class="k">return</span> <span class="n">imgCol</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.landsat_ts_gif">
<code class="highlight language-python">
landsat_ts_gif<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">])</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates a Landsat timelapse GIF image. This function is adapted from https://emaprlab.users.earthengine.app/view/lt-gee-time-series-animator. A huge thank you to Justin Braaten for sharing his fantastic work.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 1984.</p>
</td>
<td><code>1984</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p>
</td>
<td><code>'06-10'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p>
</td>
<td><code>'09-20'</code></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</p>
</td>
<td><code>['NIR', 'Red', 'Green']</code></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td><code>int</code></td>
<td>
<p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p>
</td>
<td><code>768</code></td>
</tr>
<tr>
<td><code>frames_per_second</code></td>
<td><code>int</code></td>
<td>
<p>Animation speed. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>apply_fmask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>nd_bands</code></td>
<td><code>list</code></td>
<td>
<p>A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).  </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>nd_threshold</code></td>
<td><code>float</code></td>
<td>
<p>The threshold for extacting pixels from the normalized difference band. </p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>nd_palette</code></td>
<td><code>list</code></td>
<td>
<p>The color palette to use for displaying the normalized difference band. </p>
</td>
<td><code>['black', 'blue']</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>File path to the output GIF image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_ts_gif</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">]):</span>
    <span class="sd">"""Generates a Landsat timelapse GIF image. This function is adapted from https://emaprlab.users.earthengine.app/view/lt-gee-time-series-animator. A huge thank you to Justin Braaten for sharing his fantastic work.</span>

<span class="sd">    Args:</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</span>
<span class="sd">        bands (list, optional): Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">        nd_bands (list, optional): A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).  </span>
<span class="sd">        nd_threshold (float, optional): The threshold for extacting pixels from the normalized difference band. </span>
<span class="sd">        nd_palette (list, optional): The color palette to use for displaying the normalized difference band. </span>

<span class="sd">    Returns:</span>
<span class="sd">        str: File path to the output GIF image.</span>
<span class="sd">    """</span>

    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
            <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided roi is invalid. It must be an ee.Geometry'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_gif</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">'landsat_ts_'</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.gif'</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must end with .gif'</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># elif not os.path.isfile(out_gif):</span>
    <span class="c1">#     print('The output file must be a file')</span>
    <span class="c1">#     return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">allowed_bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span>
                     <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">allowed_bands</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'You can only select 3 bands from the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_bands</span><span class="p">)))</span>

    <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nd_bands</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">allowed_bands</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nd_bands</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'You can only select two bands from the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_bands</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">landsat_timeseries</span><span class="p">(</span>
            <span class="n">roi</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'min'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'max'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4000</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'gamma'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">video_args</span> <span class="o">=</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'dimensions'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimensions</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'framesPerSecond'</span><span class="p">]</span> <span class="o">=</span> <span class="n">frames_per_second</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'EPSG:3857'</span>

        <span class="k">if</span> <span class="s1">'bands'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>

        <span class="k">if</span> <span class="s1">'min'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'min'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="s1">'max'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'max'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4000</span>

        <span class="k">if</span> <span class="s1">'gamma'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'gamma'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">download_ee_video</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nd_images</span> <span class="o">=</span> <span class="n">landsat_ts_norm_diff</span><span class="p">(</span>
                <span class="n">col</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="n">nd_bands</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="n">nd_threshold</span><span class="p">)</span>
            <span class="n">out_nd_gif</span> <span class="o">=</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">,</span> <span class="s1">'_nd.gif'</span><span class="p">)</span>
            <span class="n">landsat_ts_norm_diff_gif</span><span class="p">(</span><span class="n">nd_images</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="n">out_nd_gif</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                     <span class="n">palette</span><span class="o">=</span><span class="n">nd_palette</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="n">frames_per_second</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">out_gif</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.landsat_ts_norm_diff">
<code class="highlight language-python">
landsat_ts_norm_diff<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Computes a normalized difference index based on a Landsat timeseries.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>ee.ImageCollection</code></td>
<td>
<p>A Landsat timeseries.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>The bands to use for computing normalized difference. Defaults to ['Green', 'SWIR1'].</p>
</td>
<td><code>['Green', 'SWIR1']</code></td>
</tr>
<tr>
<td><code>threshold</code></td>
<td><code>float</code></td>
<td>
<p>The threshold to extract features. Defaults to 0.</p>
</td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.ImageCollection</code></td>
<td>
<p>An ImageCollection containing images with values greater than the specified threshold. </p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_ts_norm_diff</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">"""Computes a normalized difference index based on a Landsat timeseries.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection): A Landsat timeseries.</span>
<span class="sd">        bands (list, optional): The bands to use for computing normalized difference. Defaults to ['Green', 'SWIR1'].</span>
<span class="sd">        threshold (float, optional): The threshold to extract features. Defaults to 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.ImageCollection: An ImageCollection containing images with values greater than the specified threshold. </span>
<span class="sd">    """</span>
    <span class="n">nd_images</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">(</span>
        <span class="n">bands</span><span class="p">)</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
    <span class="k">return</span> <span class="n">nd_images</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.landsat_ts_norm_diff_gif">
<code class="highlight language-python">
landsat_ts_norm_diff_gif<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">],</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>[summary]</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>ee.ImageCollection</code></td>
<td>
<p>The normalized difference Landsat timeseires.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>palette</code></td>
<td><code>list</code></td>
<td>
<p>The palette to use for visualizing the timelapse. Defaults to ['black', 'blue']. The first color in the list is the background color.</p>
</td>
<td><code>['black', 'blue']</code></td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td><code>int</code></td>
<td>
<p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p>
</td>
<td><code>768</code></td>
</tr>
<tr>
<td><code>frames_per_second</code></td>
<td><code>int</code></td>
<td>
<p>Animation speed. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_ts_norm_diff_gif</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">],</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">"""[summary]</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection): The normalized difference Landsat timeseires.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        palette (list, optional): The palette to use for visualizing the timelapse. Defaults to ['black', 'blue']. The first color in the list is the background color.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: File path to the output animated GIF.</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'coordinates'</span><span class="p">)</span>
    <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_gif</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">'landsat_ts_nd_'</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.gif'</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'The output file must end with .gif'</span><span class="p">)</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'nd'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vis_params</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>
        <span class="n">vis_params</span><span class="p">[</span><span class="s1">'palette'</span><span class="p">]</span> <span class="o">=</span> <span class="n">palette</span>

    <span class="n">video_args</span> <span class="o">=</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'dimensions'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimensions</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'framesPerSecond'</span><span class="p">]</span> <span class="o">=</span> <span class="n">frames_per_second</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'EPSG:3857'</span>

    <span class="k">if</span> <span class="s1">'bands'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>

    <span class="n">download_ee_video</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out_gif</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.latlon_from_text">
<code class="highlight language-python">
latlon_from_text<span class="p">(</span><span class="n">location</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts latlon from text.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>location</code></td>
<td><code>str</code></td>
<td>
<p>A pair of latlon coordinates separated by comma or space.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns (lat, lon) if valid.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">latlon_from_text</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">"""Extracts latlon from text.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): A pair of latlon coordinates separated by comma or space.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns (lat, lon) if valid.</span>
<span class="sd">    """</span>
    <span class="n">latlon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">','</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="s1">' '</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">90</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">90</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">180</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.legend_from_ee">
<code class="highlight language-python">
legend_from_ee<span class="p">(</span><span class="n">ee_class_table</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page
such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</p>
<p>Value       Color   Description
0   1c0dff  Water
1   05450a  Evergreen needleleaf forest
2   086a10  Evergreen broadleaf forest
3   54a708  Deciduous needleleaf forest
4   78d203  Deciduous broadleaf forest
5   009900  Mixed forest
6   c6b044  Closed shrublands
7   dcd159  Open shrublands
8   dade48  Woody savannas
9   fbff13  Savannas
10  b6ff05  Grasslands
11  27ff87  Permanent wetlands
12  c24f44  Croplands
13  a5a5a5  Urban and built-up
14  ff6d4c  Cropland/natural vegetation mosaic
15  69fff8  Snow and ice
16  f9ffa4  Barren or sparsely vegetated
254 ffffff  Unclassified</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_class_table</code></td>
<td><code>str</code></td>
<td>
<p>An Earth Engine class table with triple quotes.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>Returns a legend dictionary that can be used to create a legend.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">legend_from_ee</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">):</span>
    <span class="sd">"""Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page</span>
<span class="sd">    such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</span>

<span class="sd">    Value	Color	Description</span>
<span class="sd">    0	1c0dff	Water</span>
<span class="sd">    1	05450a	Evergreen needleleaf forest</span>
<span class="sd">    2	086a10	Evergreen broadleaf forest</span>
<span class="sd">    3	54a708	Deciduous needleleaf forest</span>
<span class="sd">    4	78d203	Deciduous broadleaf forest</span>
<span class="sd">    5	009900	Mixed forest</span>
<span class="sd">    6	c6b044	Closed shrublands</span>
<span class="sd">    7	dcd159	Open shrublands</span>
<span class="sd">    8	dade48	Woody savannas</span>
<span class="sd">    9	fbff13	Savannas</span>
<span class="sd">    10	b6ff05	Grasslands</span>
<span class="sd">    11	27ff87	Permanent wetlands</span>
<span class="sd">    12	c24f44	Croplands</span>
<span class="sd">    13	a5a5a5	Urban and built-up</span>
<span class="sd">    14	ff6d4c	Cropland/natural vegetation mosaic</span>
<span class="sd">    15	69fff8	Snow and ice</span>
<span class="sd">    16	f9ffa4	Barren or sparsely vegetated</span>
<span class="sd">    254	ffffff	Unclassified</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_class_table (str): An Earth Engine class table with triple quotes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Returns a legend dictionary that can be used to create a legend.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ee_class_table</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Value</span><span class="se">\t</span><span class="s1">Color</span><span class="se">\t</span><span class="s1">Description'</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="n">legend_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">legend_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

        <span class="k">return</span> <span class="n">legend_dict</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.load_GeoTIFF">
<code class="highlight language-python">
load_GeoTIFF<span class="p">(</span><span class="n">URL</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Loads a Cloud Optimized GeoTIFF (COG) as an Image. Only Google Cloud Storage is supported. The URL can be one of the following formats:
Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URL</code></td>
<td><code>str</code></td>
<td>
<p>The Cloud Storage URL of the GeoTIFF to load.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.Image</code></td>
<td>
<p>an Earth Engine image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">load_GeoTIFF</span><span class="p">(</span><span class="n">URL</span><span class="p">):</span>
    <span class="sd">"""Loads a Cloud Optimized GeoTIFF (COG) as an Image. Only Google Cloud Storage is supported. The URL can be one of the following formats:</span>
<span class="sd">    Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</span>

<span class="sd">    Args:</span>
<span class="sd">        URL (str): The Cloud Storage URL of the GeoTIFF to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: an Earth Engine image.</span>
<span class="sd">    """</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'gs://'</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.tif'</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="n">cloud_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">loadGeoTIFF</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cloud_image</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.load_GeoTIFFs">
<code class="highlight language-python">
load_GeoTIFFs<span class="p">(</span><span class="n">URLs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Loads a list of Cloud Optimized GeoTIFFs (COG) as an ImageCollection. URLs is a list of URL, which can be one of the following formats:
Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URLs</code></td>
<td><code>list</code></td>
<td>
<p>A list of Cloud Storage URL of the GeoTIFF to load.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.ImageCollection</code></td>
<td>
<p>An Earth Engine ImageCollection.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">load_GeoTIFFs</span><span class="p">(</span><span class="n">URLs</span><span class="p">):</span>
    <span class="sd">"""Loads a list of Cloud Optimized GeoTIFFs (COG) as an ImageCollection. URLs is a list of URL, which can be one of the following formats:</span>
<span class="sd">    Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</span>

<span class="sd">    Args:</span>
<span class="sd">        URLs (list): A list of Cloud Storage URL of the GeoTIFF to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.ImageCollection: An Earth Engine ImageCollection.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">URLs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'The URLs argument must be a list.'</span><span class="p">)</span>

    <span class="n">URIs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">URL</span> <span class="ow">in</span> <span class="n">URLs</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'gs://'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.tif'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

        <span class="n">URIs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="n">URIs</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">URIs</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">URIs</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">uri</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">loadGeoTIFF</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.minimum_bounding_box">
<code class="highlight language-python">
minimum_bounding_box<span class="p">(</span><span class="n">geojson</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets the minimum bounding box for a geojson polygon.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geojson</code></td>
<td><code>dict</code></td>
<td>
<p>A geojson dictionary.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>Returns a tuple containing the minimum bounding box in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -120)).</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">):</span>
    <span class="sd">"""Gets the minimum bounding box for a geojson polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        geojson (dict): A geojson dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing the minimum bounding box in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -120)).</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">'geometry'</span> <span class="ow">in</span> <span class="n">geojson</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">lower_left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">])</span>  <span class="c1"># (lat, lon)</span>
        <span class="n">upper_right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]),</span> <span class="nb">max</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                                             <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">])</span>  <span class="c1"># (lat, lon)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="n">lower_left</span><span class="p">,</span> <span class="n">upper_right</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bounds</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># print(e)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.naip_timeseries">
<code class="highlight language-python">
naip_timeseries<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates NAIP annual timeseries</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>An ee.Geometry representing the region of interest. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timeseries. Defaults to2009.</p>
</td>
<td><code>2009</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timeseries. Defaults to 2018.</p>
</td>
<td><code>2018</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection representing annual NAIP imagery.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">naip_timeseries</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span><span class="p">):</span>
    <span class="sd">"""Creates NAIP annual timeseries</span>

<span class="sd">    Args:</span>
<span class="sd">        roi (object, optional): An ee.Geometry representing the region of interest. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timeseries. Defaults to2009.</span>
<span class="sd">        end_year (int, optional): Ending year for the timeseries. Defaults to 2018.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ee.ImageCollection representing annual NAIP imagery.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'USDA/NAIP/DOQQ'</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
                <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
                <span class="n">naip</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span> \
                    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">"system:band_names"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span>
                <span class="n">naip</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">naip</span><span class="p">)</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">return</span> <span class="n">naip</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">get_annual_NAIP</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.open_github">
<code class="highlight language-python">
open_github<span class="p">(</span><span class="n">subdir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Opens the GitHub repository for this package.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>subdir</code></td>
<td><code>str</code></td>
<td>
<p>Sub-directory of the repository. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">open_github</span><span class="p">(</span><span class="n">subdir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Opens the GitHub repository for this package.</span>

<span class="sd">    Args:</span>
<span class="sd">        subdir (str, optional): Sub-directory of the repository. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://github.com/giswqs/geemap'</span>

    <span class="k">if</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s1">'source'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">'/tree/master/geemap/'</span>
    <span class="k">elif</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s1">'examples'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">'/tree/master/examples'</span>
    <span class="k">elif</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s1">'tutorials'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">'/tree/master/tutorials'</span>

    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.open_image_from_url">
<code class="highlight language-python">
open_image_from_url<span class="p">(</span><span class="n">url</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Loads an image from the specified URL.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>URL of the image.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Image object.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">open_image_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">"""Loads an image from the specified URL.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): URL of the image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: Image object.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
    <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="c1"># if url.endswith('.gif'):</span>
        <span class="c1">#     out_dir = os.path.join(os.path.expanduser('~'), 'Downloads')</span>
        <span class="c1">#     if not os.path.exists(out_dir):</span>
        <span class="c1">#         os.makedirs(out_dir)</span>
        <span class="c1">#     a = urlparse(url)</span>
        <span class="c1">#     out_name = os.path.basename(a.path)</span>
        <span class="c1">#     out_path = os.path.join(out_dir, out_name)</span>
        <span class="c1">#     download_from_url(url, out_name, out_dir, unzip=False)</span>
        <span class="c1">#     img =  Image.open(out_path)</span>
        <span class="c1"># else:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">img</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.open_youtube">
<code class="highlight language-python">
open_youtube<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Opens the YouTube tutorials for geemap.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">open_youtube</span><span class="p">():</span>
    <span class="sd">"""Opens the YouTube tutorials for geemap.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://www.youtube.com/playlist?list=PLAxJ4-o7ZoPccOFv1dCwvGI6TYnirRTg3'</span>
    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.read_api_csv">
<code class="highlight language-python">
read_api_csv<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts Earth Engine API from a csv file and returns a dictionary containing information about each function.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>The dictionary containing information about each function, including name, description, function form, return type, arguments, html. </p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">read_api_csv</span><span class="p">():</span>
    <span class="sd">"""Extracts Earth Engine API from a csv file and returns a dictionary containing information about each function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The dictionary containing information about each function, including name, description, function form, return type, arguments, html. </span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">copy</span>
    <span class="kn">import</span> <span class="nn">csv</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"geemap"</span><span class="p">,</span> <span class="s2">"geemap.py"</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">'template'</span><span class="p">)</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s1">'ee_api_docs.csv'</span><span class="p">)</span>
    <span class="n">html_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s1">'ee_api_docs.html'</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">html_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">in_html_lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

    <span class="n">api_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">csv_reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">csv_reader</span><span class="p">:</span>

            <span class="n">out_html_lines</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">in_html_lines</span><span class="p">)</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">65</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">65</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s1">'function_name'</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">66</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">66</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s1">'function_description'</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'description'</span><span class="p">))</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">74</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">74</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s1">'function_usage'</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'function'</span><span class="p">))</span>
            <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">75</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">75</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s1">'function_returns'</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'returns'</span><span class="p">))</span>

            <span class="n">arguments</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'argument'</span><span class="p">)</span>
            <span class="n">types</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span>
            <span class="n">details</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'details'</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">'|'</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
                <span class="n">argument_items</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">argument_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">arguments</span><span class="p">]</span>

            <span class="k">if</span> <span class="s1">'|'</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
                <span class="n">types_items</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">types_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">types</span><span class="p">]</span>

            <span class="k">if</span> <span class="s1">'|'</span> <span class="ow">in</span> <span class="n">details</span><span class="p">:</span>
                <span class="n">details_items</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'|'</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">details_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">details</span><span class="p">]</span>

            <span class="n">out_argument_lines</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argument_items</span><span class="p">)):</span>
                <span class="n">in_argument_lines</span> <span class="o">=</span> <span class="n">in_html_lines</span><span class="p">[</span><span class="mi">87</span><span class="p">:</span><span class="mi">92</span><span class="p">]</span>
                <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s1">'function_argument'</span><span class="p">,</span> <span class="n">argument_items</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s1">'function_type'</span><span class="p">,</span> <span class="n">types_items</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_argument_lines</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="s1">'function_details'</span><span class="p">,</span> <span class="n">details_items</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
                <span class="n">out_argument_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">in_argument_lines</span><span class="p">))</span>

            <span class="n">out_html_lines</span> <span class="o">=</span> <span class="n">out_html_lines</span><span class="p">[:</span><span class="mi">87</span><span class="p">]</span> <span class="o">+</span> \
                <span class="n">out_argument_lines</span> <span class="o">+</span> <span class="n">out_html_lines</span><span class="p">[</span><span class="mi">92</span><span class="p">:]</span>

            <span class="n">contents</span> <span class="o">=</span> <span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_html_lines</span><span class="p">)</span>

            <span class="n">api_dict</span><span class="p">[</span><span class="n">line</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">'description'</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'description'</span><span class="p">),</span>
                <span class="s1">'function'</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'function'</span><span class="p">),</span>
                <span class="s1">'returns'</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'returns'</span><span class="p">),</span>
                <span class="s1">'argument'</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'argument'</span><span class="p">),</span>
                <span class="s1">'type'</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'type'</span><span class="p">),</span>
                <span class="s1">'details'</span><span class="p">:</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'details'</span><span class="p">),</span>
                <span class="s1">'html'</span><span class="p">:</span> <span class="n">contents</span>
            <span class="p">}</span>

    <span class="k">return</span> <span class="n">api_dict</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.reduce_gif_size">
<code class="highlight language-python">
reduce_gif_size<span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Reduces a GIF image using ffmpeg.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_gif</code></td>
<td><code>str</code></td>
<td>
<p>The input file path to the GIF image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the GIF image. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">reduce_gif_size</span><span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Reduces a GIF image using ffmpeg.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_gif (str): The input file path to the GIF image.</span>
<span class="sd">        out_gif (str, optional): The output file path to the GIF image. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">ffmpeg</span>
    <span class="kn">import</span> <span class="nn">shutil</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_tool</span><span class="p">(</span><span class="s1">'ffmpeg'</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'ffmpeg is not installed on your computer.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_gif</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input gif file does not exist.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_gif</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">in_gif</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">in_gif</span> <span class="o">==</span> <span class="n">out_gif</span><span class="p">:</span>
        <span class="n">tmp_gif</span> <span class="o">=</span> <span class="n">in_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">,</span> <span class="s1">'_tmp.gif'</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">tmp_gif</span><span class="p">)</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">tmp_gif</span><span class="p">)</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">in_gif</span><span class="p">)</span><span class="o">.</span><span class="n">overwrite_output</span><span class="p">()</span>
        <span class="n">ffmpeg</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmp_gif</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span><span class="o">.</span><span class="n">overwrite_output</span><span class="p">()</span>
        <span class="n">ffmpeg</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.rgb_to_hex">
<code class="highlight language-python">
rgb_to_hex<span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts RGB to hex color. In RGB color R stands for Red, G stands for Green, and B stands for Blue, and it ranges from the decimal value of 0  255.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb</code></td>
<td><code>tuple</code></td>
<td>
<p>RGB color code as a tuple of (red, green, blue). Defaults to (255, 255, 255).</p>
</td>
<td><code>(255, 255, 255)</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>hex color code</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">rgb_to_hex</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)):</span>
    <span class="sd">"""Converts RGB to hex color. In RGB color R stands for Red, G stands for Green, and B stands for Blue, and it ranges from the decimal value of 0  255.</span>

<span class="sd">    Args:</span>
<span class="sd">        rgb (tuple, optional): RGB color code as a tuple of (red, green, blue). Defaults to (255, 255, 255).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: hex color code</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="s1">'</span><span class="si">%02x%02x%02x</span><span class="s1">'</span> <span class="o">%</span> <span class="n">rgb</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.screen_capture">
<code class="highlight language-python">
screen_capture<span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Takes a full screenshot of the selected monitor.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>outfile</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the screenshot.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>monitor</code></td>
<td><code>int</code></td>
<td>
<p>The monitor to take the screenshot. Defaults to 1.</p>
</td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">screen_capture</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">"""Takes a full screenshot of the selected monitor.</span>

<span class="sd">    Args:</span>
<span class="sd">        outfile (str): The output file path to the screenshot.</span>
<span class="sd">        monitor (int, optional): The monitor to take the screenshot. Defaults to 1.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">mss</span> <span class="kn">import</span> <span class="n">mss</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">monitor</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The monitor number must be an integer.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">mss</span><span class="p">()</span> <span class="k">as</span> <span class="n">sct</span><span class="p">:</span>
            <span class="n">sct</span><span class="o">.</span><span class="n">shot</span><span class="p">(</span><span class="n">output</span><span class="o">=</span><span class="n">outfile</span><span class="p">,</span> <span class="n">mon</span><span class="o">=</span><span class="n">monitor</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">outfile</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.search_api_tree">
<code class="highlight language-python">
search_api_tree<span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">api_tree</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Search Earth Engine API and return functions containing the specified keywords</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>keywords</code></td>
<td><code>str</code></td>
<td>
<p>The keywords to search for.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>api_tree</code></td>
<td><code>dict</code></td>
<td>
<p>The dictionary containing the Earth Engine API tree.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>An ipytree object/widget.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">search_api_tree</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="n">api_tree</span><span class="p">):</span>
    <span class="sd">"""Search Earth Engine API and return functions containing the specified keywords</span>

<span class="sd">    Args:</span>
<span class="sd">        keywords (str): The keywords to search for.</span>
<span class="sd">        api_tree (dict): The dictionary containing the Earth Engine API tree.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ipytree object/widget.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">'ignore'</span><span class="p">)</span>

    <span class="n">sub_tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">api_tree</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">keywords</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">sub_tree</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">api_tree</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">sub_tree</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.search_ee_data">
<code class="highlight language-python">
search_ee_data<span class="p">(</span><span class="n">keywords</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Searches Earth Engine data catalog.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>keywords</code></td>
<td><code>str</code></td>
<td>
<p>Keywords to search for can be id, provider, tag and so on</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>Returns a lit of assets.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">search_ee_data</span><span class="p">(</span><span class="n">keywords</span><span class="p">):</span>
    <span class="sd">"""Searches Earth Engine data catalog.</span>

<span class="sd">    Args:</span>
<span class="sd">        keywords (str): Keywords to search for can be id, provider, tag and so on</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Returns a lit of assets.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'geeadd search --keywords "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">keywords</span><span class="p">))</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">start_index</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'['</span><span class="p">)</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">start_index</span><span class="p">:])</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">assets</span><span class="p">:</span>
            <span class="n">asset_dates</span> <span class="o">=</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'start_date'</span><span class="p">]</span> <span class="o">+</span> <span class="s1">' - '</span> <span class="o">+</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'end_date'</span><span class="p">]</span>
            <span class="n">asset_snippet</span> <span class="o">=</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'ee_id_snippet'</span><span class="p">]</span>
            <span class="n">start_index</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">"'"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">end_index</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span> <span class="n">start_index</span><span class="p">)</span>
            <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="p">[</span><span class="n">start_index</span><span class="p">:</span><span class="n">end_index</span><span class="p">]</span>

            <span class="n">asset</span><span class="p">[</span><span class="s1">'dates'</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_dates</span>
            <span class="n">asset</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_id</span>
            <span class="n">asset</span><span class="p">[</span><span class="s1">'uid'</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="s1">'_'</span><span class="p">)</span>
            <span class="c1"># asset['url'] = 'https://developers.google.com/earth-engine/datasets/catalog/' + asset['uid']</span>
            <span class="c1"># asset['thumbnail'] = 'https://mw1.google.com/ges/dd/images/{}_sample.png'.format(</span>
            <span class="c1">#     asset['uid'])</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.sentinel2_timeseries">
<code class="highlight language-python">
sentinel2_timeseries<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2015</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'01-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'12-31'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates an annual Sentinel 2 ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.
   Images include both level 1C and level 2A imagery.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 2015.</p>
</td>
<td><code>2015</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '01-01'.</p>
</td>
<td><code>'01-01'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '12-31'.</p>
</td>
<td><code>'12-31'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Returns an ImageCollection containing annual Sentinel 2 images.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">sentinel2_timeseries</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2015</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'01-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'12-31'</span><span class="p">):</span>
    <span class="sd">"""Generates an annual Sentinel 2 ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.</span>
<span class="sd">       Images include both level 1C and level 2A imagery.</span>
<span class="sd">    Args:</span>

<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 2015.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '01-01'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '12-31'.</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: Returns an ImageCollection containing annual Sentinel 2 images.</span>
<span class="sd">    """</span>
    <span class="c1">################################################################################</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Input and output parameters.</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">import</span> <span class="nn">datetime</span>

    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># roi = ee.Geometry.Polygon(</span>
        <span class="c1">#     [[[-180, -80],</span>
        <span class="c1">#       [-180, 80],</span>
        <span class="c1">#         [180, 80],</span>
        <span class="c1">#         [180, -80],</span>
        <span class="c1">#         [-180, -80]]], None, False)</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
            <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Could not convert the provided roi to ee.Geometry'</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="c1"># Adjusts longitudes less than -180 degrees or greater than 180 degrees.</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">adjust_longitude</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
    <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Setup vars to get dates.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&gt;=</span> <span class="mi">2015</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start year must be an integer &gt;= 2015.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&gt;=</span> <span class="mi">2015</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The end year must be an integer &lt;= 2020.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start data and end date must be month-day, such as 06-10, 09-20'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">start_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">end_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input dates are invalid.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">start_test</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">start_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="n">end_test</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">end_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">start_test</span> <span class="o">&gt;</span> <span class="n">end_test</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Start date must be prior to end date'</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">days_between</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">):</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d2</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">((</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>

    <span class="n">n_days</span> <span class="o">=</span> <span class="n">days_between</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span><span class="p">,</span>
                          <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="n">start_month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">start_day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">end_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span>

    <span class="c1"># Define a collection filter by date, bounds, and quality.</span>
    <span class="k">def</span> <span class="nf">colFilter</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">aoi</span><span class="p">):</span>  <span class="c1"># , startDate, endDate):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">aoi</span><span class="p">))</span>

    <span class="c1"># Get Sentinel 2 collections, both Level-1C (top of atmophere) and Level-2A (surface reflectance)</span>
    <span class="n">MSILCcol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'COPERNICUS/S2'</span><span class="p">)</span>
    <span class="n">MSI2Acol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'COPERNICUS/S2_SR'</span><span class="p">)</span>

    <span class="c1"># Define a collection filter by date, bounds, and quality.</span>
    <span class="k">def</span> <span class="nf">colFilter</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">col</span>
               <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
               <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">))</span>
        <span class="c1"># .filter('CLOUD_COVER &lt; 5')</span>
        <span class="c1"># .filter('GEOMETRIC_RMSE_MODEL &lt; 15')</span>
        <span class="c1"># .filter('IMAGE_QUALITY == 9 || IMAGE_QUALITY_OLI == 9'))</span>

    <span class="c1"># Function to get and rename bands of interest from MSI</span>
    <span class="k">def</span> <span class="nf">renameMSI</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B5'</span><span class="p">,</span> <span class="s1">'B6'</span><span class="p">,</span> <span class="s1">'B7'</span><span class="p">,</span>
                <span class="s1">'B8'</span><span class="p">,</span> <span class="s1">'B8A'</span><span class="p">,</span> <span class="s1">'B11'</span><span class="p">,</span> <span class="s1">'B12'</span><span class="p">,</span> <span class="s1">'QA60'</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Red Edge 1'</span><span class="p">,</span> <span class="s1">'Red Edge 2'</span><span class="p">,</span> <span class="s1">'Red Edge 3'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red Edge 4'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'QA60'</span><span class="p">]))</span>

    <span class="c1"># Add NBR for LandTrendr segmentation.</span>

    <span class="k">def</span> <span class="nf">calcNbr</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">])</span>
                            <span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">'NBR'</span><span class="p">))</span><span class="o">.</span><span class="n">int16</span><span class="p">())</span>

    <span class="c1"># Define function to mask out clouds and cloud shadows in images.</span>
    <span class="c1"># Use CFmask band included in USGS Landsat SR image product.</span>

    <span class="k">def</span> <span class="nf">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">cloudOpaqueBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span>
        <span class="n">cloudCirrusBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span>
        <span class="n">qa</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'QA60'</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudOpaqueBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> \
            <span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudCirrusBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>

    <span class="c1"># Define function to prepare MSI images.</span>
    <span class="k">def</span> <span class="nf">prepMSI</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">img</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">renameMSI</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">orig</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
               <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'bicubic'</span><span class="p">))</span>

    <span class="c1"># Get annual median collection.</span>
    <span class="k">def</span> <span class="nf">getAnnualComp</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">startDate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_month</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_day</span><span class="p">))</span>
        <span class="n">endDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">n_days</span><span class="p">),</span> <span class="s1">'day'</span><span class="p">)</span>

        <span class="c1"># Filter collections and prepare them for merging.</span>
        <span class="n">MSILCcoly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">MSILCcol</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepMSI</span><span class="p">)</span>
        <span class="n">MSI2Acoly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">MSI2Acol</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepMSI</span><span class="p">)</span>

        <span class="c1"># Merge the collections.</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">MSILCcoly</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">MSI2Acoly</span><span class="p">)</span>

        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">nBands</span> <span class="o">=</span> <span class="n">yearImg</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
            <span class="n">nBands</span><span class="p">,</span>
            <span class="n">yearImg</span><span class="p">,</span>
            <span class="n">dummyImg</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">calcNbr</span><span class="p">(</span><span class="n">yearImg</span><span class="p">)</span>
               <span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'year'</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s1">'system:time_start'</span><span class="p">:</span> <span class="n">startDate</span><span class="o">.</span><span class="n">millis</span><span class="p">(),</span> <span class="s1">'nBands'</span><span class="p">:</span> <span class="n">nBands</span><span class="p">}))</span>

    <span class="c1">################################################################################</span>

    <span class="c1"># Make a dummy image for missing years.</span>
    <span class="n">bandNames</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">([</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Red Edge 1'</span><span class="p">,</span>
                         <span class="s1">'Red Edge 2'</span><span class="p">,</span> <span class="s1">'Red Edge 3'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span>
                         <span class="s1">'Red Edge 4'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'QA60'</span><span class="p">])</span>
    <span class="n">fillerValues</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bandNames</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
    <span class="n">dummyImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">fillerValues</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">bandNames</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">selfMask</span><span class="p">()</span><span class="o">.</span><span class="n">int16</span><span class="p">()</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Get a list of years</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Make list of annual image composites.</span>
    <span class="n">imgList</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">getAnnualComp</span><span class="p">)</span>

    <span class="c1"># Convert image composite list to collection</span>
    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="o">.</span><span class="n">fromImages</span><span class="p">(</span><span class="n">imgList</span><span class="p">)</span>

    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">imgCol</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">roi</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">imgCol</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.set_proxy">
<code class="highlight language-python">
set_proxy<span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="s1">'http://127.0.0.1'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Sets proxy if needed. This is only needed for countries where Google services are not available.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>port</code></td>
<td><code>int</code></td>
<td>
<p>The proxy port number. Defaults to 1080.</p>
</td>
<td><code>1080</code></td>
</tr>
<tr>
<td><code>ip</code></td>
<td><code>str</code></td>
<td>
<p>The IP address. Defaults to 'http://127.0.0.1'.</p>
</td>
<td><code>'http://127.0.0.1'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_proxy</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="s1">'http://127.0.0.1'</span><span class="p">):</span>
    <span class="sd">"""Sets proxy if needed. This is only needed for countries where Google services are not available.</span>

<span class="sd">    Args:</span>
<span class="sd">        port (int, optional): The proxy port number. Defaults to 1080.</span>
<span class="sd">        ip (str, optional): The IP address. Defaults to 'http://127.0.0.1'.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ip</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'http'</span><span class="p">):</span>
            <span class="n">ip</span> <span class="o">=</span> <span class="s1">'http://'</span> <span class="o">+</span> <span class="n">ip</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="s1">'</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'HTTP_PROXY'</span><span class="p">]</span> <span class="o">=</span> <span class="n">proxy</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'HTTPS_PROXY'</span><span class="p">]</span> <span class="o">=</span> <span class="n">proxy</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://earthengine.google.com/'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'Failed to connect to Earth Engine. Please double check the port number and ip address.'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.show_image">
<code class="highlight language-python">
show_image<span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Shows an image within Jupyter notebook.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img_path</code></td>
<td><code>str</code></td>
<td>
<p>The image file path.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>width</code></td>
<td><code>int</code></td>
<td>
<p>Width of the image in pixels. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>height</code></td>
<td><code>int</code></td>
<td>
<p>Height of the image in pixels. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">show_image</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Shows an image within Jupyter notebook.</span>

<span class="sd">    Args:</span>
<span class="sd">        img_path (str): The image file path.</span>
<span class="sd">        width (int, optional): Width of the image in pixels. Defaults to None.</span>
<span class="sd">        height (int, optional): Height of the image in pixels. Defaults to None.</span>

<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
        <span class="c1"># layout={'border': '1px solid black'})</span>
        <span class="c1"># layout={'border': '1px solid black', 'width': str(width + 20) + 'px', 'height': str(height + 10) + 'px'},)</span>
        <span class="n">out</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">display</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">image</span><span class="p">))</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">display</span><span class="p">(</span><span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">image</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'You need set both width and height.'</span><span class="p">)</span>
                <span class="k">return</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.show_youtube">
<code class="highlight language-python">
show_youtube<span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">'h0pz3S6Tvx0'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Displays a YouTube video within Jupyter notebooks.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>str</code></td>
<td>
<p>Unique ID of the video. Defaults to 'h0pz3S6Tvx0'.</p>
</td>
<td><code>'h0pz3S6Tvx0'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">show_youtube</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">'h0pz3S6Tvx0'</span><span class="p">):</span>
    <span class="sd">"""Displays a YouTube video within Jupyter notebooks.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (str, optional): Unique ID of the video. Defaults to 'h0pz3S6Tvx0'.</span>

<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">YouTubeVideo</span><span class="p">,</span> <span class="n">display</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
            <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s1">'width'</span><span class="p">:</span> <span class="s1">'815px'</span><span class="p">})</span>
        <span class="c1"># layout={'border': '1px solid black', 'width': '815px'})</span>
        <span class="n">out</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">YouTubeVideo</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">450</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.shp_to_ee">
<code class="highlight language-python">
shp_to_ee<span class="p">(</span><span class="n">in_shp</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a shapefile to Earth Engine objects. Note that the CRS of the shapefile must be EPSG:4326</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_shp</code></td>
<td><code>str</code></td>
<td>
<p>File path to a shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Earth Engine objects representing the shapefile.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_ee</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
    <span class="sd">"""Converts a shapefile to Earth Engine objects. Note that the CRS of the shapefile must be EPSG:4326</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path to a shapefile.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: Earth Engine objects representing the shapefile.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ee_object</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.shp_to_geojson">
<code class="highlight language-python">
shp_to_geojson<span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a shapefile to GeoJSON.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_shp</code></td>
<td><code>str</code></td>
<td>
<p>File path of the input shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_json</code></td>
<td><code>str</code></td>
<td>
<p>File path of the output GeoJSON. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>The json object representing the shapefile.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Converts a shapefile to GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path of the input shapefile.</span>
<span class="sd">        out_json (str, optional): File path of the output GeoJSON. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The json object representing the shapefile.</span>
<span class="sd">    """</span>
    <span class="c1"># check_install('pyshp')</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">json</span>
        <span class="kn">import</span> <span class="nn">shapefile</span>
        <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">out_json</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">".json"</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_json</span><span class="p">):</span>
                <span class="n">out_json</span> <span class="o">=</span> <span class="n">out_json</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.json'</span><span class="p">,</span> <span class="s1">'_bk.json'</span><span class="p">)</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">)):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">))</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">]</span>
        <span class="n">buffer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sr</span> <span class="ow">in</span> <span class="n">reader</span><span class="o">.</span><span class="n">shapeRecords</span><span class="p">():</span>
            <span class="n">atr</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">sr</span><span class="o">.</span><span class="n">record</span><span class="p">))</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">sr</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">__geo_interface__</span>
            <span class="n">buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"Feature"</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geom</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="n">atr</span><span class="p">))</span>

        <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>
        <span class="n">geojson</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dumps</span><span class="p">({</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"FeatureCollection"</span><span class="p">,</span>
                             <span class="s2">"features"</span><span class="p">:</span> <span class="n">buffer</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">geojson</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_data</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.system_fonts">
<code class="highlight language-python">
system_fonts<span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets a list of system fonts.</p>
<pre><code># Common font locations:
# Linux: /usr/share/fonts/TTF/
# Windows: C:\Windows\Fonts
# macOS:  System &gt; Library &gt; Fonts
</code></pre>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>show_full_path</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to show the full path of each system font. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>A list of system fonts.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">system_fonts</span><span class="p">(</span><span class="n">show_full_path</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Gets a list of system fonts.</span>

<span class="sd">        # Common font locations:</span>
<span class="sd">        # Linux: /usr/share/fonts/TTF/</span>
<span class="sd">        # Windows: C:\Windows\Fonts</span>
<span class="sd">        # macOS:  System &gt; Library &gt; Fonts</span>

<span class="sd">    Args:</span>
<span class="sd">        show_full_path (bool, optional): Whether to show the full path of each system font. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of system fonts.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">matplotlib.font_manager</span>

        <span class="n">font_list</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">font_manager</span><span class="o">.</span><span class="n">findSystemFonts</span><span class="p">(</span>
            <span class="n">fontpaths</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontext</span><span class="o">=</span><span class="s1">'ttf'</span><span class="p">)</span>
        <span class="n">font_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="n">font_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">font_list</span><span class="p">]</span>
        <span class="n">font_names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">show_full_path</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">font_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">font_names</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.update_package">
<code class="highlight language-python">
update_package<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Updates the geemap package from the geemap GitHub repository without the need to use pip or conda.
In this way, I don't have to keep updating pypi and conda-forge with every minor update of the package.</p>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">update_package</span><span class="p">():</span>
    <span class="sd">"""Updates the geemap package from the geemap GitHub repository without the need to use pip or conda.</span>
<span class="sd">        In this way, I don't have to keep updating pypi and conda-forge with every minor update of the package.</span>

<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">shutil</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">)</span>
        <span class="n">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">download_dir</span><span class="p">)</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="s1">'geemap-master'</span><span class="p">)</span>
        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">'pip'</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'pip3 install .'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'pip install .'</span>

        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Please comment out 'geemap.update_package()' and restart the kernel to take effect:</span><span class="se">\n</span><span class="s2">Jupyter menu -&gt; Kernel -&gt; Restart &amp; Clear Output"</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.upload_to_imgur">
<code class="highlight language-python">
upload_to_imgur<span class="p">(</span><span class="n">in_gif</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Uploads an image to imgur.com</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_gif</code></td>
<td><code>str</code></td>
<td>
<p>The file path to the image.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">upload_to_imgur</span><span class="p">(</span><span class="n">in_gif</span><span class="p">):</span>
    <span class="sd">"""Uploads an image to imgur.com</span>

<span class="sd">    Args:</span>
<span class="sd">        in_gif (str): The file path to the image.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">subprocess</span>

    <span class="n">pkg_name</span> <span class="o">=</span> <span class="s1">'imgur-uploader'</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_tool</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">):</span>
        <span class="n">check_install</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">IMGUR_API_ID</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'IMGUR_API_ID'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">IMGUR_API_SECRET</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'IMGUR_API_SECRET'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">credentials_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
            <span class="s1">'~'</span><span class="p">),</span> <span class="s1">'.config/imgur_uploader/uploader.cfg'</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">((</span><span class="n">IMGUR_API_ID</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">IMGUR_API_SECRET</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">))</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>

            <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
                <span class="p">[</span><span class="s1">'imgur-uploader'</span><span class="p">,</span> <span class="n">in_gif</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">))</span>
            <span class="c1"># while True:</span>
            <span class="c1">#     line = proc.stdout.readline()</span>
            <span class="c1">#     if not line:</span>
            <span class="c1">#         break</span>
            <span class="c1">#     print(line.rstrip().decode("utf-8"))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Imgur API credentials could not be found. Please check https://pypi.org/project/imgur-uploader/ for instructions on how to get Imgur API credentials'</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.zonal_statistics">
<code class="highlight language-python">
zonal_statistics<span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'MEAN'</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_value_raster</code></td>
<td><code>object</code></td>
<td>
<p>An ee.Image that contains the values on which to calculate a statistic.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_zone_vector</code></td>
<td><code>object</code></td>
<td>
<p>An ee.FeatureCollection that defines the zones.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_file_path</code></td>
<td><code>str</code></td>
<td>
<p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>statistics_type</code></td>
<td><code>str</code></td>
<td>
<p>Statistic type to be calculated. Defaults to 'MEAN'. For 'HIST', you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For 'FIXED_HIST', you must provide three parameters: hist_min, hist_max, and hist_steps.</p>
</td>
<td><code>'MEAN'</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>tile_scale</code></td>
<td><code>float</code></td>
<td>
<p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">zonal_statistics</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'MEAN'</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An ee.Image that contains the values on which to calculate a statistic.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Statistic type to be calculated. Defaults to 'MEAN'. For 'HIST', you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For 'FIXED_HIST', you must provide three parameters: hist_min, hist_max, and hist_steps.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input raster must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input zone data must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="c1"># Parameters for histogram</span>
    <span class="c1"># The maximum number of buckets to use when building a histogram; will be rounded up to a power of 2.</span>
    <span class="n">max_buckets</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The minimum histogram bucket width, or null to allow any power of 2.</span>
    <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The number of values to accumulate before building the initial histogram.</span>
    <span class="n">max_raw</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hist_min</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># The lower (inclusive) bound of the first bucket.</span>
    <span class="n">hist_max</span> <span class="o">=</span> <span class="mf">100.0</span>  <span class="c1"># The upper (exclusive) bound of the last bucket.</span>
    <span class="n">hist_steps</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># The number of buckets to use.</span>

    <span class="k">if</span> <span class="s1">'max_buckets'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_buckets</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'max_buckets'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'min_bucket_width'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'min_bucket'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'max_raw'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_raw</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'max_raw'</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'FIXED_HIST'</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'hist_min'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'hist_max'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'hist_steps'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">hist_min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'hist_min'</span><span class="p">]</span>
        <span class="n">hist_max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'hist_max'</span><span class="p">]</span>
        <span class="n">hist_steps</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'hist_steps'</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'FIXED_HIST'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'To use fixedHistogram, please provide these three parameters: hist_min, hist_max, and hist_steps.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'MEAN'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s1">'MAXIMUM'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s1">'MEDIAN'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s1">'MINIMUM'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s1">'STD'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s1">'MIN_MAX'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">minMax</span><span class="p">(),</span>
        <span class="s1">'SUM'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s1">'VARIANCE'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
        <span class="s1">'HIST'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">maxBuckets</span><span class="o">=</span><span class="n">max_buckets</span><span class="p">,</span> <span class="n">minBucketWidth</span><span class="o">=</span><span class="n">min_bucket_width</span><span class="p">,</span> <span class="n">maxRaw</span><span class="o">=</span><span class="n">max_raw</span><span class="p">),</span>
        <span class="s1">'FIXED_HIST'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">fixedHistogram</span><span class="p">(</span><span class="n">hist_min</span><span class="p">,</span> <span class="n">hist_max</span><span class="p">,</span> <span class="n">hist_steps</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The statistics type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()))))</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Computing statistics ...'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="n">collection</span><span class="o">=</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="n">allowed_statistics</span><span class="p">[</span><span class="n">statistics_type</span><span class="p">],</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="n">tile_scale</span><span class="p">)</span>
        <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="geemap.geemap.zonal_statistics_by_group">
<code class="highlight language-python">
zonal_statistics_by_group<span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'SUM'</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_value_raster</code></td>
<td><code>object</code></td>
<td>
<p>An integer Image that contains the values on which to calculate area/percentage.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_zone_vector</code></td>
<td><code>object</code></td>
<td>
<p>An ee.FeatureCollection that defines the zones.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_file_path</code></td>
<td><code>str</code></td>
<td>
<p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>statistics_type</code></td>
<td><code>str</code></td>
<td>
<p>Can be either 'SUM' or 'PERCENTAGE' . Defaults to 'SUM'.</p>
</td>
<td><code>'SUM'</code></td>
</tr>
<tr>
<td><code>decimal_places</code></td>
<td><code>int</code></td>
<td>
<p>The number of decimal places to use. Defaults to 0.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>denominator</code></td>
<td><code>float</code></td>
<td>
<p>To covert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>tile_scale</code></td>
<td><code>float</code></td>
<td>
<p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>geemap/geemap.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">zonal_statistics_by_group</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'SUM'</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An integer Image that contains the values on which to calculate area/percentage.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Can be either 'SUM' or 'PERCENTAGE' . Defaults to 'SUM'.</span>
<span class="sd">        decimal_places (int, optional): The number of decimal places to use. Defaults to 0.</span>
<span class="sd">        denominator (float, optional): To covert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input raster must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">band_count</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">band_name</span> <span class="o">=</span> <span class="s1">''</span>
    <span class="k">if</span> <span class="n">band_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">band_name</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input image can only have one band.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">band_types</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandTypes</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">band_type</span> <span class="o">=</span> <span class="n">band_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'precision'</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">band_type</span> <span class="o">!=</span> <span class="s1">'int'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input image band must be integer type.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input zone data must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'SUM'</span><span class="p">,</span> <span class="s1">'PERCENTAGE'</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The statistics type can only be one of </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Computing ... '</span><span class="p">)</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">in_zone_vector</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">(</span>
        <span class="p">),</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span> <span class="n">bestEffort</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>
        <span class="n">class_values</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">))</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="n">class_names</span> <span class="o">=</span> <span class="n">class_values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">'Class_'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">()))</span>

        <span class="n">class_count</span> <span class="o">=</span> <span class="n">class_values</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">)</span>

        <span class="n">init_result</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
            <span class="s1">'collection'</span><span class="p">:</span> <span class="n">in_zone_vector</span><span class="p">,</span>
            <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
                <span class="s1">'groupField'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">'groupName'</span><span class="p">:</span> <span class="s1">'group'</span><span class="p">,</span>
            <span class="p">}),</span>
            <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span>
        <span class="p">})</span>

        <span class="k">def</span> <span class="nf">build_dict</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>

            <span class="n">decimal_format</span> <span class="o">=</span> <span class="s1">'%.</span><span class="si">{}</span><span class="s1">f'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_places</span><span class="p">)</span>
            <span class="n">in_dict</span> <span class="o">=</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">()</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">'Class_'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span>
                <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'group'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">()),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'sum'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_format</span><span class="p">))))</span>
            <span class="k">return</span> <span class="n">in_dict</span>

        <span class="k">def</span> <span class="nf">get_keys</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">'Class_'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'group'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">()))</span>

        <span class="k">def</span> <span class="nf">get_values</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="n">decimal_format</span> <span class="o">=</span> <span class="s1">'%.</span><span class="si">{}</span><span class="s1">f'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_places</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'sum'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_format</span><span class="p">)))</span>

        <span class="k">def</span> <span class="nf">set_attribute</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'groups'</span><span class="p">))</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">get_keys</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">get_values</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">total_area</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

            <span class="k">def</span> <span class="nf">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">statistics_type</span><span class="p">)</span><span class="o">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span>
                    <span class="s1">'SUM'</span><span class="p">)),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">cls_value</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">total_area</span><span class="p">)),</span> <span class="n">cls_value</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">cls_value</span>

            <span class="n">full_values</span> <span class="o">=</span> <span class="n">class_names</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">class_names</span><span class="p">,</span> <span class="n">full_values</span><span class="p">)</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'Class_sum'</span><span class="p">,</span> <span class="n">total_area</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">attr_dict</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'groups'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">final_result</span> <span class="o">=</span> <span class="n">init_result</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_attribute</span><span class="p">)</span>
        <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">final_result</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
<hr/>
<div class="md-source-date">
<small>
    
      Last update: 2020-10-27
    
  </small>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../eefolium/" rel="prev">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                eefolium module
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../legends/" rel="next">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                legends module
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/vendor.6a3d08fc.min.js"></script>
<script src="../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
<script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>